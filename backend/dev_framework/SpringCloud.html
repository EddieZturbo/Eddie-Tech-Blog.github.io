<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/backend/dev_framework/SpringCloud.html"><meta property="og:site_name" content="Eddie-Tech-Blog"><meta property="og:title" content="SpringCloud"><meta property="og:description" content="Spring Cloud (https://spring.io/projects/spring-cloud) Spring Cloud æ˜¯ä¸€æ¬¾åŸºäº Spring Boot å®ç°çš„å¾®æœåŠ¡æ¡†æ¶ã€‚Spring Cloud æºè‡ª Spring ç¤¾åŒºï¼Œä¸»è¦ç”± Pivotal å’Œ Netflix ä¸¤å¤§å…¬å¸æä¾›æŠ€æœ¯è¿­ä»£å’Œç»´æŠ¤æœåŠ¡æ²»ç†ï¼šé˜¿é‡Œå·´å·´å¼€æºçš„ Dubbo å’Œ..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SpringCloud","image":[""],"dateModified":null,"author":[]}</script><title>SpringCloud | Eddie-Tech-Blog</title><meta name="description" content="Spring Cloud (https://spring.io/projects/spring-cloud) Spring Cloud æ˜¯ä¸€æ¬¾åŸºäº Spring Boot å®ç°çš„å¾®æœåŠ¡æ¡†æ¶ã€‚Spring Cloud æºè‡ª Spring ç¤¾åŒºï¼Œä¸»è¦ç”± Pivotal å’Œ Netflix ä¸¤å¤§å…¬å¸æä¾›æŠ€æœ¯è¿­ä»£å’Œç»´æŠ¤æœåŠ¡æ²»ç†ï¼šé˜¿é‡Œå·´å·´å¼€æºçš„ Dubbo å’Œ...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-71862533.css" as="style"><link rel="stylesheet" href="/assets/style-71862533.css">
    <link rel="modulepreload" href="/assets/app-7117916c.js"><link rel="modulepreload" href="/assets/framework-e28ace55.js"><link rel="modulepreload" href="/assets/SpringCloud.html-48d23b72.js"><link rel="modulepreload" href="/assets/SpringCloud.html-ea2ab3b7.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="Eddie-Tech-Blog"><!----><span class="site-name hide-in-pad">Eddie-Tech-Blog</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="Home"><span class="font-icon icon iconfont icon-home" style=""></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/eddie/" class="nav-link" aria-label="Expoler"><span class="font-icon icon iconfont icon-discover" style=""></span>Expoler<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Backend-Dev"><span class="title"><span class="font-icon icon iconfont icon-edit" style=""></span>Backend-Dev</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Java</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/java/jvm.html" class="nav-link" aria-label="JVM"><span class="font-icon icon iconfont icon-edit" style=""></span>JVM<!----></a></li><li class="dropdown-subitem"><a href="/backend/java/java8.html" class="nav-link" aria-label="Java8"><span class="font-icon icon iconfont icon-edit" style=""></span>Java8<!----></a></li><li class="dropdown-subitem"><a href="/backend/java/java_concurrency_programming.html" class="nav-link" aria-label="Java Concurrency Programming"><span class="font-icon icon iconfont icon-edit" style=""></span>Java Concurrency Programming<!----></a></li><li class="dropdown-subitem"><a href="/backend/java/Java.html" class="nav-link" aria-label="Java"><span class="font-icon icon iconfont icon-edit" style=""></span>Java<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Database</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/database/mysql.html" class="nav-link" aria-label="MySQL  Basic --- advanced"><span class="font-icon icon iconfont icon-edit" style=""></span>MySQL  Basic --- advanced<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Dev-FrameWork</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/dev_framework/SpringBoot.html" class="nav-link" aria-label="Spring Boot"><span class="font-icon icon iconfont icon-edit" style=""></span>Spring Boot<!----></a></li><li class="dropdown-subitem"><a href="/backend/dev_framework/SpringMVC.html" class="nav-link" aria-label="SpringMVC"><span class="font-icon icon iconfont icon-edit" style=""></span>SpringMVC<!----></a></li><li class="dropdown-subitem"><a href="/backend/dev_framework/Spring5.html" class="nav-link" aria-label="Spring5"><span class="font-icon icon iconfont icon-edit" style=""></span>Spring5<!----></a></li><li class="dropdown-subitem"><a href="/backend/dev_framework/Mybatis.html" class="nav-link" aria-label="Mybatis"><span class="font-icon icon iconfont icon-edit" style=""></span>Mybatis<!----></a></li><li class="dropdown-subitem"><a href="/backend/dev_framework/MybatisPlus.html" class="nav-link" aria-label="MybatisPlus"><span class="font-icon icon iconfont icon-edit" style=""></span>MybatisPlus<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html" class="router-link-active router-link-exact-active nav-link active" aria-label="SpringCloud &amp; ~Aibaba"><span class="font-icon icon iconfont icon-edit" style=""></span>SpringCloud &amp; ~Aibaba<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Middleware</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/middleware/MQ.html" class="nav-link" aria-label="MQ"><span class="font-icon icon iconfont icon-edit" style=""></span>MQ<!----></a></li><li class="dropdown-subitem"><a href="/backend/middleware/Redis.html" class="nav-link" aria-label="Redis"><span class="font-icon icon iconfont icon-edit" style=""></span>Redis<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Skills</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/skills/DataStructureAlgorithm.html" class="nav-link" aria-label="DataStructureAlgorithm"><span class="font-icon icon iconfont icon-edit" style=""></span>DataStructureAlgorithm<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/ComputerNetwork.html" class="nav-link" aria-label="ComputerNetwork"><span class="font-icon icon iconfont icon-edit" style=""></span>ComputerNetwork<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/OperatingSystem.html" class="nav-link" aria-label="OperatingSystem"><span class="font-icon icon iconfont icon-edit" style=""></span>OperatingSystem<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/Methodology.html" class="nav-link" aria-label="Methodology"><span class="font-icon icon iconfont icon-edit" style=""></span>Methodology<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/IO.html" class="nav-link" aria-label="IO"><span class="font-icon icon iconfont icon-edit" style=""></span>IO<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/Netty.html" class="nav-link" aria-label="Netty"><span class="font-icon icon iconfont icon-edit" style=""></span>Netty<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/Linux.html" class="nav-link" aria-label="Linux"><span class="font-icon icon iconfont icon-edit" style=""></span>Linux<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/Dubbo.html" class="nav-link" aria-label="Dubbo"><span class="font-icon icon iconfont icon-edit" style=""></span>Dubbo<!----></a></li><li class="dropdown-subitem"><a href="/backend/skills/Zookeeper.html" class="nav-link" aria-label="Zookeeper"><span class="font-icon icon iconfont icon-edit" style=""></span>Zookeeper<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Tools</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/tools/Docker.html" class="nav-link" aria-label="Docker"><span class="font-icon icon iconfont icon-edit" style=""></span>Docker<!----></a></li><li class="dropdown-subitem"><a href="/backend/tools/Git.html" class="nav-link" aria-label="Git"><span class="font-icon icon iconfont icon-edit" style=""></span>Git<!----></a></li><li class="dropdown-subitem"><a href="/backend/tools/Maven.html" class="nav-link" aria-label="Maven"><span class="font-icon icon iconfont icon-edit" style=""></span>Maven<!----></a></li><li class="dropdown-subitem"><a href="/backend/tools/Nginx.html" class="nav-link" aria-label="Nginx"><span class="font-icon icon iconfont icon-edit" style=""></span>Nginx<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/article-papper/" class="nav-link" aria-label="Article &amp; Papper"><span class="font-icon icon iconfont icon-note" style=""></span>Article &amp; Papper<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/EddieZturbo/Eddie-Tech-Blog.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="Home"><span class="font-icon icon iconfont icon-home" style=""></span>Home<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-discover" style=""></span><a href="/eddie/" class="title">Eddie</a><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">Backend-Dev</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Database</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Dev Framework</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/backend/dev_framework/Mybatis.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatis"><!---->Mybatis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/backend/dev_framework/MybatisPlus.html" class="nav-link sidebar-link sidebar-page" aria-label="MybatisPlus"><!---->MybatisPlus<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/backend/dev_framework/SpringBoot.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring Boot Deeply"><!---->Spring Boot Deeply<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/backend/dev_framework/Spring5.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring5"><!---->Spring5<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/backend/dev_framework/SpringCloud.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="SpringCloud"><!---->SpringCloud<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-cloud-å¸¸ç”¨ç»„ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Spring Cloud å¸¸ç”¨ç»„ä»¶"><!---->Spring Cloud å¸¸ç”¨ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-boot-å’Œ-spring-cloud" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Spring Boot å’Œ Spring Cloud"><!---->Spring Boot å’Œ Spring Cloud<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#cloudç»„ä»¶å‡çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Cloudç»„ä»¶å‡çº§"><!---->Cloudç»„ä»¶å‡çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º"><!---->å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#çˆ¶å·¥ç¨‹projectæ­å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="çˆ¶å·¥ç¨‹Projectæ­å»º"><!---->çˆ¶å·¥ç¨‹Projectæ­å»º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å¾®æœåŠ¡æ¨¡å—çš„æ„å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¾®æœåŠ¡æ¨¡å—çš„æ„å»º"><!---->å¾®æœåŠ¡æ¨¡å—çš„æ„å»º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ”¯ä»˜æ¨¡å—æ„å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ”¯ä»˜æ¨¡å—æ„å»º"><!---->æ”¯ä»˜æ¨¡å—æ„å»º<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><!---->æœåŠ¡æ³¨å†Œä¸­å¿ƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#eureka" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Eureka"><!---->Eureka<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#zookeeper" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Zookeeper"><!---->Zookeeper<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#consul" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Consul"><!---->Consul<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ä¸‰è€…æ¯”è¾ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰è€…æ¯”è¾ƒ"><!---->ä¸‰è€…æ¯”è¾ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨"><!---->è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ribbon-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ribbon"><!---->Ribbon<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è´Ÿè½½å‡è¡¡"><!---->è´Ÿè½½å‡è¡¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ribbon-å®ç°æœåŠ¡è°ƒç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ribbon å®ç°æœåŠ¡è°ƒç”¨"><!---->Ribbon å®ç°æœåŠ¡è°ƒç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥"><!---->Ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥"><!---->åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥"><!---->å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡è°ƒç”¨openfeign" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡è°ƒç”¨OpenFeign"><!---->æœåŠ¡è°ƒç”¨OpenFeign<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡é™çº§-ç†”æ–­hystrix" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡é™çº§ï¼Œç†”æ–­Hystrix"><!---->æœåŠ¡é™çº§ï¼Œç†”æ–­Hystrix<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ"><!---->Hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„"><!---->Hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å·¥ä½œæµç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å·¥ä½œæµç¨‹"><!---->å·¥ä½œæµç¨‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ç†”æ–­å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç†”æ–­å™¨"><!---->ç†”æ–­å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrix-æœåŠ¡é™çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Hystrix æœåŠ¡é™çº§"><!---->Hystrix æœåŠ¡é™çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrix-æœåŠ¡ç†”æ–­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Hystrix æœåŠ¡ç†”æ–­"><!---->Hystrix æœåŠ¡ç†”æ–­<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrix-æ•…éšœç›‘æ§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Hystrix æ•…éšœç›‘æ§"><!---->Hystrix æ•…éšœç›‘æ§<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡ç½‘å…³" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœåŠ¡ç½‘å…³"><!---->æœåŠ¡ç½‘å…³<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#zuul" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Zuul"><!---->Zuul<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#gatewayâ˜†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Gatewayâ˜†"><!---->Gatewayâ˜†<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#åˆ†å¸ƒå¼é…ç½®config" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ†å¸ƒå¼é…ç½®Config"><!---->åˆ†å¸ƒå¼é…ç½®Config<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-cloud-config-å·¥ä½œåŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Spring Cloud Config å·¥ä½œåŸç†"><!---->Spring Cloud Config å·¥ä½œåŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-cloud-config-çš„ç‰¹ç‚¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Spring Cloud Config çš„ç‰¹ç‚¹"><!---->Spring Cloud Config çš„ç‰¹ç‚¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ­å»º-config-æœåŠ¡ç«¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»º Config æœåŠ¡ç«¯"><!---->æ­å»º Config æœåŠ¡ç«¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ­å»º-config-å®¢æˆ·ç«¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»º Config å®¢æˆ·ç«¯"><!---->æ­å»º Config å®¢æˆ·ç«¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ‰‹åŠ¨åˆ·æ–°é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ‰‹åŠ¨åˆ·æ–°é…ç½®"><!---->æ‰‹åŠ¨åˆ·æ–°é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#config-bus-å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Config+Bus å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°"><!---->Config+Bus å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#streamæ¶ˆæ¯é©±åŠ¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Streamæ¶ˆæ¯é©±åŠ¨"><!---->Streamæ¶ˆæ¯é©±åŠ¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#é›†æˆkafka" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é›†æˆKafka"><!---->é›†æˆKafka<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#é›†æˆrabbitmq" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é›†æˆRabbitMQ"><!---->é›†æˆRabbitMQ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª"><!---->Sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ä¸»è¦åŠŸèƒ½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸»è¦åŠŸèƒ½"><!---->ä¸»è¦åŠŸèƒ½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ç»„ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç»„ä»¶"><!---->ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacos" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nacos"><!---->Nacos<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacos-çš„ç‰¹æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nacos çš„ç‰¹æ€§"><!---->Nacos çš„ç‰¹æ€§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacoså®‰è£…è¿è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nacoså®‰è£…è¿è¡Œ"><!---->Nacoså®‰è£…è¿è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ"><!---->NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacosæœåŠ¡é…ç½®ä¸­å¿ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="NacosæœåŠ¡é…ç½®ä¸­å¿ƒ"><!---->NacosæœåŠ¡é…ç½®ä¸­å¿ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacosé›†ç¾¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Nacosé›†ç¾¤"><!---->Nacosé›†ç¾¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinel" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Sentinel"><!---->Sentinel<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ•´åˆspringbooté¡¹ç›®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´åˆSpringBooté¡¹ç›®"><!---->æ•´åˆSpringBooté¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelæ‘˜è¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Sentinelæ‘˜è¦"><!---->Sentinelæ‘˜è¦<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelæµæ§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Sentinelæµæ§"><!---->Sentinelæµæ§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯"><!---->cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelç†”æ–­é™çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Sentinelç†”æ–­é™çº§"><!---->Sentinelç†”æ–­é™çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelresource-æ³¨è§£â˜†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="@SentinelResource æ³¨è§£â˜†"><!---->@SentinelResource æ³¨è§£â˜†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelè§„åˆ™æŒä¹…åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Sentinelè§„åˆ™æŒä¹…åŒ–"><!---->Sentinelè§„åˆ™æŒä¹…åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/backend/dev_framework/SpringMVC.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringMVC"><!---->SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Middleware</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Skills</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Tools</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">Article &amp; Papper</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Article</span><span class="arrow end"></span></button><!----></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->SpringCloud</h1><div class="page-info"><span class="page-author-info" aria-label="AuthorğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/EddieZturbo" target="_blank" rel="noopener noreferrer">EddieZ</a></span><span property="author" content="EddieZ"></span></span><!----><!----><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 96 min</span><meta property="timeRequired" content="PT96M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-cloud-å¸¸ç”¨ç»„ä»¶" class="router-link-active router-link-exact-active toc-link level2">Spring Cloud å¸¸ç”¨ç»„ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-boot-å’Œ-spring-cloud" class="router-link-active router-link-exact-active toc-link level2">Spring Boot å’Œ Spring Cloud</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#cloudç»„ä»¶å‡çº§" class="router-link-active router-link-exact-active toc-link level2">Cloudç»„ä»¶å‡çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º" class="router-link-active router-link-exact-active toc-link level2">å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#çˆ¶å·¥ç¨‹projectæ­å»º" class="router-link-active router-link-exact-active toc-link level3">çˆ¶å·¥ç¨‹Projectæ­å»º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å¾®æœåŠ¡æ¨¡å—çš„æ„å»º" class="router-link-active router-link-exact-active toc-link level3">å¾®æœåŠ¡æ¨¡å—çš„æ„å»º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ”¯ä»˜æ¨¡å—æ„å»º" class="router-link-active router-link-exact-active toc-link level3">æ”¯ä»˜æ¨¡å—æ„å»º</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="router-link-active router-link-exact-active toc-link level2">æœåŠ¡æ³¨å†Œä¸­å¿ƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#eureka" class="router-link-active router-link-exact-active toc-link level3">Eureka</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#zookeeper" class="router-link-active router-link-exact-active toc-link level3">Zookeeper</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#consul" class="router-link-active router-link-exact-active toc-link level3">Consul</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ä¸‰è€…æ¯”è¾ƒ" class="router-link-active router-link-exact-active toc-link level3">ä¸‰è€…æ¯”è¾ƒ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨" class="router-link-active router-link-exact-active toc-link level2">è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ribbon-1" class="router-link-active router-link-exact-active toc-link level3">Ribbon</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active toc-link level3">è´Ÿè½½å‡è¡¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ribbon-å®ç°æœåŠ¡è°ƒç”¨" class="router-link-active router-link-exact-active toc-link level3">Ribbon å®ç°æœåŠ¡è°ƒç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥" class="router-link-active router-link-exact-active toc-link level3">Ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥" class="router-link-active router-link-exact-active toc-link level3">åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥" class="router-link-active router-link-exact-active toc-link level3">å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡è°ƒç”¨openfeign" class="router-link-active router-link-exact-active toc-link level2">æœåŠ¡è°ƒç”¨OpenFeign</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡é™çº§-ç†”æ–­hystrix" class="router-link-active router-link-exact-active toc-link level2">æœåŠ¡é™çº§ï¼Œç†”æ–­Hystrix</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">Hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„" class="router-link-active router-link-exact-active toc-link level3">Hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#å·¥ä½œæµç¨‹" class="router-link-active router-link-exact-active toc-link level3">å·¥ä½œæµç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ç†”æ–­å™¨" class="router-link-active router-link-exact-active toc-link level3">ç†”æ–­å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrix-æœåŠ¡é™çº§" class="router-link-active router-link-exact-active toc-link level3">Hystrix æœåŠ¡é™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrix-æœåŠ¡ç†”æ–­" class="router-link-active router-link-exact-active toc-link level3">Hystrix æœåŠ¡ç†”æ–­</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#hystrix-æ•…éšœç›‘æ§" class="router-link-active router-link-exact-active toc-link level3">Hystrix æ•…éšœç›‘æ§</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æœåŠ¡ç½‘å…³" class="router-link-active router-link-exact-active toc-link level2">æœåŠ¡ç½‘å…³</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#zuul" class="router-link-active router-link-exact-active toc-link level3">Zuul</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#gatewayâ˜†" class="router-link-active router-link-exact-active toc-link level3">Gatewayâ˜†</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#åˆ†å¸ƒå¼é…ç½®config" class="router-link-active router-link-exact-active toc-link level2">åˆ†å¸ƒå¼é…ç½®Config</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-cloud-config-å·¥ä½œåŸç†" class="router-link-active router-link-exact-active toc-link level3">Spring Cloud Config å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#spring-cloud-config-çš„ç‰¹ç‚¹" class="router-link-active router-link-exact-active toc-link level3">Spring Cloud Config çš„ç‰¹ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ­å»º-config-æœåŠ¡ç«¯" class="router-link-active router-link-exact-active toc-link level3">æ­å»º Config æœåŠ¡ç«¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ­å»º-config-å®¢æˆ·ç«¯" class="router-link-active router-link-exact-active toc-link level3">æ­å»º Config å®¢æˆ·ç«¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ‰‹åŠ¨åˆ·æ–°é…ç½®" class="router-link-active router-link-exact-active toc-link level3">æ‰‹åŠ¨åˆ·æ–°é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#config-bus-å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°" class="router-link-active router-link-exact-active toc-link level3">Config+Bus å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#streamæ¶ˆæ¯é©±åŠ¨" class="router-link-active router-link-exact-active toc-link level2">Streamæ¶ˆæ¯é©±åŠ¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#é›†æˆkafka" class="router-link-active router-link-exact-active toc-link level3">é›†æˆKafka</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#é›†æˆrabbitmq" class="router-link-active router-link-exact-active toc-link level3">é›†æˆRabbitMQ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª" class="router-link-active router-link-exact-active toc-link level2">Sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ä¸»è¦åŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level2">ä¸»è¦åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#ç»„ä»¶" class="router-link-active router-link-exact-active toc-link level2">ç»„ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacos" class="router-link-active router-link-exact-active toc-link level2">Nacos</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacos-çš„ç‰¹æ€§" class="router-link-active router-link-exact-active toc-link level3">Nacos çš„ç‰¹æ€§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacoså®‰è£…è¿è¡Œ" class="router-link-active router-link-exact-active toc-link level3">Nacoså®‰è£…è¿è¡Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="router-link-active router-link-exact-active toc-link level3">NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacosæœåŠ¡é…ç½®ä¸­å¿ƒ" class="router-link-active router-link-exact-active toc-link level3">NacosæœåŠ¡é…ç½®ä¸­å¿ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#nacosé›†ç¾¤" class="router-link-active router-link-exact-active toc-link level3">Nacosé›†ç¾¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinel" class="router-link-active router-link-exact-active toc-link level2">Sentinel</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#æ•´åˆspringbooté¡¹ç›®" class="router-link-active router-link-exact-active toc-link level3">æ•´åˆSpringBooté¡¹ç›®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelæ‘˜è¦" class="router-link-active router-link-exact-active toc-link level3">Sentinelæ‘˜è¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelæµæ§" class="router-link-active router-link-exact-active toc-link level3">Sentinelæµæ§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯" class="router-link-active router-link-exact-active toc-link level3">cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelç†”æ–­é™çº§" class="router-link-active router-link-exact-active toc-link level3">Sentinelç†”æ–­é™çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelresource-æ³¨è§£â˜†" class="router-link-active router-link-exact-active toc-link level3">@SentinelResource æ³¨è§£â˜†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/backend/dev_framework/SpringCloud.html#sentinelè§„åˆ™æŒä¹…åŒ–" class="router-link-active router-link-exact-active toc-link level3">Sentinelè§„åˆ™æŒä¹…åŒ–</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="springcloud" tabindex="-1"><a class="header-anchor" href="#springcloud" aria-hidden="true">#</a> SpringCloud</h1><p><a href="https://spring.io/projects/spring-cloud" target="_blank" rel="noopener noreferrer">Spring Cloud<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Spring Cloud æ˜¯ä¸€æ¬¾<strong>åŸºäº Spring Boot å®ç°</strong>çš„<strong>å¾®æœåŠ¡æ¡†æ¶</strong>ã€‚Spring Cloud <strong>æºè‡ª Spring ç¤¾åŒº</strong>ï¼Œä¸»è¦ç”± Pivotal å’Œ Netflix ä¸¤å¤§å…¬å¸æä¾›æŠ€æœ¯è¿­ä»£å’Œç»´æŠ¤</p><ul><li><strong>æœåŠ¡æ²»ç†</strong>ï¼šé˜¿é‡Œå·´å·´å¼€æºçš„ Dubbo å’Œå½“å½“ç½‘åœ¨å…¶åŸºç¡€ä¸Šæ‰©å±•å‡ºæ¥çš„ DubboXã€Netflix çš„ Eureka ä»¥åŠ Apache çš„ Consul ç­‰ã€‚</li><li><strong>åˆ†å¸ƒå¼é…ç½®ç®¡ç†</strong>ï¼šç™¾åº¦çš„ Disconfã€Netflix çš„ Archaiusã€360 çš„ QConfã€æºç¨‹çš„ Apollo ä»¥åŠ Spring Cloud çš„ Config ç­‰ã€‚</li><li><strong>æ‰¹é‡ä»»åŠ¡</strong>ï¼šå½“å½“ç½‘çš„ Elastic-Jobã€LinkedIn çš„ Azkaban ä»¥åŠ Spring Cloud çš„ Task ç­‰ã€‚</li><li><strong>æœåŠ¡è·Ÿè¸ª</strong>ï¼šäº¬ä¸œçš„ Hydraã€Spring Cloud çš„ Sleuth ä»¥åŠ Twitter çš„ Zipkin ç­‰ã€‚</li><li><strong>â€¦â€¦</strong></li></ul><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>å¯¹äºåŒä¸€ä¸ªå¾®æœåŠ¡é—®é¢˜ï¼Œå„äº’è”ç½‘å…¬å¸ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆå„ä¸ç›¸åŒã€‚</li><li>ä¸€ä¸ªå¾®æœåŠ¡æ¡†æ¶æˆ–è§£å†³æ–¹æ¡ˆéƒ½åªèƒ½è§£å†³å¾®æœåŠ¡ä¸­çš„æŸä¸€ä¸ªæˆ–æŸå‡ ä¸ªé—®é¢˜ï¼Œå¯¹äºå…¶ä»–é—®é¢˜åˆ™æ— èƒ½ä¸ºåŠ›</li></ul><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221204105524272.png" alt="image-20221204105524272"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221204110449260.png" alt="image-20221204110449260"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221204110806825.png" alt="image-20221204110806825"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221204111223491.png" alt="image-20221204111223491"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221204111301492.png" alt="image-20221204111301492"></p><h2 id="spring-cloud-å¸¸ç”¨ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#spring-cloud-å¸¸ç”¨ç»„ä»¶" aria-hidden="true">#</a> <strong>Spring Cloud å¸¸ç”¨ç»„ä»¶</strong></h2><p>Spring Cloud åŒ…æ‹¬ Spring Cloud Gatewayã€Spring Cloud Configã€Spring Cloud Bus ç­‰è¿‘ 20 ä¸ªæœåŠ¡ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æä¾›äº†<strong>æœåŠ¡æ²»ç†</strong>ã€<strong>æœåŠ¡ç½‘å…³</strong>ã€<strong>æ™ºèƒ½è·¯ç”±</strong>ã€<strong>è´Ÿè½½å‡è¡¡</strong>ã€<strong>ç†”æ–­å™¨</strong>ã€<strong>ç›‘æ§è·Ÿè¸ª</strong>ã€<strong>åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—</strong>ã€<strong>é…ç½®ç®¡ç†</strong>ç­‰é¢†åŸŸçš„è§£å†³æ–¹æ¡ˆ</p><table><thead><tr><th>Spring Cloud ç»„ä»¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>Eureka</td><td>Spring Cloud Netflix ä¸­çš„æœåŠ¡æ²»ç†ç»„ä»¶ï¼ŒåŒ…å«æœåŠ¡æ³¨å†Œä¸­å¿ƒã€æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶çš„å®ç°ã€‚</td></tr><tr><td>Ribbon</td><td>Spring Cloud Netflix ä¸­çš„æœåŠ¡è°ƒç”¨å’Œå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç»„ä»¶ã€‚</td></tr><tr><td>Hystrix</td><td>äººç§°â€œè±ªçŒªå“¥â€ï¼ŒSpring Cloud Netflix çš„å®¹é”™ç®¡ç†ç»„ä»¶ï¼Œä¸ºæœåŠ¡ä¸­å‡ºç°çš„å»¶è¿Ÿå’Œæ•…éšœæä¾›å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ã€‚</td></tr><tr><td>OpenFeign</td><td>åŸºäº Ribbon å’Œ Hystrix çš„å£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶ã€‚</td></tr><tr><td>Zuul</td><td>Spring Cloud Netflix ä¸­çš„ç½‘å…³ç»„ä»¶ï¼Œæä¾›äº†æ™ºèƒ½è·¯ç”±ã€è®¿é—®è¿‡æ»¤ç­‰åŠŸèƒ½ã€‚</td></tr><tr><td>Gateway</td><td>ä¸€ä¸ªåŸºäº Spring 5.0ï¼ŒSpring Boot 2.0 å’Œ Project Reactor ç­‰æŠ€æœ¯å¼€å‘çš„ç½‘å…³æ¡†æ¶ï¼Œå®ƒä½¿ç”¨ Filter é“¾çš„æ–¹å¼æä¾›äº†ç½‘å…³çš„åŸºæœ¬åŠŸèƒ½ï¼Œä¾‹å¦‚å®‰å…¨ã€ç›‘æ§/æŒ‡æ ‡å’Œé™æµç­‰ã€‚</td></tr><tr><td>Config</td><td>Spring Cloud çš„é…ç½®ç®¡ç†å·¥å…·ï¼Œæ”¯æŒä½¿ç”¨ Git å­˜å‚¨é…ç½®å†…å®¹ï¼Œå®ç°åº”ç”¨é…ç½®çš„å¤–éƒ¨åŒ–å­˜å‚¨ï¼Œå¹¶æ”¯æŒåœ¨å®¢æˆ·ç«¯å¯¹é…ç½®è¿›è¡Œåˆ·æ–°ã€åŠ å¯†ã€è§£å¯†ç­‰æ“ä½œã€‚</td></tr><tr><td>Bus</td><td>Spring Cloud çš„äº‹ä»¶å’Œæ¶ˆæ¯æ€»çº¿ï¼Œä¸»è¦ç”¨äºåœ¨é›†ç¾¤ä¸­ä¼ æ’­äº‹ä»¶æˆ–çŠ¶æ€å˜åŒ–ï¼Œä»¥è§¦å‘åç»­çš„å¤„ç†ï¼Œä¾‹å¦‚åŠ¨æ€åˆ·æ–°é…ç½®ã€‚</td></tr><tr><td>Stream</td><td>Spring Cloud çš„æ¶ˆæ¯ä¸­é—´ä»¶ç»„ä»¶ï¼Œå®ƒé›†æˆäº† Apache Kafka å’Œ RabbitMQ ç­‰æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå¹¶é€šè¿‡å®šä¹‰ç»‘å®šå™¨ä½œä¸ºä¸­é—´å±‚ï¼Œå®Œç¾åœ°å®ç°äº†åº”ç”¨ç¨‹åºä¸æ¶ˆæ¯ä¸­é—´ä»¶ä¹‹é—´çš„éš”ç¦»ã€‚é€šè¿‡å‘åº”ç”¨ç¨‹åºæš´éœ²ç»Ÿä¸€çš„ Channel é€šé“ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä¸éœ€è¦å†è€ƒè™‘å„ç§ä¸åŒçš„æ¶ˆæ¯ä¸­é—´ä»¶å®ç°ï¼Œå°±èƒ½è½»æ¾åœ°å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚</td></tr><tr><td>Sleuth</td><td>Spring Cloud åˆ†å¸ƒå¼é“¾è·¯è·Ÿè¸ªç»„ä»¶ï¼Œèƒ½å¤Ÿå®Œç¾çš„æ•´åˆ Twitter çš„ Zipkinã€‚</td></tr></tbody></table><h2 id="spring-boot-å’Œ-spring-cloud" tabindex="-1"><a class="header-anchor" href="#spring-boot-å’Œ-spring-cloud" aria-hidden="true">#</a> Spring Boot å’Œ Spring Cloud</h2><p>Spring Boot å’Œ Spring Cloud éƒ½æ˜¯ Spring å¤§å®¶æ—çš„ä¸€å‘˜ï¼Œå®ƒä»¬åœ¨å¾®æœåŠ¡å¼€å‘ä¸­éƒ½æ‰®æ¼”ç€ååˆ†é‡è¦çš„è§’è‰²ï¼Œä¸¤è€…ä¹‹é—´æ—¢å­˜åœ¨åŒºåˆ«ä¹Ÿå­˜åœ¨è”ç³»ã€‚</p><p><strong>Spring Cloud æ˜¯åŸºäº Spring Boot å®ç°çš„</strong>ï¼Œå®ƒä¸èƒ½ç‹¬ç«‹åˆ›å»ºå·¥ç¨‹æˆ–æ¨¡å—ï¼Œæ›´ä¸èƒ½è„±ç¦» Spring Boot ç‹¬ç«‹è¿è¡Œã€‚</p><ol><li><strong>Spring Boot å’Œ Spring Cloud åˆ†å·¥ä¸åŒ</strong></li></ol><p>Spring Boot æ˜¯ä¸€ä¸ªåŸºäº Spring çš„å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…è¿…é€Ÿæ­ Web å·¥ç¨‹ã€‚åœ¨å¾®æœåŠ¡å¼€å‘ä¸­ï¼ŒSpring Boot ä¸“æ³¨äºå¿«é€Ÿã€æ–¹ä¾¿åœ°å¼€å‘å•ä¸ªå¾®æœåŠ¡ã€‚</p><p>Spring Cloud æ˜¯å¾®æœåŠ¡æ¶æ„ä¸‹çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚Spring Cloud ä¸“æ³¨äºå…¨å±€å¾®æœåŠ¡çš„åè°ƒå’Œæ²»ç†å·¥ä½œã€‚æ¢å¥è¯è¯´ï¼ŒSpring Cloud ç›¸å½“äºå¾®æœåŠ¡çš„å¤§ç®¡å®¶ï¼Œè´Ÿè´£å°† Spring Boot å¼€å‘çš„ä¸€ä¸ªä¸ªå¾®æœåŠ¡ç®¡ç†èµ·æ¥ï¼Œå¹¶ä¸ºå®ƒä»¬æä¾›é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€å¾®ä»£ç†ã€äº‹ä»¶æ€»çº¿ã€å†³ç­–ç«é€‰ä»¥åŠåˆ†å¸ƒå¼ä¼šè¯ç­‰æœåŠ¡ã€‚</p><ol start="2"><li><strong>Spring Cloud æ˜¯åŸºäº Spring Boot å®ç°çš„</strong></li></ol><p>Spring Cloud æ˜¯åŸºäº Spring Boot å®ç°çš„ã€‚ä¸ Spring Boot ç±»ä¼¼ï¼ŒSpring Cloud ä¹Ÿä¸ºæä¾›äº†ä¸€ç³»åˆ— Starterï¼Œè¿™äº› Starter æ˜¯ Spring Cloud ä½¿ç”¨ Spring Boot æ€æƒ³å¯¹å„ä¸ªå¾®æœåŠ¡æ¡†æ¶è¿›è¡Œå†å°è£…çš„äº§ç‰©ã€‚å®ƒä»¬å±è”½äº†è¿™äº›å¾®æœåŠ¡æ¡†æ¶ä¸­å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿå¿«é€Ÿã€æ–¹ä¾¿åœ°ä½¿ç”¨ Spring Cloud æ­å»ºä¸€å¥—åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿã€‚</p><ol start="3"><li><strong>Spring Boot å’Œ Spring Cloud ä¾èµ–é¡¹æ•°é‡ä¸åŒ</strong></li></ol><p>Spring Boot å±äºä¸€ç§è½»é‡çº§çš„æ¡†æ¶ï¼Œæ„å»º Spring Boot å·¥ç¨‹æ‰€éœ€çš„ä¾èµ–è¾ƒå°‘ã€‚</p><p>Spring Cloud æ˜¯ä¸€ç³»åˆ—å¾®æœåŠ¡æ¡†æ¶æŠ€æœ¯çš„é›†åˆä½“ï¼Œå®ƒçš„æ¯ä¸ªç»„ä»¶éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„ä¾èµ–é¡¹ï¼ˆStarter POMï¼‰ï¼Œå› æ­¤æƒ³è¦æ„å»ºä¸€å¥—å®Œæ•´çš„ Spring Cloud å·¥ç¨‹å¾€å¾€éœ€è¦å¤§é‡çš„ä¾èµ–é¡¹ã€‚</p><ol start="4"><li><strong>Spring Cloud ä¸èƒ½è„±ç¦» Spring Boot å•ç‹¬è¿è¡Œ</strong></li></ol><p>Spring Boot ä¸éœ€è¦ Spring Cloudï¼Œå°±èƒ½ç›´æ¥åˆ›å»ºå¯ç‹¬ç«‹è¿è¡Œçš„å·¥ç¨‹æˆ–æ¨¡å—ã€‚</p><blockquote><p>æ³¨æ„ï¼šè™½ç„¶ Spring Boot èƒ½å¤Ÿç”¨äºå¼€å‘å•ä¸ªå¾®æœåŠ¡ï¼Œä½†å®ƒå¹¶ä¸å…·å¤‡ç®¡ç†å’Œåè°ƒå¾®æœåŠ¡çš„èƒ½åŠ›ï¼Œå› æ­¤å®ƒåªèƒ½ç®—æ˜¯ä¸€ä¸ªå¾®æœåŠ¡å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œè€Œéå¾®æœåŠ¡æ¡†æ¶ã€‚</p></blockquote><h2 id="cloudç»„ä»¶å‡çº§" tabindex="-1"><a class="header-anchor" href="#cloudç»„ä»¶å‡çº§" aria-hidden="true">#</a> Cloudç»„ä»¶å‡çº§</h2><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221204114545590.png" alt="image-20221204114545590"></p><h2 id="å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º" tabindex="-1"><a class="header-anchor" href="#å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º" aria-hidden="true">#</a> å¾®æœåŠ¡æ¶æ„ç¼–ç æ„å»º</h2><p><strong>çº¦å®š &gt; é…ç½® &gt; ç¼–ç </strong></p><h3 id="çˆ¶å·¥ç¨‹projectæ­å»º" tabindex="-1"><a class="header-anchor" href="#çˆ¶å·¥ç¨‹projectæ­å»º" aria-hidden="true">#</a> çˆ¶å·¥ç¨‹Projectæ­å»º</h3><p><strong>Mavenæ¨¡æ¿å¼•ç”¨ä»¥åŠMavenç‰ˆæœ¬é€‰æ‹©</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221204122532043.png" alt="image-20221204122532043"></p><p>pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.eddie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring_Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--å…³è”æ¨¡å—--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment-8001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>cloud-consumer-order-80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- ç»Ÿä¸€ç®¡ç†jaråŒ…ç‰ˆæœ¬ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>junit.version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>junit.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log4j.version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log4j.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lombok.version</span><span class="token punctuation">&gt;</span></span>1.16.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lombok.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>8.0.30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>druid.version</span><span class="token punctuation">&gt;</span></span>1.1.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>druid.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mybatis.spring.boot.version</span><span class="token punctuation">&gt;</span></span>1.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mybatis.spring.boot.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- å­æ¨¡å—ç»§æ‰¿ä¹‹åï¼Œæä¾›ä½œç”¨ï¼šé”å®šç‰ˆæœ¬+å­moduleä¸ç”¨å†™groupIdå’Œversion  --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--spring boot 2.2.2--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--spring cloud Hoxton.SR1--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--spring cloud alibaba 2.1.0.RELEASE--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${mysql.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${druid.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${mybatis.spring.boot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${junit.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${log4j.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${lombok.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.4.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fork</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fork</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>addResources</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>addResources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¾®æœåŠ¡æ¨¡å—çš„æ„å»º" tabindex="-1"><a class="header-anchor" href="#å¾®æœåŠ¡æ¨¡å—çš„æ„å»º" aria-hidden="true">#</a> å¾®æœåŠ¡æ¨¡å—çš„æ„å»º</h3><p>1ï¼‰å»ºModule</p><p>2ï¼‰æ”¹pom</p><p>3ï¼‰å†™yml</p><p>4ï¼‰ä¸»å¯ç±»</p><p>5ï¼‰ä¸šåŠ¡ç±»</p><p>â€‹ 5.1 å»ºè¡¨SQL</p><p>â€‹ 5.2 domain</p><p>â€‹ 5.3 dao</p><p>â€‹ 5.4 service</p><p>â€‹ 5.5 controller</p><h3 id="æ”¯ä»˜æ¨¡å—æ„å»º" tabindex="-1"><a class="header-anchor" href="#æ”¯ä»˜æ¨¡å—æ„å»º" aria-hidden="true">#</a> æ”¯ä»˜æ¨¡å—æ„å»º</h3><h4 id="cloud-provider-payment-8001-æœåŠ¡æä¾›è€…" tabindex="-1"><a class="header-anchor" href="#cloud-provider-payment-8001-æœåŠ¡æä¾›è€…" aria-hidden="true">#</a> <strong>cloud-provider-payment-8001&lt;æœåŠ¡æä¾›è€…&gt;</strong></h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205103707947.png" alt="image-20221205103707947"></p><p>pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring_Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.eddie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-provider-payment-8001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--åŒ…å«äº†sleuth+zipkin--&gt;</span>
<span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token comment">&lt;!--eureka-client--&gt;</span>
<span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;dependency&gt;&amp;lt;!&amp;ndash; å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity &amp;ndash;&amp;gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;version&gt;${project.version}&lt;/version&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--jdbc--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span> <span class="token comment">#æœåŠ¡ç«¯å£å·</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service <span class="token comment">#æœåŠ¡åç§°</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver <span class="token comment"># mysqlé©±åŠ¨åŒ…</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/springcloud<span class="token punctuation">?</span>rewriteBatchedStatements=TRUE
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource <span class="token comment"># å½“å‰æ•°æ®æºæ“ä½œç±»å‹</span>


<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapperLocations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>com/eddie/springcloud/dao/<span class="token important">*.xml</span> <span class="token comment">#mapperæ˜ å°„çš„xmlçš„location</span>
  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.eddie.springcloud.domain    <span class="token comment"># æ‰€æœ‰Entityåˆ«åç±»æ‰€åœ¨åŒ…</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cloud-consumer-order-80-æœåŠ¡æ¶ˆè´¹è€…" tabindex="-1"><a class="header-anchor" href="#cloud-consumer-order-80-æœåŠ¡æ¶ˆè´¹è€…" aria-hidden="true">#</a> cloud-consumer-order-80&lt;æœåŠ¡æ¶ˆè´¹è€…&gt;</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205103728325.png" alt="image-20221205103728325"></p><p>pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring_Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.eddie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-consumer-order-80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--åŒ…å«äº†sleuth+zipkin--&gt;</span>
        <span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;--&gt;</span>
        <span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token comment">&lt;!--eureka-client--&gt;</span>
        <span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;--&gt;</span>
        <span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token comment">&lt;!--        &lt;dependency&gt;&amp;lt;!&amp;ndash; å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity &amp;ndash;&amp;gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;groupId&gt;com.atguigu.springcloud&lt;/groupId&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;artifactId&gt;cloud-api-commons&lt;/artifactId&gt;--&gt;</span>
        <span class="token comment">&lt;!--            &lt;version&gt;${project.version}&lt;/version&gt;--&gt;</span>
        <span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;version&gt;1.1.16&lt;/version&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token comment">&lt;!--mysql-connector-java--&gt;</span>
<span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;groupId&gt;mysql&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token comment">&lt;!--jdbc--&gt;</span>
<span class="token comment">&lt;!--        &lt;dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--        &lt;/dependency&gt;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é¡¹ç›®é‡æ„-æŠ½ç¦»å…¬å…±éƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®é‡æ„-æŠ½ç¦»å…¬å…±éƒ¨åˆ†" aria-hidden="true">#</a> é¡¹ç›®é‡æ„ æŠ½ç¦»å…¬å…±éƒ¨åˆ†</h4><p>cloud-api-commons&lt;å…¬å…±api&gt;</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205104301109.png" alt="image-20221205104301109"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205104350317.png" alt="image-20221205104350317"></p><p>pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring_Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.eddie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨cloud-api-commons&lt;å…¬å…±api&gt;</p><p>å¼•ç”¨ä¾èµ–å³å¯</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205104420674.png" alt="image-20221205104420674"></p><h4 id="å•æœºeurekaserver" tabindex="-1"><a class="header-anchor" href="#å•æœºeurekaserver" aria-hidden="true">#</a> å•æœºEurekaServer</h4><p><strong>APç†è®ºï¼ˆAvailability -- Partition Toleranceï¼‰æ³¨é‡å¯ç”¨æ€§</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205221754426.png" alt="image-20221205221754426"></p><p>pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring_Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.eddie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-eureka-server-7001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-server--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- å¼•å…¥è‡ªå·±å®šä¹‰çš„apié€šç”¨åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Paymentæ”¯ä»˜Entity --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.eddie<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--boot web actuator--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--ä¸€èˆ¬é€šç”¨é…ç½®--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7001</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7001.com <span class="token comment">#eurekaæœåŠ¡ç«¯çš„å®ä¾‹åç§°</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#falseè¡¨ç¤ºä¸å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±ã€‚</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#falseè¡¨ç¤ºè‡ªå·±ç«¯å°±æ˜¯æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘çš„èŒè´£å°±æ˜¯ç»´æŠ¤æœåŠ¡å®ä¾‹ï¼Œå¹¶ä¸éœ€è¦å»æ£€ç´¢æœåŠ¡</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">#å•æœºå°±æ˜¯7001è‡ªå·±</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>eddie<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaServer</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 <span class="token keyword">@author</span> EddieZhang
 @create 2022-12-05 11:52
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaMainBoot7001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaMainBoot7001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ”¯ä»˜çš„provderæœåŠ¡å’ŒconsumeræœåŠ¡æ³¨å†Œè¿›eurekaä¸­" tabindex="-1"><a class="header-anchor" href="#æ”¯ä»˜çš„provderæœåŠ¡å’ŒconsumeræœåŠ¡æ³¨å†Œè¿›eurekaä¸­" aria-hidden="true">#</a> æ”¯ä»˜çš„provderæœåŠ¡å’ŒconsumeræœåŠ¡æ³¨å†Œè¿›Eurekaä¸­</h4><p>provder</p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223100431.png" alt="image-20221205223100431"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223149125.png" alt="image-20221205223149125"></p><p>å¯åŠ¨ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>eddie<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 <span class="token keyword">@author</span> EddieZhang
 @create 2022-12-04 17:01
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMainBoot8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMainBoot8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>consumer</p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223323428.png" alt="image-20221205223323428"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223356074.png" alt="image-20221205223356074"></p><p>å¯åŠ¨ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>eddie<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 <span class="token keyword">@author</span> EddieZhang
 @create 2022-12-04 23:12
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMainBoot80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMainBoot80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>controller</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 <span class="token keyword">@author</span> EddieZhang
 @create 2022-12-04 23:02
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">PAYMENT_URL</span> <span class="token operator">=</span> <span class="token string">&quot;http://CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/add&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">addPayment</span><span class="token punctuation">(</span><span class="token class-name">Payment</span> payment<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForObject</span><span class="token punctuation">(</span><span class="token constant">PAYMENT_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/add&quot;</span><span class="token punctuation">,</span>payment<span class="token punctuation">,</span><span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token constant">PAYMENT_URL</span> <span class="token operator">+</span> <span class="token string">&quot;/payment/query/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span><span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é›†ç¾¤eurekaé…ç½®" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤eurekaé…ç½®" aria-hidden="true">#</a> é›†ç¾¤Eurekaé…ç½®</h4><p><strong>Eurekaé›†ç¾¤</strong></p><p>äº’ç›¸æ³¨å†Œ ç›¸äº’å®ˆæœ›</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223620601.png" alt="image-20221205223620601"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223655066.png" alt="image-20221205223655066"></p><p>åŸŸåæ˜ å°„</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223734475.png" alt="image-20221205223734475"></p><p>Eurekaç•Œé¢</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223805210.png" alt="image-20221205223805210"></p><p><strong>Provideré›†ç¾¤</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223916220.png" alt="image-20221205223916220"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205223953002.png" alt="image-20221205223953002"></p><h4 id="actuatorå¾®æœåŠ¡ä¿¡æ¯å®Œå–„" tabindex="-1"><a class="header-anchor" href="#actuatorå¾®æœåŠ¡ä¿¡æ¯å®Œå–„" aria-hidden="true">#</a> actuatorå¾®æœåŠ¡ä¿¡æ¯å®Œå–„</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205224409434.png" alt="image-20221205224409434"></p><h4 id="æœåŠ¡å‘ç°discovery" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å‘ç°discovery" aria-hidden="true">#</a> æœåŠ¡å‘ç°Discovery</h4><p><strong>æœåŠ¡åˆ—è¡¨</strong>ï¼Œè¯¥åˆ—è¡¨ä¸­åŒ…å«äº†æ‰€æœ‰æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ä¿¡æ¯ï¼ˆ<strong>åŒ…æ‹¬æœåŠ¡æä¾›è€…å’Œè‡ªèº«çš„ä¿¡æ¯</strong>ï¼‰</p><p>ä¸»å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205230229059.png" alt="image-20221205230229059"></p><p>Controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205230242828.png" alt="image-20221205230242828"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205230250322.png" alt="image-20221205230250322"></p><p>å“åº”ç»“æœ</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205230326441.png" alt="image-20221205230326441"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205230335515.png" alt="image-20221205230335515"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205230414402.png" alt="image-20221205230414402"></p><h4 id="eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" aria-hidden="true">#</a> Eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</h4><p>Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä¸€ç§åº”å¯¹ç½‘ç»œå¼‚å¸¸çš„å®‰å…¨ä¿æŠ¤æªæ–½ã€‚å®ƒçš„æ¶æ„å“²å­¦æ˜¯ï¼šå®å¯åŒæ—¶ä¿ç•™æ‰€æœ‰å¾®æœåŠ¡ï¼ˆå¥åº·çš„æœåŠ¡å’Œä¸å¥åº·çš„æœåŠ¡éƒ½ä¼šä¿ç•™ï¼‰ä¹Ÿä¸ç›²ç›®ç§»é™¤ä»»ä½•å¥åº·çš„æœåŠ¡ã€‚é€šè¿‡ Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¯ä»¥è®© Eureka Server é›†ç¾¤æ›´åŠ çš„å¥å£®ã€ç¨³å®šã€‚</p><blockquote><p>Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ä¹Ÿå­˜åœ¨å¼Šç«¯ã€‚å¦‚æœåœ¨ Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶è§¦å‘æœŸé—´ï¼ŒæœåŠ¡æä¾›è€…æä¾›çš„æœåŠ¡å‡ºç°é—®é¢˜ï¼Œé‚£ä¹ˆæœåŠ¡æ¶ˆè´¹è€…å°±å¾ˆå®¹æ˜“è·å–åˆ°å·²ç»ä¸å­˜åœ¨çš„æœåŠ¡è¿›è€Œå‡ºç°è°ƒç”¨å¤±è´¥çš„æƒ…å†µï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯çš„å®¹é”™æœºåˆ¶æ¥è§£å†³æ­¤é—®é¢˜ï¼Œè¯¦æƒ…è¯·å‚è€ƒ <a href="http://c.biancheng.net/springcloud/ribbon.html" target="_blank" rel="noopener noreferrer">Spring Cloud Netflix Ribbon<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="http://c.biancheng.net/springcloud/hystrix.html" target="_blank" rel="noopener noreferrer">Spring Cloud Netflix Hystrix<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒEureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯å¼€å¯çš„ï¼Œå¦‚æœæƒ³è¦å…³é—­ï¼Œåˆ™éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>çº¯æ–‡æœ¬å¤åˆ¶
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>  
	<span class="token key atrule">server</span><span class="token punctuation">:</span>    
		<span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># false å…³é—­ Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œé»˜è®¤æ˜¯å¼€å¯,ä¸€èˆ¬ä¸å»ºè®®å¤§å®¶ä¿®æ”¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205231938529.png" alt="image-20221205231938529"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205231947797.png" alt="image-20221205231947797"></p><h4 id="å•æœºzookeeper" tabindex="-1"><a class="header-anchor" href="#å•æœºzookeeper" aria-hidden="true">#</a> å•æœºZookeeper</h4><p><strong>CPç†è®ºï¼ˆConsistance -- Partition Toleranceï¼‰æ³¨é‡ä¸€è‡´æ€§</strong></p><p>å½“å‰æ³¨å†Œè¿›Zookeeperä¸Šçš„<strong>èŠ‚ç‚¹</strong>è¡¨ç¤º<strong>æ³¨å†Œçš„ä¸€ä¸ªæœåŠ¡</strong> å¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæœåŠ¡ï¼‰æ˜¯<strong>ä¸´æ—¶çš„</strong></p><p>å¯¹äºæ¯ä¸€ä¸ª<strong>èŠ‚ç‚¹ï¼ˆæœåŠ¡ï¼‰å‡ºç°å®•æœº</strong>å åœ¨è¿›è¡Œ<strong>å¿ƒè·³æ¢æµ‹</strong>æ—¶ï¼›ä¸€æ®µæ—¶é—´<strong>æœªå¾—åˆ°å“åº”</strong>çš„Zookeeperä¼šå°†<strong>æ­¤èŠ‚ç‚¹ç§»é™¤</strong></p><p><strong>ä¸´æ—¶èŠ‚ç‚¹</strong> - å®¢æˆ·ç«¯æ´»è·ƒæ—¶ï¼Œä¸´æ—¶èŠ‚ç‚¹å°±æ˜¯æœ‰æ•ˆçš„ã€‚å½“å®¢æˆ·ç«¯ä¸ZooKeeperé›†åˆæ–­å¼€è¿æ¥æ—¶ï¼Œä¸´æ—¶èŠ‚ç‚¹ä¼šè‡ªåŠ¨åˆ é™¤ã€‚å› æ­¤ï¼Œåªæœ‰ä¸´æ—¶èŠ‚ç‚¹ä¸å…è®¸æœ‰å­èŠ‚ç‚¹ã€‚å¦‚æœä¸´æ—¶èŠ‚ç‚¹è¢«åˆ é™¤ï¼Œåˆ™ä¸‹ä¸€ä¸ªåˆé€‚çš„èŠ‚ç‚¹å°†å¡«å……å…¶ä½ç½®ã€‚ä¸´æ—¶èŠ‚ç‚¹åœ¨leaderé€‰ä¸¾ä¸­èµ·ç€é‡è¦ä½œç”¨</p><p><strong>LinuxæœåŠ¡å™¨ä¸Šè¿è¡ŒZookeeper</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206152459583.png" alt="image-20221206152459583"></p><p><strong>provider</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206152553783.png" alt="image-20221206152553783"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206152609309.png" alt="image-20221206152609309"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206152639511.png" alt="image-20221206152639511"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206152654857.png" alt="image-20221206152654857"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206152721853.png" alt="image-20221206152721853"></p><p><strong>consumer</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206155217369.png" alt="image-20221206155217369"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206155237082.png" alt="image-20221206155237082"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206155253616.png" alt="image-20221206155253616"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206155304922.png" alt="image-20221206155304922"></p><p>configé…ç½®RestTemplate</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206155328478.png" alt="image-20221206155328478"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206155349851.png" alt="image-20221206155349851"></p><h4 id="å•æœºconsul" tabindex="-1"><a class="header-anchor" href="#å•æœºconsul" aria-hidden="true">#</a> å•æœºConsul</h4><p><strong>å¯¹äºæ¯ä¸€ä¸ªæœåŠ¡å‡ºç°å®•æœºå å¿ƒè·³æ£€æµ‹æœªå¾—åˆ°å›åº”çš„ä¼šç«‹å³Deregisteredï¼ˆç§»é™¤ï¼‰</strong></p><p><strong>CPç†è®ºï¼ˆConsistance -- Partition Toleranceï¼‰æ³¨é‡ä¸€è‡´æ€§</strong></p><p>LinuxæœåŠ¡ä¸­å¯åŠ¨Consul</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./consul agent -server -bootstrap-expect 1 -data-dir=/tmp/consul -node=n1 -bind=127.0.0.1 -client=0.0.0.0 -ui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204208024.png" alt="image-20221206204208024"></p><p><strong>Provideræ³¨å†Œè¿›Consul</strong></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204234155.png" alt="image-20221206204234155"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204251217.png" alt="image-20221206204251217"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204309368.png" alt="image-20221206204309368"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204324562.png" alt="image-20221206204324562"></p><p>Consulé¡µé¢</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204343300.png" alt="image-20221206204343300"></p><p>Consumeræ³¨å†Œè¿›Consul</p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204426304.png" alt="image-20221206204426304"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204438540.png" alt="image-20221206204438540"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204447414.png" alt="image-20221206204447414"></p><p>ApplicationContextConfigé…ç½®ç±»ä¸­æ³¨å…¥RestTemplate</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204513469.png" alt="image-20221206204513469"></p><p>Controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204541705.png" alt="image-20221206204541705"></p><p>Consulé¡µé¢</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206204557618.png" alt="image-20221206204557618"></p><h4 id="ribbon" tabindex="-1"><a class="header-anchor" href="#ribbon" aria-hidden="true">#</a> Ribbon</h4><p>Ribbon æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒå¯ä»¥ä¸ Eureka é…åˆä½¿ç”¨è½»æ¾åœ°å®ç°å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡ã€‚Ribbon ä¼šå…ˆä» Eureka Serverï¼ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰å»è·å–æœåŠ¡ç«¯åˆ—è¡¨ï¼Œç„¶åé€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥å°†è¯·æ±‚åˆ†æ‘Šç»™å¤šä¸ªæœåŠ¡ç«¯ï¼Œä»è€Œè¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208205810925.png" alt="image-20221208205810925"></p><p>spring-cloud-starter-netflix-eureka-clientå·²ç»å¼•å…¥äº†ribbonçš„ä¾èµ– å› æ­¤æ— éœ€å†æ¬¡æ˜¾ç¤ºçš„è¿›è¡Œå¼•å…¥</p><p><strong>Ribbon å¯ä»¥ä¸ RestTemplateï¼ˆRest æ¨¡æ¿ï¼‰é…åˆä½¿ç”¨ï¼Œä»¥å®ç°å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208221620218.png" alt="image-20221208221620218"></p><p><strong>@LoadBalanced</strong>æ³¨è§£ï¼ˆè¡¨ç¤ºé»˜è®¤çš„ä½¿ç”¨ribbonçš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆè½®è¯¢ï¼‰ï¼‰</p><h4 id="openfeign" tabindex="-1"><a class="header-anchor" href="#openfeign" aria-hidden="true">#</a> OpenFeign</h4><p><strong>OpenFeign å®ç°è¿œç¨‹æœåŠ¡è°ƒç”¨</strong> é›†æˆäº†ribbon ä½¿ç”¨é»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆè½®è¯¢ï¼‰</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101316353.png" alt="image-20221209101316353"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101327973.png" alt="image-20221209101327973"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101340279.png" alt="image-20221209101340279"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101354307.png" alt="image-20221209101354307"></p><p>OpenFeignæ¥å£</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101421437.png" alt="image-20221209101421437"></p><p>ä¸è°ƒç”¨çš„æœåŠ¡æä¾›è€…çš„æ–¹æ³•ç›¸åŒ¹é…</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101439034.png" alt="image-20221209101439034"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101537155.png" alt="image-20221209101537155"></p><h2 id="æœåŠ¡æ³¨å†Œä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡æ³¨å†Œä¸­å¿ƒ" aria-hidden="true">#</a> æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h2><h3 id="eureka" tabindex="-1"><a class="header-anchor" href="#eureka" aria-hidden="true">#</a> Eureka</h3><p>Eureka æ˜¯ Netflix å…¬å¸å¼€å‘çš„ä¸€æ¬¾å¼€æºçš„<strong>æœåŠ¡æ³¨å†Œ</strong>ä¸<strong>å‘ç°</strong>ç»„ä»¶</p><p>Spring Cloud Netflix Eureka---ä¸»è¦è´Ÿè´£ Spring Cloud çš„æœåŠ¡æ³¨å†Œä¸å‘ç°åŠŸèƒ½</p><p><strong>Eureka é‡‡ç”¨ CSï¼ˆClient/Serverï¼Œå®¢æˆ·ç«¯/æœåŠ¡å™¨ï¼‰ æ¶æ„</strong>ï¼Œå®ƒåŒ…æ‹¬ä»¥ä¸‹ä¸¤å¤§ç»„ä»¶ï¼š</p><ul><li><strong>Eureka Server</strong>ï¼šEureka æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œä¸»è¦ç”¨äºæä¾›æœåŠ¡æ³¨å†ŒåŠŸèƒ½ã€‚å½“å¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œä¼šå°†è‡ªå·±çš„æœåŠ¡æ³¨å†Œåˆ° Eureka Serverã€‚Eureka Server ç»´æŠ¤äº†ä¸€ä¸ªå¯ç”¨æœåŠ¡åˆ—è¡¨ï¼Œå­˜å‚¨äº†æ‰€æœ‰æ³¨å†Œåˆ° Eureka Server çš„å¯ç”¨æœåŠ¡çš„ä¿¡æ¯ï¼Œè¿™äº›å¯ç”¨æœåŠ¡å¯ä»¥åœ¨ Eureka Server çš„ç®¡ç†ç•Œé¢ä¸­ç›´è§‚çœ‹åˆ°ã€‚</li><li><strong>Eureka Client</strong>ï¼šEureka å®¢æˆ·ç«¯ï¼Œé€šå¸¸æŒ‡çš„æ˜¯å¾®æœåŠ¡ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡ï¼Œä¸»è¦ç”¨äºå’Œ Eureka Server è¿›è¡Œäº¤äº’ã€‚åœ¨å¾®æœåŠ¡åº”ç”¨å¯åŠ¨åï¼ŒEureka Client ä¼šå‘ Eureka Server <strong>å‘é€å¿ƒè·³ï¼ˆé»˜è®¤å‘¨æœŸä¸º 30 ç§’ï¼‰</strong>ã€‚è‹¥ Eureka Server åœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ª Eureka Client çš„å¿ƒè·³ï¼ŒEureka Server å°†å®ƒä»å¯ç”¨æœåŠ¡åˆ—è¡¨ä¸­<strong>ç§»é™¤ï¼ˆé»˜è®¤ 90 ç§’ï¼‰</strong>ã€‚</li></ul><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205232354112.png" alt="image-20221205232354112"></p><blockquote><p>æ³¨ï¼šâ€œ<strong>å¿ƒè·³</strong>â€æŒ‡çš„æ˜¯ä¸€æ®µå®šæ—¶å‘é€çš„è‡ªå®šä¹‰ä¿¡æ¯ï¼Œè®©å¯¹æ–¹çŸ¥é“è‡ªå·±â€œ<strong>å­˜æ´»</strong>â€ï¼Œä»¥ç¡®ä¿è¿æ¥çš„æœ‰æ•ˆæ€§ã€‚å¤§éƒ¨åˆ† CS æ¶æ„çš„åº”ç”¨ç¨‹åºéƒ½é‡‡ç”¨äº†å¿ƒè·³æœºåˆ¶ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½å¯ä»¥å‘å¿ƒè·³ã€‚é€šå¸¸æƒ…å†µä¸‹æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€å¿ƒè·³åŒ…ï¼ŒæœåŠ¡ç«¯ç”¨äºåˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦åœ¨çº¿ã€‚</p></blockquote><h4 id="eureka-å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŸç†" tabindex="-1"><a class="header-anchor" href="#eureka-å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŸç†" aria-hidden="true">#</a> <strong>Eureka å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŸç†</strong></h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205112432588.png" alt="image-20221205112432588"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205112158021.png" alt="image-20221205112158021"></p><p>Eureka å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ­å»ºä¸€ä¸ª Eureka Server ä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼›</li><li>æœåŠ¡æä¾›è€… Eureka Client å¯åŠ¨æ—¶ï¼Œä¼šæŠŠå½“å‰æœåŠ¡å™¨çš„ä¿¡æ¯ä»¥æœåŠ¡åï¼ˆspring.application.nameï¼‰çš„æ–¹å¼æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼›</li><li>æœåŠ¡æ¶ˆè´¹è€… Eureka Client å¯åŠ¨æ—¶ï¼Œä¹Ÿä¼šå‘æœåŠ¡æ³¨å†Œä¸­å¿ƒæ³¨å†Œï¼›</li><li>æœåŠ¡æ¶ˆè´¹è€…è¿˜ä¼šè·å–ä¸€ä»½å¯ç”¨æœåŠ¡åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨ä¸­åŒ…å«äº†æ‰€æœ‰æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ä¿¡æ¯ï¼ˆåŒ…æ‹¬æœåŠ¡æä¾›è€…å’Œè‡ªèº«çš„ä¿¡æ¯ï¼‰ï¼›</li><li>åœ¨è·å¾—äº†å¯ç”¨æœåŠ¡åˆ—è¡¨åï¼ŒæœåŠ¡æ¶ˆè´¹è€…é€šè¿‡ HTTP æˆ–æ¶ˆæ¯ä¸­é—´ä»¶è¿œç¨‹è°ƒç”¨æœåŠ¡æä¾›è€…æä¾›çš„æœåŠ¡ã€‚</li></ol><p>æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆEureka Serverï¼‰æ‰€æ‰®æ¼”çš„è§’è‰²ååˆ†é‡è¦ï¼Œå®ƒæ˜¯æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ä¹‹é—´çš„æ¡¥æ¢ã€‚æœåŠ¡æä¾›è€…åªæœ‰å°†è‡ªå·±çš„æœåŠ¡æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒæ‰å¯èƒ½è¢«æœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨ï¼Œè€ŒæœåŠ¡æ¶ˆè´¹è€…ä¹Ÿåªæœ‰é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–å¯ç”¨æœåŠ¡åˆ—è¡¨åï¼Œæ‰èƒ½è°ƒç”¨æ‰€éœ€çš„æœåŠ¡ã€‚</p><h4 id="eurekaå·¥ä½œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#eurekaå·¥ä½œæµç¨‹" aria-hidden="true">#</a> <strong>Eurekaå·¥ä½œæµç¨‹</strong></h4><h4 id="eurekaå•æœº-é›†ç¾¤æ­å»º" tabindex="-1"><a class="header-anchor" href="#eurekaå•æœº-é›†ç¾¤æ­å»º" aria-hidden="true">#</a> <strong>Eurekaå•æœº/é›†ç¾¤æ­å»º</strong></h4><h4 id="æœåŠ¡å‘ç°discovery-1" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å‘ç°discovery-1" aria-hidden="true">#</a> <strong>æœåŠ¡å‘ç°Discovery</strong></h4><h4 id="eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶-1" tabindex="-1"><a class="header-anchor" href="#eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶-1" aria-hidden="true">#</a> <strong>Eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</strong></h4><p>æ‰€è°“ â€œEureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶â€ï¼Œå…¶ä¸­å¿ƒæ€æƒ³å°±æ˜¯â€œ<strong>å¥½æ­»ä¸å¦‚èµ–æ´»ç€</strong>â€</p><p>åœ¨å®é™…çš„åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿä¸­ï¼Œå¥åº·çš„æœåŠ¡ï¼ˆEureka Clientï¼‰ä¹Ÿæœ‰å¯èƒ½ä¼šç”±äºç½‘ç»œæ•…éšœï¼ˆä¾‹å¦‚ç½‘ç»œå»¶è¿Ÿã€å¡é¡¿ã€æ‹¥æŒ¤ç­‰åŸå› ï¼‰è€Œæ— æ³•ä¸ Eureka Server æ­£å¸¸é€šè®¯ã€‚è‹¥æ­¤æ—¶ Eureka Server å› ä¸ºæ²¡æœ‰æ¥æ”¶å¿ƒè·³è€Œè¯¯å°†å¥åº·çš„æœåŠ¡ä»æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„</p><p>Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä¸€ç§åº”å¯¹ç½‘ç»œå¼‚å¸¸çš„å®‰å…¨ä¿æŠ¤æªæ–½ã€‚å®ƒçš„æ¶æ„å“²å­¦æ˜¯ï¼š<strong>å®å¯åŒæ—¶ä¿ç•™æ‰€æœ‰å¾®æœåŠ¡</strong>ï¼ˆå¥åº·çš„æœåŠ¡å’Œä¸å¥åº·çš„æœåŠ¡éƒ½ä¼šä¿ç•™ï¼‰<strong>ä¹Ÿä¸ç›²ç›®ç§»é™¤</strong>ä»»ä½•å¥åº·çš„æœåŠ¡ã€‚é€šè¿‡ Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¯ä»¥è®© Eureka Server é›†ç¾¤æ›´åŠ çš„å¥å£®ã€ç¨³å®šã€‚</p><blockquote><p>Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ä¹Ÿå­˜åœ¨å¼Šç«¯ã€‚å¦‚æœåœ¨ Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶è§¦å‘æœŸé—´ï¼ŒæœåŠ¡æä¾›è€…æä¾›çš„æœåŠ¡å‡ºç°é—®é¢˜ï¼Œé‚£ä¹ˆæœåŠ¡æ¶ˆè´¹è€…å°±å¾ˆå®¹æ˜“è·å–åˆ°å·²ç»ä¸å­˜åœ¨çš„æœåŠ¡è¿›è€Œå‡ºç°è°ƒç”¨å¤±è´¥çš„æƒ…å†µï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯çš„å®¹é”™æœºåˆ¶æ¥è§£å†³æ­¤é—®é¢˜ï¼Œè¯¦æƒ…è¯·å‚è€ƒ <a href="http://c.biancheng.net/springcloud/ribbon.html" target="_blank" rel="noopener noreferrer">Spring Cloud Netflix Ribbon<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="http://c.biancheng.net/springcloud/hystrix.html" target="_blank" rel="noopener noreferrer">Spring Cloud Netflix Hystrix<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒEureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯å¼€å¯çš„ï¼Œå¦‚æœæƒ³è¦å…³é—­ï¼Œåˆ™éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>çº¯æ–‡æœ¬å¤åˆ¶
eureka:  server:    enable-self-preservation: false # false å…³é—­ Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œé»˜è®¤æ˜¯å¼€å¯,ä¸€èˆ¬ä¸å»ºè®®å¤§å®¶ä¿®æ”¹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é»˜è®¤å¼€å¯è‡ªæˆ‘ä¿æŠ¤ å¯ä»¥é…ç½®å…³é—­</strong></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒEureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯å¼€å¯çš„ï¼Œå¦‚æœæƒ³è¦å…³é—­ï¼Œåˆ™éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>çº¯æ–‡æœ¬å¤åˆ¶
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>  
	<span class="token key atrule">server</span><span class="token punctuation">:</span>    
	<span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># false å…³é—­ Eureka çš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œé»˜è®¤æ˜¯å¼€å¯,ä¸€èˆ¬ä¸å»ºè®®å¤§å®¶ä¿®æ”¹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205231927825.png" alt="image-20221205231927825"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221205231915856.png" alt="image-20221205231915856"></p><h3 id="zookeeper" tabindex="-1"><a class="header-anchor" href="#zookeeper" aria-hidden="true">#</a> Zookeeper</h3><p><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener noreferrer">Apache ZooKeeper<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä»£æ›¿Eurekaä½œä¸ºæ³¨å†Œä¸­å¿ƒ</p><h3 id="consul" tabindex="-1"><a class="header-anchor" href="#consul" aria-hidden="true">#</a> Consul</h3><p><a href="https://www.consul.io/" target="_blank" rel="noopener noreferrer">Consul by HashiCorp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>ä¸‹è½½å®‰è£…</strong></p><p>å®˜ç½‘åœ°å€:https://www.consul.io/</p><p>Linuxä¸­ä¸‹è½½å®‰è£…</p><p>è¿›å…¥è¦æŒ‰ç…§åˆ°çš„ç›®å½• ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„å‹ç¼©åŒ…</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wget https://releases.hashicorp.com/consul/1.7.2/consul_1.7.2_linux_amd64.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è§£å‹</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>unzip  consul_1.7.2_linux_amd64.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206205854291.png" alt="image-20221206205854291"></p><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./consul
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206205928544.png" alt="image-20221206205928544"></p><p>å¯åŠ¨ï¼ˆé»˜è®¤æ˜¯8500ç«¯å£ï¼‰</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./consul agent -server -bootstrap-expect 1 -data-dir=/tmp/consul -node=n1 -bind=127.0.0.1 -client=0.0.0.0 -ui

-server è¡¨ç¤ºæ˜¯serveræ¨¡å¼
ã€€ã€€-bootstrap-expect=3 è¡¨ç¤ºæ˜¯é›†ç¾¤ä¸­æœ‰3å°æœåŠ¡å™¨ bootstrapè¯¥æ¨¡å¼nodeå¯ä»¥æŒ‡å®šè‡ªå·±ä½œä¸ºleader ï¼Œå¦‚æœæ˜¯éleaderå¯ä¸åŠ è¯¥å‚æ•°
ã€€ã€€-data-dir=/tmp/consul ç›®å½•
ã€€ã€€-node=n2 è¯¥æœåŠ¡å™¨èŠ‚ç‚¹å
ã€€ã€€-bind=127.0.0.1 èŠ‚ç‚¹ç»‘å®šçš„ip
ã€€ã€€-ui éå¿…é¡» webuiçš„è·¯å¾„ ç”¨webæ¥ç®¡ç†consul
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206210053767.png" alt="image-20221206210053767"></p><p>Consulå›¾å½¢åŒ–ç•Œé¢</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206210140446.png" alt="image-20221206210140446"></p><h3 id="ä¸‰è€…æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#ä¸‰è€…æ¯”è¾ƒ" aria-hidden="true">#</a> ä¸‰è€…æ¯”è¾ƒ</h3><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221206210322651.png" alt="image-20221206210322651"></p><h2 id="è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨" aria-hidden="true">#</a> è´Ÿè½½å‡è¡¡æœåŠ¡è°ƒç”¨</h2><h3 id="ribbon-1" tabindex="-1"><a class="header-anchor" href="#ribbon-1" aria-hidden="true">#</a> Ribbon</h3><p><strong>Ribbon</strong> å°±æ˜¯ä¸€ä¸ª<strong>åŸºäº HTTP å’Œ TCP çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å™¨</strong>ï¼Œå½“æˆ‘ä»¬å°† <strong>Ribbon å’Œ Eureka ä¸€èµ·ä½¿ç”¨</strong>æ—¶ï¼ŒRibbon ä¼š<strong>ä» Eureka Serverï¼ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰ä¸­è·å–æœåŠ¡ç«¯åˆ—è¡¨</strong>ï¼Œç„¶å<strong>é€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥</strong>å°†<strong>è¯·æ±‚åˆ†æ‘Šç»™å¤šä¸ªæœåŠ¡æä¾›è€…</strong>ï¼Œä»è€Œè¾¾åˆ°<strong>è´Ÿè½½å‡è¡¡</strong>çš„ç›®çš„</p><p><strong>Spring Cloud Ribbon</strong> æ˜¯ä¸€å¥—åŸºäº Netflix Ribbon å®ç°çš„<strong>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡è°ƒç”¨å·¥å…·</strong></p><p>Spring Cloud <strong>å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨</strong>ï¼Œ<strong>API ç½‘å…³çš„è¯·æ±‚è½¬å‘</strong>ç­‰å†…å®¹ï¼Œå®é™…ä¸Šéƒ½æ˜¯é€šè¿‡ Spring Cloud Ribbon æ¥å®ç°çš„ï¼ŒåŒ…æ‹¬åç»­æˆ‘ä»¬è¦ä»‹ç»çš„ <a href="http://c.biancheng.net/springcloud/open-feign.html" target="_blank" rel="noopener noreferrer">OpenFeign<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¹Ÿæ˜¯åŸºäºå®ƒå®ç°çš„</p><p>åœ¨ä»»ä½•ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œ<strong>è´Ÿè½½å‡è¡¡</strong>éƒ½æ˜¯ä¸€ä¸ªååˆ†é‡è¦ä¸”ä¸å¾—ä¸å»å®æ–½çš„å†…å®¹ï¼Œå®ƒæ˜¯ç³»ç»Ÿå¤„ç†<strong>é«˜å¹¶å‘</strong>ã€<strong>ç¼“è§£ç½‘ç»œå‹åŠ›</strong>å’Œ<strong>æœåŠ¡ç«¯æ‰©å®¹</strong>çš„é‡è¦æ‰‹æ®µä¹‹ä¸€ã€‚</p><p>è´Ÿè½½å‡è¡¡ï¼ˆLoad Balanceï¼‰ ï¼Œç®€å•ç‚¹è¯´å°±æ˜¯å°†ç”¨æˆ·çš„<strong>è¯·æ±‚å¹³æ‘Šåˆ†é…åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œ</strong>ï¼Œä»¥è¾¾åˆ°<strong>æ‰©å±•æœåŠ¡å™¨å¸¦å®½</strong>ã€<strong>å¢å¼ºæ•°æ®å¤„ç†èƒ½åŠ›</strong>ã€<strong>å¢åŠ ååé‡</strong>ã€<strong>æé«˜ç½‘ç»œçš„å¯ç”¨æ€§å’Œçµæ´»æ€§</strong>çš„ç›®çš„</p><h3 id="è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> è´Ÿè½½å‡è¡¡</h3><ul><li><h4 id="æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡</h4></li></ul><p>å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œè¯¥è¯·æ±‚ä¸ä¼šç›´æ¥å‘é€åˆ°æœåŠ¡ç«¯è¿›è¡Œå¤„ç†ï¼Œè€Œæ˜¯å…¨éƒ¨äº¤ç»™è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œç”±è´Ÿè½½å‡è¡¡æœåŠ¡å™¨æŒ‰ç…§æŸç§ç®—æ³•ï¼ˆä¾‹å¦‚è½®è¯¢ã€éšæœºç­‰ï¼‰ï¼Œä»å…¶ç»´æŠ¤çš„å¯ç”¨æœåŠ¡æ¸…å•ä¸­é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œç„¶åè¿›è¡Œè½¬å‘ã€‚</p><p>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>éœ€è¦å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚</li><li>è´Ÿè½½å‡è¡¡æ˜¯åœ¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚åè¿›è¡Œçš„ï¼Œå› æ­¤å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªæœåŠ¡ç«¯æä¾›çš„æœåŠ¡ã€‚</li><li>å¯ç”¨æœåŠ¡ç«¯æ¸…å•å­˜å‚¨åœ¨è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸Šã€‚</li></ul><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208083420713.png" alt="image-20221208083420713"></p><ul><li><h4 id="å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</h4></li></ul><p>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡æ˜¯å°†<strong>è´Ÿè½½å‡è¡¡é€»è¾‘ä»¥ä»£ç çš„å½¢å¼å°è£…åˆ°å®¢æˆ·ç«¯</strong>ä¸Šï¼Œå³<strong>è´Ÿè½½å‡è¡¡å™¨ä½äºå®¢æˆ·ç«¯</strong>ã€‚å®¢æˆ·ç«¯<strong>é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒ</strong>ï¼ˆä¾‹å¦‚ Eureka Serverï¼‰<strong>è·å–åˆ°ä¸€ä»½æœåŠ¡ç«¯æä¾›çš„å¯ç”¨æœåŠ¡æ¸…å•</strong>ã€‚æœ‰äº†æœåŠ¡æ¸…å•åï¼Œè´Ÿè½½å‡è¡¡å™¨ä¼šåœ¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚å‰<strong>é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•</strong>é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯å®ä¾‹å†è¿›è¡Œè®¿é—®ï¼Œä»¥è¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„ï¼›</p><p>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ä¹Ÿéœ€è¦å¿ƒè·³æœºåˆ¶å»ç»´æŠ¤æœåŠ¡ç«¯æ¸…å•çš„æœ‰æ•ˆæ€§ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦é…åˆæœåŠ¡æ³¨å†Œä¸­å¿ƒä¸€èµ·å®Œæˆã€‚</p><p>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>è´Ÿè½½å‡è¡¡å™¨ä½äºå®¢æˆ·ç«¯ï¼Œä¸éœ€è¦å•ç‹¬æ­å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚</li><li>è´Ÿè½½å‡è¡¡æ˜¯åœ¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚å‰è¿›è¡Œçš„ï¼Œå› æ­¤å®¢æˆ·ç«¯æ¸…æ¥šåœ°çŸ¥é“æ˜¯å“ªä¸ªæœåŠ¡ç«¯æä¾›çš„æœåŠ¡ã€‚</li><li>å®¢æˆ·ç«¯éƒ½ç»´æŠ¤äº†ä¸€ä»½å¯ç”¨æœåŠ¡æ¸…å•ï¼Œè€Œè¿™ä»½æ¸…å•éƒ½æ˜¯ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–çš„ã€‚</li></ul><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208083633003.png" alt="image-20221208083633003"></p><ul><li><h4 id="æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡-vs-å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡-vs-å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡ VS å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</h4></li></ul><table><thead><tr><th>ä¸åŒç‚¹</th><th>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡</th><th>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</th></tr></thead><tbody><tr><td>æ˜¯å¦éœ€è¦å»ºç«‹è´Ÿè½½å‡è¡¡æœåŠ¡å™¨</td><td>éœ€è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚</td><td>å°†è´Ÿè½½å‡è¡¡çš„é€»è¾‘ä»¥ä»£ç çš„å½¢å¼å°è£…åˆ°å®¢æˆ·ç«¯ä¸Šï¼Œå› æ­¤ä¸éœ€è¦å•ç‹¬å»ºç«‹è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ã€‚</td></tr><tr><td>æ˜¯å¦éœ€è¦æœåŠ¡æ³¨å†Œä¸­å¿ƒ</td><td>ä¸éœ€è¦æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚</td><td>éœ€è¦æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚ åœ¨å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ä¸­ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦å°†å…¶æä¾›çš„æœåŠ¡æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒä¸Šã€‚</td></tr><tr><td>å¯ç”¨æœåŠ¡æ¸…å•å­˜å‚¨çš„ä½ç½®</td><td>å¯ç”¨æœåŠ¡æ¸…å•å­˜å‚¨åœ¨ä½äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸Šã€‚</td><td>æ‰€æœ‰çš„å®¢æˆ·ç«¯éƒ½ç»´æŠ¤äº†ä¸€ä»½å¯ç”¨æœåŠ¡æ¸…å•ï¼Œè¿™äº›æ¸…å•éƒ½æ˜¯ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–çš„ã€‚</td></tr><tr><td>è´Ÿè½½å‡è¡¡çš„æ—¶æœº</td><td>å…ˆå°†è¯·æ±‚å‘é€åˆ°è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œç„¶åç”±è´Ÿè½½å‡è¡¡æœåŠ¡å™¨é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåœ¨å¤šä¸ªæœåŠ¡ç«¯ä¹‹é—´é€‰æ‹©ä¸€ä¸ªè¿›è¡Œè®¿é—®ï¼›å³åœ¨æœåŠ¡å™¨ç«¯å†è¿›è¡Œè´Ÿè½½å‡è¡¡ç®—æ³•åˆ†é…ã€‚ ç®€å•ç‚¹è¯´å°±æ˜¯ï¼Œå…ˆå‘é€è¯·æ±‚ï¼Œå†è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</td><td>åœ¨å‘é€è¯·æ±‚å‰ï¼Œç”±ä½äºå®¢æˆ·ç«¯çš„æœåŠ¡è´Ÿè½½å‡è¡¡å™¨ï¼ˆä¾‹å¦‚ Ribbonï¼‰é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•é€‰æ‹©ä¸€ä¸ªæœåŠ¡å™¨ï¼Œç„¶åè¿›è¡Œè®¿é—®ã€‚ ç®€å•ç‚¹è¯´å°±æ˜¯ï¼Œå…ˆè¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå†å‘é€è¯·æ±‚ã€‚</td></tr><tr><td>å®¢æˆ·ç«¯æ˜¯å¦äº†è§£æœåŠ¡æä¾›æ–¹ä¿¡æ¯</td><td>ç”±äºè´Ÿè½½å‡è¡¡æ˜¯åœ¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚åè¿›è¡Œçš„ï¼Œå› æ­¤å®¢æˆ·ç«¯å¹¶ä¸çŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªæœåŠ¡ç«¯æä¾›çš„æœåŠ¡ã€‚</td><td>è´Ÿè½½å‡è¡¡æ˜¯åœ¨å®¢æˆ·ç«¯å‘é€è¯·æ±‚å‰è¿›è¡Œçš„ï¼Œå› æ­¤å®¢æˆ·ç«¯æ¸…æ¥šçš„çŸ¥é“æ˜¯å“ªä¸ªæœåŠ¡ç«¯æä¾›çš„æœåŠ¡ã€‚</td></tr></tbody></table><h3 id="ribbon-å®ç°æœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#ribbon-å®ç°æœåŠ¡è°ƒç”¨" aria-hidden="true">#</a> Ribbon å®ç°æœåŠ¡è°ƒç”¨</h3><p>Ribbon æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒå¯ä»¥ä¸ Eureka é…åˆä½¿ç”¨è½»æ¾åœ°å®ç°å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡ã€‚Ribbon ä¼šå…ˆä» Eureka Serverï¼ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰å»è·å–æœåŠ¡ç«¯åˆ—è¡¨ï¼Œç„¶åé€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥å°†è¯·æ±‚åˆ†æ‘Šç»™å¤šä¸ªæœåŠ¡ç«¯ï¼Œä»è€Œè¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208205810925.png" alt="image-20221208205810925"></p><p>spring-cloud-starter-netflix-eureka-clientå·²ç»å¼•å…¥äº†ribbonçš„ä¾èµ– å› æ­¤æ— éœ€å†æ¬¡æ˜¾ç¤ºçš„è¿›è¡Œå¼•å…¥</p><p><strong>Ribbon å¯ä»¥ä¸ RestTemplateï¼ˆRest æ¨¡æ¿ï¼‰é…åˆä½¿ç”¨ï¼Œä»¥å®ç°å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208221620218.png" alt="image-20221208221620218"></p><p><strong>@LoadBalanced</strong>æ³¨è§£ï¼ˆè¡¨ç¤ºé»˜è®¤çš„ä½¿ç”¨ribbonçš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆè½®è¯¢ï¼‰ï¼‰</p><h3 id="ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥" aria-hidden="true">#</a> Ribboné»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p>Spring Cloud Ribbon æä¾›äº†ä¸€ä¸ª <strong>IRule æ¥å£</strong>ï¼Œè¯¥æ¥å£ä¸»è¦ç”¨æ¥å®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå®ƒæœ‰ 7 ä¸ªé»˜è®¤å®ç°ç±»ï¼Œ<strong>æ¯ä¸€ä¸ªå®ç°ç±»éƒ½æ˜¯ä¸€ç§è´Ÿè½½å‡è¡¡ç­–ç•¥</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208222141191.png" alt="image-20221208222141191"></p><table><thead><tr><th>åºå·</th><th>å®ç°ç±»</th><th>è´Ÿè½½å‡è¡¡ç­–ç•¥</th></tr></thead><tbody><tr><td>1</td><td>RoundRobinRule</td><td>æŒ‰ç…§çº¿æ€§è½®è¯¢ç­–ç•¥ï¼Œå³æŒ‰ç…§ä¸€å®šçš„é¡ºåºä¾æ¬¡é€‰å–æœåŠ¡å®ä¾‹</td></tr><tr><td>2</td><td>RandomRule</td><td>éšæœºé€‰å–ä¸€ä¸ªæœåŠ¡å®ä¾‹</td></tr><tr><td>3</td><td>RetryRule</td><td>æŒ‰ç…§ RoundRobinRuleï¼ˆè½®è¯¢ï¼‰çš„ç­–ç•¥æ¥è·å–æœåŠ¡ï¼Œå¦‚æœè·å–çš„æœåŠ¡å®ä¾‹ä¸º null æˆ–å·²ç»å¤±æ•ˆï¼Œåˆ™åœ¨æŒ‡å®šçš„æ—¶é—´ä¹‹å†…ä¸æ–­åœ°è¿›è¡Œé‡è¯•ï¼ˆé‡è¯•æ—¶è·å–æœåŠ¡çš„ç­–ç•¥è¿˜æ˜¯ RoundRobinRule ä¸­å®šä¹‰çš„ç­–ç•¥ï¼‰ï¼Œå¦‚æœè¶…è¿‡æŒ‡å®šæ—¶é—´ä¾ç„¶æ²¡è·å–åˆ°æœåŠ¡å®ä¾‹åˆ™è¿”å› null ã€‚</td></tr><tr><td>4</td><td>WeightedResponseTimeRule</td><td>WeightedResponseTimeRule æ˜¯ RoundRobinRule çš„ä¸€ä¸ªå­ç±»ï¼Œå®ƒå¯¹ RoundRobinRule çš„åŠŸèƒ½è¿›è¡Œäº†æ‰©å±•ã€‚ æ ¹æ®å¹³å‡å“åº”æ—¶é—´ï¼Œæ¥è®¡ç®—æ‰€æœ‰æœåŠ¡å®ä¾‹çš„æƒé‡ï¼Œå“åº”æ—¶é—´è¶ŠçŸ­çš„æœåŠ¡å®ä¾‹æƒé‡è¶Šé«˜ï¼Œè¢«é€‰ä¸­çš„æ¦‚ç‡è¶Šå¤§ã€‚åˆšå¯åŠ¨æ—¶ï¼Œå¦‚æœç»Ÿè®¡ä¿¡æ¯ä¸è¶³ï¼Œåˆ™ä½¿ç”¨çº¿æ€§è½®è¯¢ç­–ç•¥ï¼Œç­‰ä¿¡æ¯è¶³å¤Ÿæ—¶ï¼Œå†åˆ‡æ¢åˆ° WeightedResponseTimeRuleã€‚</td></tr><tr><td>5</td><td>BestAvailableRule</td><td>ç»§æ‰¿è‡ª ClientConfigEnabledRoundRobinRuleã€‚å…ˆè¿‡æ»¤ç‚¹æ•…éšœæˆ–å¤±æ•ˆçš„æœåŠ¡å®ä¾‹ï¼Œç„¶åå†é€‰æ‹©å¹¶å‘é‡æœ€å°çš„æœåŠ¡å®ä¾‹ã€‚</td></tr><tr><td>6</td><td>AvailabilityFilteringRule</td><td>å…ˆè¿‡æ»¤æ‰æ•…éšœæˆ–å¤±æ•ˆçš„æœåŠ¡å®ä¾‹ï¼Œç„¶åå†é€‰æ‹©å¹¶å‘é‡è¾ƒå°çš„æœåŠ¡å®ä¾‹ã€‚</td></tr><tr><td>7</td><td>ZoneAvoidanceRule</td><td>é»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œç»¼åˆåˆ¤æ–­æœåŠ¡æ‰€åœ¨åŒºåŸŸï¼ˆzoneï¼‰çš„æ€§èƒ½å’ŒæœåŠ¡ï¼ˆserverï¼‰çš„å¯ç”¨æ€§ï¼Œæ¥é€‰æ‹©æœåŠ¡å®ä¾‹ã€‚åœ¨æ²¡æœ‰åŒºåŸŸçš„ç¯å¢ƒä¸‹ï¼Œè¯¥ç­–ç•¥ä¸è½®è¯¢ï¼ˆRandomRuleï¼‰ç­–ç•¥ç±»ä¼¼ã€‚</td></tr></tbody></table><h3 id="åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥" aria-hidden="true">#</a> åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p>åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥çš„æ–¹æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦<strong>åœ¨æœåŠ¡æ¶ˆè´¹è€…ï¼ˆå®¢æˆ·ç«¯ï¼‰çš„é…ç½®ç±»ä¸­</strong>ï¼Œ<strong>å°† IRule çš„å…¶ä»–å®ç°ç±»æ³¨å…¥åˆ°å®¹å™¨ä¸­</strong>å³å¯ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221208222522434.png" alt="image-20221208222522434"></p><h3 id="å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥" aria-hidden="true">#</a> å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p><strong>å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥ç±» extends AbstractLoadBalancerRule</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
* å®šåˆ¶ Ribbon è´Ÿè½½å‡è¡¡ç­–ç•¥
*/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRandomRule</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractLoadBalancerRule</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token comment">// æ€»å…±è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œç›®å‰è¦æ±‚æ¯å°è¢«è°ƒç”¨5æ¬¡</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// å½“å‰æä¾›æœåŠ¡çš„æœºå™¨å·</span>
    <span class="token keyword">public</span> <span class="token class-name">Server</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token class-name">ILoadBalancer</span> lb<span class="token punctuation">,</span> <span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>lb <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Server</span> server <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>server <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//è·å–æ‰€æœ‰æœ‰æ•ˆçš„æœåŠ¡å®ä¾‹åˆ—è¡¨</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span><span class="token punctuation">&gt;</span></span> upList <span class="token operator">=</span> lb<span class="token punctuation">.</span><span class="token function">getReachableServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è·å–æ‰€æœ‰çš„æœåŠ¡å®ä¾‹çš„åˆ—è¡¨</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span><span class="token punctuation">&gt;</span></span> allList <span class="token operator">=</span> lb<span class="token punctuation">.</span><span class="token function">getAllServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//å¦‚æœæ²¡æœ‰ä»»ä½•çš„æœåŠ¡å®ä¾‹åˆ™è¿”å› null</span>
            <span class="token keyword">int</span> serverCount <span class="token operator">=</span> allList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>serverCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//ä¸éšæœºç­–ç•¥ç›¸ä¼¼ï¼Œä½†æ¯ä¸ªæœåŠ¡å®ä¾‹åªæœ‰åœ¨è°ƒç”¨ 3 æ¬¡ä¹‹åï¼Œæ‰ä¼šè°ƒç”¨å…¶ä»–çš„æœåŠ¡å®ä¾‹</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>total <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                server <span class="token operator">=</span> upList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>currentIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                total<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                currentIndex<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&gt;=</span> upList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>server <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>server<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            server <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> server<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Server</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token function">getLoadBalancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initWithNiwsConfig</span><span class="token punctuation">(</span><span class="token class-name">IClientConfig</span> clientConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// TODO Auto-generated method stub</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åœ¨å¯åŠ¨ç±»å¤–çš„åŒ…ä¸‹(åŒ…æ‰«æç­–ç•¥ä¹‹å¤–çš„åŒ…ä¸‹)å®šåˆ¶Ribbonè´Ÿè½½å‡è¡¡ç­–ç•¥çš„é…ç½®ç±»</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
* å®šåˆ¶ Ribbon è´Ÿè½½å‡è¡¡ç­–ç•¥çš„é…ç½®ç±»
* è¯¥è‡ªå®šä¹‰ Ribbon è´Ÿè½½å‡è¡¡ç­–ç•¥é…ç½®ç±» ä¸èƒ½åœ¨å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ä¸‹
* å¦åˆ™æ‰€æœ‰çš„ Ribbon å®¢æˆ·ç«¯éƒ½ä¼šé‡‡ç”¨è¯¥ç­–ç•¥ï¼Œæ— æ³•è¾¾åˆ°ç‰¹æ®ŠåŒ–å®šåˆ¶çš„ç›®çš„
*/</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySelfRibbonRuleConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">IRule</span> <span class="token function">myRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è‡ªå®šä¹‰ Ribbon è´Ÿè½½å‡è¡¡ç­–ç•¥</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyRandomRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è‡ªå®šä¹‰ï¼Œéšæœºé€‰æ‹©æŸä¸€ä¸ªå¾®æœåŠ¡ï¼Œæ‰§è¡Œäº”æ¬¡</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯åŠ¨ç±»ä¸Šæ·»åŠ @RibbonClientæ³¨è§£ å¹¶æŒ‡å®šæœåŠ¡name ä»¥åŠå®šåˆ¶çš„è´Ÿè½½å‡è¡¡é…ç½®ç±»ç±»å‹</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token comment">//è‡ªå®šä¹‰ Ribbon è´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨ä¸»å¯åŠ¨ç±»ä¸Šä½¿ç”¨ RibbonClient æ³¨è§£ï¼Œåœ¨è¯¥å¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œå°±èƒ½è‡ªåŠ¨å»åŠ è½½æˆ‘ä»¬è‡ªå®šä¹‰çš„ Ribbon é…ç½®ç±»ï¼Œä»è€Œæ˜¯é…ç½®ç”Ÿæ•ˆ</span>
<span class="token comment">// name ä¸ºéœ€è¦å®šåˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥çš„å¾®æœåŠ¡åç§°ï¼ˆapplication nameï¼‰</span>
<span class="token comment">// configuration ä¸ºå®šåˆ¶çš„è´Ÿè½½å‡è¡¡ç­–ç•¥çš„é…ç½®ç±»ï¼Œ</span>
<span class="token comment">// ä¸”å®˜æ–¹æ–‡æ¡£ä¸­æ˜ç¡®æå‡ºï¼Œè¯¥é…ç½®ç±»ä¸èƒ½åœ¨ ComponentScan æ³¨è§£ï¼ˆSpringBootApplication æ³¨è§£ä¸­åŒ…å«äº†è¯¥æ³¨è§£ï¼‰ä¸‹çš„åŒ…æˆ–å…¶å­åŒ…ä¸­ï¼Œå³è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡é…ç½®ç±»ä¸èƒ½åœ¨å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ä¸‹</span>
<span class="token annotation punctuation">@RibbonClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;æœåŠ¡name&quot;</span><span class="token punctuation">,</span> configuration <span class="token operator">=</span> <span class="token class-name">MySelfRibbonRuleConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MicroServiceCloudConsumerDept80Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MicroServiceCloudConsumerDept80Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æœåŠ¡è°ƒç”¨openfeign" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡è°ƒç”¨openfeign" aria-hidden="true">#</a> æœåŠ¡è°ƒç”¨OpenFeign</h2><p><a href="https://spring.io/projects/spring-cloud-openfeign" target="_blank" rel="noopener noreferrer">Spring Cloud OpenFeign<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>Spring Cloudå£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶</strong></p><p><strong>Clientç«¯</strong></p><p>OpenFeign æ˜¯ Spring Cloud <strong>å¯¹ Feign çš„äºŒæ¬¡å°è£…</strong></p><p>OpenFeign <strong>å¯¹ <a href="http://c.biancheng.net/springcloud/ribbon.html" target="_blank" rel="noopener noreferrer">Ribbon<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿›è¡Œäº†é›†æˆ</strong>ï¼Œåˆ©ç”¨ Ribbon ç»´æŠ¤äº†ä¸€ä»½å¯ç”¨æœåŠ¡æ¸…å•ï¼Œå¹¶<strong>é€šè¿‡ Ribbon å®ç°äº†å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡</strong>ã€‚</p><p>OpenFeign æ˜¯ä¸€ç§<strong>å£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶</strong>ï¼Œå®ƒ<strong>åœ¨ RestTemplate çš„åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥çš„å°è£…</strong>ã€‚é€šè¿‡ OpenFeign ï¼Œæˆ‘ä»¬<strong>åªéœ€è¦å£°æ˜ä¸€ä¸ªæ¥å£</strong>å¹¶<strong>é€šè¿‡æ³¨è§£</strong>è¿›è¡Œç®€å•çš„<strong>é…ç½®</strong>ï¼ˆ<strong>ç±»ä¼¼äº Dao æ¥å£ä¸Šé¢çš„ Mapper æ³¨è§£ä¸€æ ·</strong>ï¼‰å³å¯<strong>å®ç°å¯¹ HTTP æ¥å£çš„ç»‘å®š</strong>ã€‚</p><p>é€šè¿‡ OpenFeign ï¼Œæˆ‘ä»¬å¯ä»¥åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·æ¥è°ƒç”¨è¿œç¨‹æœåŠ¡ï¼Œè€Œå®Œå…¨æ„Ÿè§‰ä¸åˆ°è¿™æ˜¯åœ¨è¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚</p><p>åªéœ€<strong>åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶åœ¨æ¥å£ä¸Šæ·»åŠ @FeignClientæ³¨è§£</strong>å³å¯ ï¼›è¯¥æ³¨è§£ç”¨äº<strong>é€šçŸ¥ OpenFeign ç»„ä»¶å¯¹ @RequestMapping æ³¨è§£ä¸‹çš„æ¥å£è¿›è¡Œè§£æ</strong>ï¼Œå¹¶<strong>é€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼äº§ç”Ÿå®ç°ç±»</strong>ï¼Œå®ç°è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡è°ƒç”¨ã€‚</p><p><strong>éœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šå£°æ˜@EnableFeignClientsä»¥å¯åŠ¨OpenFeignçš„ä½¿ç”¨</strong></p><h4 id="openfeign-å¸¸ç”¨æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#openfeign-å¸¸ç”¨æ³¨è§£" aria-hidden="true">#</a> OpenFeign å¸¸ç”¨æ³¨è§£</h4><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>@FeignClient</td><td>è¯¥æ³¨è§£ç”¨äºé€šçŸ¥ OpenFeign ç»„ä»¶å¯¹ @RequestMapping æ³¨è§£ä¸‹çš„æ¥å£è¿›è¡Œè§£æï¼Œå¹¶é€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼äº§ç”Ÿå®ç°ç±»ï¼Œå®ç°è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡è°ƒç”¨ã€‚</td></tr><tr><td>@EnableFeignClients</td><td>è¯¥æ³¨è§£ç”¨äºå¼€å¯ OpenFeign åŠŸèƒ½ï¼Œå½“ Spring Cloud åº”ç”¨å¯åŠ¨æ—¶ï¼ŒOpenFeign ä¼šæ‰«ææ ‡æœ‰ @FeignClient æ³¨è§£çš„æ¥å£ï¼Œç”Ÿæˆä»£ç†å¹¶æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ã€‚</td></tr><tr><td>@RequestMapping</td><td>Spring MVC æ³¨è§£ï¼Œåœ¨ Spring MVC ä¸­ä½¿ç”¨è¯¥æ³¨è§£æ˜ å°„è¯·æ±‚ï¼Œé€šè¿‡å®ƒæ¥æŒ‡å®šæ§åˆ¶å™¨ï¼ˆControllerï¼‰å¯ä»¥å¤„ç†å“ªäº› URL è¯·æ±‚ï¼Œç›¸å½“äº Servlet ä¸­ web.xml çš„é…ç½®ã€‚</td></tr><tr><td>@GetMapping</td><td>Spring MVC æ³¨è§£ï¼Œç”¨æ¥æ˜ å°„ GET è¯·æ±‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äº @RequestMapping(method = RequestMethod.GET) ã€‚</td></tr><tr><td>@PostMapping</td><td>Spring MVC æ³¨è§£ï¼Œç”¨æ¥æ˜ å°„ POST è¯·æ±‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äº @RequestMapping(method = RequestMethod.POST) ã€‚</td></tr></tbody></table><h4 id="openfeign-å®ç°è¿œç¨‹æœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#openfeign-å®ç°è¿œç¨‹æœåŠ¡è°ƒç”¨" aria-hidden="true">#</a> OpenFeign å®ç°è¿œç¨‹æœåŠ¡è°ƒç”¨</h4><blockquote><p>OpenFeign<strong>æœåŠ¡ä¹‹é—´çš„è¿œç¨‹è°ƒç”¨</strong> éƒ½æ˜¯è¿›è¡ŒJSONæ ¼å¼çš„æ•°æ®ä¼ è¾“ éœ€è¦<strong>ä½¿ç”¨<code>@RequestBody</code></strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	 <span class="token comment">/*
	 1ã€CouponFeignService.saveSpuBounds(spuBoundTo);
     1ï¼‰ã€@RequestBodyå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸ºjsonã€‚
     2ï¼‰ã€æ‰¾åˆ°gulimall-couponæœåŠ¡ï¼Œç»™/coupon/spubounds/saveå‘é€è¯·æ±‚ã€‚
         å°†ä¸Šä¸€æ­¥è½¬çš„jsonæ”¾åœ¨è¯·æ±‚ä½“ä½ç½®ï¼Œå‘é€è¯·æ±‚ï¼›
     3ï¼‰ã€å¯¹æ–¹æœåŠ¡æ”¶åˆ°è¯·æ±‚ã€‚è¯·æ±‚ä½“é‡Œæœ‰jsonæ•°æ®ã€‚
         (@RequestBody SpuBoundsEntity spuBounds)ï¼›å°†è¯·æ±‚ä½“çš„jsonè½¬ä¸ºSpuBoundsEntityï¼›
	 åªè¦jsonæ•°æ®æ¨¡å‹æ˜¯å…¼å®¹çš„ã€‚åŒæ–¹æœåŠ¡æ— éœ€ä½¿ç”¨åŒä¸€ä¸ªto
	 */</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;cloud-mall-coupon&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CouponOpenFeign</span> <span class="token punctuation">{</span>         
	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;mall_coupon/spubounds/save&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">R</span> <span class="token function">saveSpuBounds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">SpuBoundTo</span> spuBoundTo<span class="token punctuation">)</span><span class="token punctuation">;</span>         
<span class="token punctuation">}</span>         
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p><strong>å–ä»£ribbon+rest Template</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101316353.png" alt="image-20221209101316353"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101327973.png" alt="image-20221209101327973"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101340279.png" alt="image-20221209101340279"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209101947638.png" alt="image-20221209101947638"></p><p>OpenFeignæ¥å£</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209102359970.png" alt="image-20221209102359970"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209102445444.png" alt="image-20221209102445444"></p><h4 id="openfeign-è¶…æ—¶æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#openfeign-è¶…æ—¶æ§åˆ¶" aria-hidden="true">#</a> OpenFeign è¶…æ—¶æ§åˆ¶</h4><p><strong>OpenFeign å®¢æˆ·ç«¯</strong>çš„<strong>é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º 1 ç§’é’Ÿ</strong>ï¼Œå¦‚æœæœåŠ¡ç«¯<strong>å¤„ç†è¯·æ±‚çš„æ—¶é—´è¶…è¿‡ 1 ç§’</strong>å°±ä¼š<strong>æŠ¥é”™</strong>ã€‚ä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬<strong>éœ€è¦å¯¹ OpenFeign å®¢æˆ·ç«¯çš„è¶…æ—¶æ—¶é—´è¿›è¡Œæ§åˆ¶</strong></p><p>application.yml ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå°†è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º6ç§’</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
  <span class="token key atrule">ReadTimeout</span><span class="token punctuation">:</span> <span class="token number">6000</span> <span class="token comment">#å»ºç«‹è¿æ¥æ‰€ç”¨çš„æ—¶é—´ï¼Œé€‚ç”¨äºç½‘ç»œçŠ¶å†µæ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œä¸¤ç«¯ä¸¤ç«¯è¿æ¥æ‰€ç”¨çš„æ—¶é—´</span>
  <span class="token key atrule">ConnectionTimeout</span><span class="token punctuation">:</span> <span class="token number">6000</span> <span class="token comment">#å»ºç«‹è¿æ¥åï¼ŒæœåŠ¡å™¨è¯»å–åˆ°å¯ç”¨èµ„æºçš„æ—¶é—´</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨ï¼šç”±äº <strong>OpenFeign é›†æˆäº† Ribbon</strong> ï¼Œå…¶<strong>æœåŠ¡è°ƒç”¨ä»¥åŠè´Ÿè½½å‡è¡¡åœ¨åº•å±‚éƒ½æ˜¯ä¾é  Ribbon å®ç°çš„</strong>ï¼Œå› æ­¤ OpenFeign <strong>è¶…æ—¶æ§åˆ¶ä¹Ÿæ˜¯é€šè¿‡ Ribbon æ¥å®ç°çš„</strong>ã€‚</p><h4 id="openfeign-æ—¥å¿—å¢å¼º" tabindex="-1"><a class="header-anchor" href="#openfeign-æ—¥å¿—å¢å¼º" aria-hidden="true">#</a> OpenFeign æ—¥å¿—å¢å¼º</h4><p><strong>OpenFeign æä¾›äº†æ—¥å¿—æ‰“å°åŠŸèƒ½</strong>ï¼Œæˆ‘ä»¬å¯ä»¥<strong>é€šè¿‡é…ç½®è°ƒæ•´æ—¥å¿—çº§åˆ«</strong>ï¼Œæ¥äº†è§£è¯·æ±‚çš„ç»†èŠ‚ã€‚</p><p>Feign ä¸ºæ¯ä¸€ä¸ª FeignClient éƒ½æä¾›äº†ä¸€ä¸ª <strong>feign.Logger å®ä¾‹</strong>ï¼Œé€šè¿‡å®ƒå¯ä»¥å¯¹ OpenFeign æœåŠ¡ç»‘å®šæ¥å£çš„è°ƒç”¨æƒ…å†µè¿›è¡Œç›‘æ§ã€‚</p><p><strong>å®šä¹‰Logger.Level</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209110336349.png" alt="image-20221209110336349"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209110313203.png" alt="image-20221209110313203"></p><p>è¯¥é…ç½®çš„ä½œç”¨æ˜¯é€šè¿‡é…ç½®çš„ Logger.Level å¯¹è±¡å‘Šè¯‰ OpenFeign è®°å½•å“ªäº›æ—¥å¿—å†…å®¹ã€‚</p><p>Logger.Level çš„å…·ä½“çº§åˆ«å¦‚ä¸‹ï¼š</p><ul><li>NONEï¼šä¸è®°å½•ä»»ä½•ä¿¡æ¯ã€‚</li><li>BASICï¼šä»…è®°å½•è¯·æ±‚æ–¹æ³•ã€URL ä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´ã€‚</li><li>HEADERSï¼šé™¤äº†è®°å½• BASIC çº§åˆ«çš„ä¿¡æ¯å¤–ï¼Œè¿˜ä¼šè®°å½•è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯ã€‚</li><li>FULLï¼šè®°å½•æ‰€æœ‰è¯·æ±‚ä¸å“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®ç­‰ç­‰ã€‚</li></ul><p><strong>yamlé…ç½®ä¸­é…ç½®æ—¥å¿—</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span> 
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token comment">#feign æ—¥å¿—ä»¥ä»€ä¹ˆæ ·çš„çº§åˆ«ç›‘æ§è¯¥æ¥å£</span>
    <span class="token key atrule">com.eddie.springcloud.service.OpenFeignService</span> <span class="token punctuation">:</span> debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209110852429.png" alt="image-20221209110852429"></p><h2 id="æœåŠ¡é™çº§-ç†”æ–­hystrix" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡é™çº§-ç†”æ–­hystrix" aria-hidden="true">#</a> æœåŠ¡é™çº§ï¼Œç†”æ–­Hystrix</h2><p><a href="https://github.com/Netflix/Hystrix" target="_blank" rel="noopener noreferrer">GitHub - Netflix/Hystrix: Hystrix is a latency and fault tolerance library designed to isolate points of access to remote systems, services and 3rd party libraries, stop cascading failure and enable resilience in complex distributed systems where failure is inevitable.<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.cnblogs.com/cjsblog/p/9391819.html" target="_blank" rel="noopener noreferrer">Hystrixä»‹ç» - åºŸç‰©å¤§å¸ˆå…„ - åšå®¢å›­ (cnblogs.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>åœ¨å¾®æœåŠ¡ç³»ç»Ÿä¸­ï¼ŒHystrix èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š</p><ul><li><strong>ä¿æŠ¤çº¿ç¨‹èµ„æº</strong>ï¼šé˜²æ­¢å•ä¸ªæœåŠ¡çš„æ•…éšœè€—å°½ç³»ç»Ÿä¸­çš„æ‰€æœ‰çº¿ç¨‹èµ„æºã€‚</li><li><strong>å¿«é€Ÿå¤±è´¥æœºåˆ¶</strong>ï¼šå½“æŸä¸ªæœåŠ¡å‘ç”Ÿäº†æ•…éšœï¼Œä¸è®©æœåŠ¡è°ƒç”¨æ–¹ä¸€ç›´ç­‰å¾…ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›è¯·æ±‚å¤±è´¥ã€‚</li><li><strong>æä¾›é™çº§ï¼ˆFallBackï¼‰æ–¹æ¡ˆ</strong>ï¼šåœ¨è¯·æ±‚å¤±è´¥åï¼Œæä¾›ä¸€ä¸ªè®¾è®¡å¥½çš„é™çº§æ–¹æ¡ˆï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå…œåº•æ–¹æ³•ï¼Œå½“è¯·æ±‚å¤±è´¥åå³è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li><li><strong>é˜²æ­¢æ•…éšœæ‰©æ•£</strong>ï¼šä½¿ç”¨ç†”æ–­æœºåˆ¶ï¼Œé˜²æ­¢æ•…éšœæ‰©æ•£åˆ°å…¶ä»–æœåŠ¡ã€‚</li><li><strong>ç›‘æ§åŠŸèƒ½</strong>ï¼šæä¾›ç†”æ–­å™¨æ•…éšœç›‘æ§ç»„ä»¶ Hystrix Dashboardï¼Œéšæ—¶ç›‘æ§ç†”æ–­å™¨çš„çŠ¶æ€ã€‚</li></ul><p>Spring Cloud Hystrix æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æœåŠ¡å®¹é”™ä¸ä¿æŠ¤ç»„ä»¶</strong>ï¼Œä¹Ÿæ˜¯ Spring Cloud ä¸­æœ€é‡è¦çš„ç»„ä»¶ä¹‹ä¸€ã€‚</p><p>Spring Cloud Hystrix æ˜¯åŸºäº Netflix å…¬å¸çš„å¼€æºç»„ä»¶ Hystrix å®ç°çš„ï¼Œå®ƒæä¾›äº†<strong>ç†”æ–­å™¨åŠŸèƒ½</strong>ï¼Œèƒ½å¤Ÿæœ‰<strong>æ•ˆåœ°é˜»æ­¢åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿä¸­å‡ºç°è”åŠ¨æ•…éšœ</strong>ï¼Œä»¥<strong>æé«˜å¾®æœåŠ¡ç³»ç»Ÿçš„å¼¹æ€§</strong>ã€‚Spring Cloud Hystrix å…·æœ‰<strong>æœåŠ¡é™çº§</strong>ã€<strong>æœåŠ¡ç†”æ–­</strong>ã€<strong>çº¿ç¨‹éš”ç¦»</strong>ã€<strong>è¯·æ±‚ç¼“å­˜</strong>ã€<strong>è¯·æ±‚åˆå¹¶</strong>ä»¥åŠ<strong>å®æ—¶æ•…éšœç›‘æ§</strong>ç­‰å¼ºå¤§åŠŸèƒ½ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209162126269.png" alt="image-20221209162126269"></p><p>å½“å¾®æœåŠ¡ç³»ç»Ÿçš„ä¸€<strong>ä¸ªæœåŠ¡å‡ºç°æ•…éšœ</strong>æ—¶ï¼Œ<strong>æ•…éšœä¼šæ²¿ç€æœåŠ¡çš„è°ƒç”¨é“¾è·¯åœ¨ç³»ç»Ÿä¸­ç–¯ç‹‚è”“å»¶</strong>ï¼Œæœ€ç»ˆ<strong>å¯¼è‡´æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿçš„ç˜«ç—ª</strong>ï¼Œè¿™å°±æ˜¯**â€œé›ªå´©æ•ˆåº”â€**ã€‚</p><p>ä¸ºäº†é˜²æ­¢æ­¤ç±»äº‹ä»¶çš„å‘ç”Ÿï¼Œå¾®æœåŠ¡æ¶æ„å¼•å…¥äº†**â€œç†”æ–­å™¨â€<strong>çš„ä¸€ç³»åˆ—</strong>æœåŠ¡å®¹é”™å’Œä¿æŠ¤æœºåˆ¶**</p><h3 id="hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> Hystrixè®¾è®¡åŸåˆ™æ˜¯ä»€ä¹ˆ</h3><ul><li>é˜²æ­¢ä»»ä½•å•ä¸ªä¾èµ–é¡¹è€—å°½æ‰€æœ‰å®¹å™¨ï¼ˆå¦‚Tomcatï¼‰ç”¨æˆ·çº¿ç¨‹ã€‚</li><li>ç”©æ‰åŒ…è¢±ï¼Œå¿«é€Ÿå¤±è´¥è€Œä¸æ˜¯æ’é˜Ÿã€‚</li><li>åœ¨ä»»ä½•å¯è¡Œçš„åœ°æ–¹æä¾›å›é€€ï¼Œä»¥ä¿æŠ¤ç”¨æˆ·ä¸å—å¤±è´¥çš„å½±å“ã€‚</li><li>ä½¿ç”¨éš”ç¦»æŠ€æœ¯ï¼ˆå¦‚éš”ç¦»æ¿ã€æ³³é“å’Œæ–­è·¯å™¨æ¨¡å¼ï¼‰æ¥é™åˆ¶ä»»ä½•ä¸€ä¸ªä¾èµ–é¡¹çš„å½±å“ã€‚</li><li>é€šè¿‡è¿‘å®æ—¶çš„åº¦é‡ã€ç›‘è§†å’Œè­¦æŠ¥æ¥ä¼˜åŒ–å‘ç°æ—¶é—´ã€‚</li><li>é€šè¿‡é…ç½®çš„ä½å»¶è¿Ÿä¼ æ’­æ¥ä¼˜åŒ–æ¢å¤æ—¶é—´ã€‚</li><li>æ”¯æŒå¯¹Hystrixçš„å¤§å¤šæ•°æ–¹é¢çš„åŠ¨æ€å±æ€§æ›´æ”¹ï¼Œå…è®¸ä½¿ç”¨ä½å»¶è¿Ÿåé¦ˆå¾ªç¯è¿›è¡Œå®æ—¶æ“ä½œä¿®æ”¹ã€‚</li><li>é¿å…åœ¨æ•´ä¸ªä¾èµ–å®¢æˆ·ç«¯æ‰§è¡Œä¸­å‡ºç°æ•…éšœï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ç½‘ç»œæµé‡ä¸­ã€‚</li></ul><h3 id="hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„" tabindex="-1"><a class="header-anchor" href="#hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„" aria-hidden="true">#</a> Hystrixæ˜¯å¦‚ä½•å®ç°å®ƒçš„ç›®æ ‡çš„</h3><ol><li>ç”¨ä¸€ä¸ªHystrixCommand æˆ–è€… HystrixObservableCommand ï¼ˆè¿™æ˜¯å‘½ä»¤æ¨¡å¼çš„ä¸€ä¸ªä¾‹å­ï¼‰åŒ…è£…æ‰€æœ‰çš„å¯¹å¤–éƒ¨ç³»ç»Ÿï¼ˆæˆ–è€…ä¾èµ–ï¼‰çš„è°ƒç”¨ï¼Œå…¸å‹åœ°å®ƒä»¬åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­æ‰§è¡Œ</li><li>è°ƒç”¨è¶…æ—¶æ—¶é—´æ¯”ä½ è‡ªå·±å®šä¹‰çš„é˜ˆå€¼è¦é•¿ã€‚æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¯¹äºå¤§å¤šæ•°çš„ä¾èµ–é¡¹ä½ æ˜¯å¯ä»¥è‡ªå®šä¹‰è¶…æ—¶æ—¶é—´çš„ã€‚</li><li>ä¸ºæ¯ä¸ªä¾èµ–é¡¹ç»´æŠ¤ä¸€ä¸ªå°çš„çº¿ç¨‹æ± (æˆ–ä¿¡å·é‡)ï¼›å¦‚æœçº¿ç¨‹æ± æ»¡äº†ï¼Œé‚£ä¹ˆè¯¥ä¾èµ–æ€§å°†ä¼šç«‹å³æ‹’ç»è¯·æ±‚ï¼Œè€Œä¸æ˜¯æ’é˜Ÿã€‚</li><li>è°ƒç”¨çš„ç»“æœæœ‰è¿™ä¹ˆå‡ ç§ï¼šæˆåŠŸã€å¤±è´¥ï¼ˆå®¢æˆ·ç«¯æŠ›å‡ºå¼‚å¸¸ï¼‰ã€è¶…æ—¶ã€æ‹’ç»ã€‚</li><li>åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå¦‚æœæœåŠ¡çš„é”™è¯¯ç™¾åˆ†æ¯”è¶…è¿‡äº†ä¸€ä¸ªé˜ˆå€¼ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ªæ–­è·¯å™¨æ¥åœæ­¢å¯¹ç‰¹å®šæœåŠ¡çš„æ‰€æœ‰è¯·æ±‚ï¼Œæ— è®ºæ˜¯æ‰‹åŠ¨çš„è¿˜æ˜¯è‡ªåŠ¨çš„ã€‚</li><li>å½“è¯·æ±‚å¤±è´¥ã€è¢«æ‹’ç»ã€è¶…æ—¶æˆ–çŸ­è·¯æ—¶ï¼Œæ‰§è¡Œå›é€€é€»è¾‘ã€‚</li><li>è¿‘å®æ—¶ç›‘æ§æŒ‡æ ‡å’Œé…ç½®å˜åŒ–ã€‚</li></ol><h3 id="å·¥ä½œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œæµç¨‹" aria-hidden="true">#</a> å·¥ä½œæµç¨‹</h3><p><a href="https://github.com/Netflix/Hystrix/wiki/How-it-Works" target="_blank" rel="noopener noreferrer">How it Works Â· Netflix/Hystrix Wiki Â· GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209161112639.png" alt="image-20221209161112639"></p><h3 id="ç†”æ–­å™¨" tabindex="-1"><a class="header-anchor" href="#ç†”æ–­å™¨" aria-hidden="true">#</a> ç†”æ–­å™¨</h3><p>ç†”æ–­å™¨ï¼ˆCircuit Breakerï¼‰ä¸€è¯æ¥æºç‰©ç†å­¦ä¸­çš„ç”µè·¯çŸ¥è¯†ï¼Œå®ƒçš„ä½œç”¨æ˜¯å½“çº¿è·¯å‡ºç°æ•…éšœæ—¶ï¼Œè¿…é€Ÿåˆ‡æ–­ç”µæºä»¥ä¿æŠ¤ç”µè·¯çš„å®‰å…¨ã€‚</p><p>åœ¨å¾®æœåŠ¡é¢†åŸŸï¼Œç†”æ–­å™¨æœ€æ—©æ˜¯ç”± Martin Fowler åœ¨ä»–å‘è¡¨çš„ ã€Š<a href="https://martinfowler.com/bliki/CircuitBreaker.html" target="_blank" rel="noopener noreferrer">Circuit Breake<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>rã€‹ä¸€æ–‡ä¸­æå‡ºã€‚ä¸ç‰©ç†å­¦ä¸­çš„ç†”æ–­å™¨ä½œç”¨ç›¸ä¼¼ï¼Œå¾®æœåŠ¡æ¶æ„ä¸­çš„ç†”æ–­å™¨èƒ½å¤Ÿåœ¨æŸä¸ªæœåŠ¡å‘ç”Ÿæ•…éšœåï¼Œå‘æœåŠ¡è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªç¬¦åˆé¢„æœŸçš„ã€å¯å¤„ç†çš„é™çº§å“åº”ï¼ˆFallBackï¼‰ï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…æˆ–è€…æŠ›å‡ºè°ƒç”¨æ–¹æ— æ³•å¤„ç†çš„å¼‚å¸¸ã€‚è¿™æ ·å°±ä¿è¯äº†æœåŠ¡è°ƒç”¨æ–¹çš„çº¿ç¨‹ä¸ä¼šè¢«é•¿æ—¶é—´ã€ä¸å¿…è¦åœ°å ç”¨ï¼Œé¿å…æ•…éšœåœ¨å¾®æœåŠ¡ç³»ç»Ÿä¸­çš„è”“å»¶ï¼Œé˜²æ­¢ç³»ç»Ÿé›ªå´©æ•ˆåº”çš„å‘ç”Ÿã€‚</p><h3 id="hystrix-æœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#hystrix-æœåŠ¡é™çº§" aria-hidden="true">#</a> Hystrix æœåŠ¡é™çº§</h3><p>Hystrix æœåŠ¡é™çº§ <strong>FallBack</strong> æ—¢å¯ä»¥æ”¾åœ¨<strong>æœåŠ¡ç«¯è¿›è¡Œ</strong>ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨<strong>å®¢æˆ·ç«¯è¿›è¡Œ</strong>ã€‚</p><p>Hystrix ä¼šåœ¨ä»¥ä¸‹åœºæ™¯ä¸‹è¿›è¡ŒæœåŠ¡é™çº§å¤„ç†ï¼š</p><ul><li>ç¨‹åºè¿è¡Œå¼‚å¸¸</li><li>æœåŠ¡è¶…æ—¶</li><li>ç†”æ–­å™¨å¤„äºæ‰“å¼€çŠ¶æ€</li><li>çº¿ç¨‹æ± èµ„æºè€—å°½</li></ul><p>æœåŠ¡é™çº§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹ 2 ç§ï¼š</p><ul><li>åœ¨æœåŠ¡å™¨å‹åŠ›å‰§å¢æ—¶ï¼Œæ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µåŠæµé‡ï¼Œå¯¹ä¸€äº›ä¸é‡è¦ã€ä¸ç´§æ€¥çš„æœåŠ¡è¿›è¡Œæœ‰ç­–ç•¥åœ°ä¸å¤„ç†æˆ–ç®€å•å¤„ç†ï¼Œä»è€Œé‡Šæ”¾æœåŠ¡å™¨èµ„æºä»¥ä¿è¯æ ¸å¿ƒæœåŠ¡æ­£å¸¸è¿ä½œã€‚</li><li>å½“æŸäº›æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œä¸ºäº†é¿å…é•¿æ—¶é—´ç­‰å¾…é€ æˆæœåŠ¡å¡é¡¿æˆ–é›ªå´©æ•ˆåº”ï¼Œè€Œä¸»åŠ¨æ‰§è¡Œå¤‡ç”¨çš„é™çº§é€»è¾‘ç«‹åˆ»è¿”å›ä¸€ä¸ªå‹å¥½çš„æç¤ºï¼Œä»¥ä¿éšœä¸»ä½“ä¸šåŠ¡ä¸å—å½±å“ã€‚</li></ul><p>å¯ä»¥é€šè¿‡<strong>é‡å†™ HystrixCommand çš„ getFallBack() æ–¹æ³•</strong>æˆ– <strong>HystrixObservableCommand çš„ resumeWithFallback() æ–¹æ³•</strong>ï¼Œ<strong>ä½¿æœåŠ¡æ”¯æŒæœåŠ¡é™çº§</strong>ã€‚</p><h4 id="æœåŠ¡ç«¯è¿›è¡ŒæœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯è¿›è¡ŒæœåŠ¡é™çº§" aria-hidden="true">#</a> æœåŠ¡ç«¯è¿›è¡ŒæœåŠ¡é™çº§</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209170227146.png" alt="image-20221209170227146"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209170245711.png" alt="image-20221209170245711"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209170315651.png" alt="image-20221209170315651"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209170337614.png" alt="image-20221209170337614"></p><p>service</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209170359091.png" alt="image-20221209170359091"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209170424071.png" alt="image-20221209170424071"></p><p>run</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209170435536.png" alt="image-20221209170435536"></p><h4 id="å®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡é™çº§â˜†" tabindex="-1"><a class="header-anchor" href="#å®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡é™çº§â˜†" aria-hidden="true">#</a> å®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡é™çº§â˜†</h4><p><strong>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šåœ¨å®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡é™çº§</strong>ï¼Œå½“å®¢æˆ·ç«¯è°ƒç”¨çš„æœåŠ¡ç«¯çš„æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œå®¢æˆ·ç«¯ç›´æ¥è¿›è¡ŒæœåŠ¡é™çº§å¤„ç†ï¼Œé¿å…å…¶çº¿ç¨‹è¢«é•¿æ—¶é—´ã€ä¸å¿…è¦åœ°å ç”¨</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209180353853.png" alt="image-20221209180353853"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209180406011.png" alt="image-20221209180406011"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209180425286.png" alt="image-20221209180425286"></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment">######################é…ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´##########################</span>
<span class="token key atrule">hystrix</span><span class="token punctuation">:</span>
  <span class="token key atrule">command</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">execution</span><span class="token punctuation">:</span>
        <span class="token key atrule">isolation</span><span class="token punctuation">:</span>
          <span class="token key atrule">thread</span><span class="token punctuation">:</span>
            <span class="token key atrule">timeoutInMilliseconds</span><span class="token punctuation">:</span> <span class="token number">7000</span>
<span class="token comment">####################é…ç½®å…·ä½“æ–¹æ³•è¶…æ—¶æ—¶é—´ ä¸º 3 ç§’########################</span>
    DeptHystrixService<span class="token comment">#deptInfo_Timeout(Integer):</span>
      <span class="token key atrule">execution</span><span class="token punctuation">:</span>
        <span class="token key atrule">isolation</span><span class="token punctuation">:</span>
          <span class="token key atrule">thread</span><span class="token punctuation">:</span>
            <span class="token key atrule">timeoutInMilliseconds</span><span class="token punctuation">:</span> <span class="token number">3000</span>
            
<span class="token comment">#åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾è®¡è¯·æ±‚çš„è¶…æ—¶æ—¶é—´æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹ 2 ç‚¹ï¼š </span>

<span class="token comment">#1ï¼‰Hystrix å¯ä»¥æ¥ä¸ºæ‰€æœ‰è¯·æ±‚ï¼ˆæ–¹æ³•ï¼‰è®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ä¸ºæ¯«ç§’ï¼‰ï¼Œè‹¥è¯·æ±‚è¶…æ—¶åˆ™è§¦å‘å…¨å±€çš„å›é€€æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</span>
<span class="token comment">#hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=mmm</span>

<span class="token comment">#2ï¼‰Hystrix è¿˜å¯ä»¥ä¸ºæŸä¸ªç‰¹å®šçš„æœåŠ¡è¯·æ±‚ï¼ˆæ–¹æ³•ï¼‰è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</span>
<span class="token comment">#hystrix.command.xxx#yyy(zzz).execution.isolation.thread.timeoutInMilliseconds=mmm</span>
<span class="token comment">#æ ¼å¼è¯´æ˜å¦‚ä¸‹ï¼š</span>
<span class="token comment">#xxxï¼šä¸ºåŒ…å«è¯¥æœåŠ¡æ–¹æ³•çš„ç±»çš„åç§°ï¼ˆé€šå¸¸ä¸ºæœåŠ¡ç»‘å®šæ¥å£çš„åç§°ï¼‰ï¼Œä¾‹å¦‚ DeptHystrixService æ¥å£ã€‚</span>
<span class="token comment">#yyyï¼šæœåŠ¡æ–¹æ³•åï¼Œä¾‹å¦‚ deptInfo_Timeout() æ–¹æ³•ã€‚</span>
<span class="token comment">#zzzï¼šæ–¹æ³•å†…çš„å‚æ•°ç±»å‹ï¼Œä¾‹å¦‚ Integerã€String ç­‰ç­‰</span>
<span class="token comment">#mmmï¼šè¦è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆ1 ç§’ =1000 æ¯«ç§’ï¼‰</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209180525469.png" alt="image-20221209180525469"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209180547633.png" alt="image-20221209180547633"></p><p>providerç«¯çš„æ–¹æ³•</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209180723249.png" alt="image-20221209180723249"></p><p>run</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209181841894.png" alt="image-20221209181841894"></p><h5 id="å…¨å±€é™çº§æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å…¨å±€é™çº§æ–¹æ³•" aria-hidden="true">#</a> å…¨å±€é™çº§æ–¹æ³•</h5><p><strong>æ³¨æ„</strong>ï¼š<strong>é™çº§ï¼ˆFallBackï¼‰æ–¹æ³•</strong>å¿…é¡»<strong>ä¸å…¶å¯¹åº”çš„ä¸šåŠ¡æ–¹æ³•</strong>åœ¨<strong>åŒä¸€ä¸ªç±»ä¸­</strong>ï¼Œå¦åˆ™æ— æ³•ç”Ÿæ•ˆã€‚</p><p><strong>æ³¨æ„</strong>ï¼šå…¨å±€é™çº§æ–¹æ³•çš„ä¼˜å…ˆçº§è¾ƒä½ï¼Œåªæœ‰ä¸šåŠ¡æ–¹æ³•æ²¡æœ‰æŒ‡å®šå…¶é™çº§æ–¹æ³•æ—¶ï¼ŒæœåŠ¡é™çº§æ—¶æ‰ä¼šè§¦å‘å…¨å±€å›é€€æ–¹æ³•ã€‚è‹¥ä¸šåŠ¡æ–¹æ³•æŒ‡å®šå®ƒè‡ªå·±çš„å›é€€æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨æœåŠ¡é™çº§æ—¶ï¼Œå°±åªä¼šç›´æ¥è§¦å‘å®ƒè‡ªå·±çš„å›é€€æ–¹æ³•ï¼Œè€Œéå…¨å±€å›é€€æ–¹æ³•ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209201957589.png" alt="image-20221209201957589"></p><p>å•ç‹¬æŒ‡å®šå›é€€æ–¹æ³•</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209201316537.png" alt="image-20221209201316537"></p><p>å…¨å±€å›é€€æ–¹æ³•</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209201341214.png" alt="image-20221209201341214"></p><h5 id="è§£è€¦é™çº§é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#è§£è€¦é™çº§é€»è¾‘" aria-hidden="true">#</a> è§£è€¦é™çº§é€»è¾‘</h5><p>ä¸ç®¡æ˜¯ä¸šåŠ¡æ–¹æ³•æŒ‡å®šçš„é™çº§æ–¹æ³•è¿˜æ˜¯å…¨å±€é™çº§æ–¹æ³•ï¼Œå®ƒä»¬éƒ½å¿…é¡»å’Œä¸šåŠ¡æ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­æ‰èƒ½ç”Ÿæ•ˆï¼Œä¸šåŠ¡é€»è¾‘ä¸é™çº§é€»è¾‘è€¦åˆåº¦æé«˜ã€‚</p><p><strong>å¯¹ä¸šåŠ¡é€»è¾‘ä¸é™çº§é€»è¾‘è¿›è¡Œè§£è€¦ï¼š</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209202844026.png" alt="image-20221209202844026"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209202854001.png" alt="image-20221209202854001"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209202926845.png" alt="image-20221209202926845"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209202955323.png" alt="image-20221209202955323"></p><h3 id="hystrix-æœåŠ¡ç†”æ–­" tabindex="-1"><a class="header-anchor" href="#hystrix-æœåŠ¡ç†”æ–­" aria-hidden="true">#</a> Hystrix æœåŠ¡ç†”æ–­</h3><p><strong>ç†”æ–­æœºåˆ¶</strong>æ˜¯ä¸ºäº†<strong>åº”å¯¹é›ªå´©æ•ˆåº”</strong>è€Œå‡ºç°çš„ä¸€ç§<strong>å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶</strong>ã€‚</p><p>å½“å¾®æœåŠ¡ç³»ç»Ÿä¸­çš„<strong>æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–å“åº”æ—¶é—´å¤ªé•¿æ—¶</strong>ï¼Œ<strong>ä¸ºäº†</strong>ä¿æŠ¤ç³»ç»Ÿçš„<strong>æ•´ä½“å¯ç”¨æ€§</strong>ï¼Œ<strong>ç†”æ–­å™¨</strong>ä¼š<strong>æš‚æ—¶åˆ‡æ–­è¯·æ±‚å¯¹è¯¥æœåŠ¡çš„è°ƒç”¨</strong>ï¼Œå¹¶<strong>å¿«é€Ÿè¿”å›ä¸€ä¸ªå‹å¥½çš„é”™è¯¯å“åº”</strong>ã€‚è¿™ç§ç†”æ–­çŠ¶æ€ä¸æ˜¯æ°¸ä¹…çš„ï¼Œåœ¨<strong>ç»å†äº†ä¸€å®šçš„æ—¶é—´å</strong>ï¼Œ<strong>ç†”æ–­å™¨</strong>ä¼šå†æ¬¡<strong>æ£€æµ‹è¯¥å¾®æœåŠ¡æ˜¯å¦æ¢å¤æ­£å¸¸</strong>ï¼Œè‹¥æœåŠ¡<strong>æ¢å¤æ­£å¸¸åˆ™æ¢å¤å…¶è°ƒç”¨é“¾è·¯</strong>ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209203316448.png" alt="image-20221209203316448"></p><p><strong>ç†”æ–­çŠ¶æ€</strong></p><p>åœ¨ç†”æ–­æœºåˆ¶ä¸­æ¶‰åŠäº†ä¸‰ç§ç†”æ–­çŠ¶æ€ï¼š</p><ul><li>ç†”æ–­å…³é—­çŠ¶æ€ï¼ˆClosedï¼‰ï¼šå½“æœåŠ¡è®¿é—®æ­£å¸¸æ—¶ï¼Œç†”æ–­å™¨å¤„äºå…³é—­çŠ¶æ€ï¼ŒæœåŠ¡è°ƒç”¨æ–¹å¯ä»¥æ­£å¸¸åœ°å¯¹æœåŠ¡è¿›è¡Œè°ƒç”¨ã€‚</li><li>ç†”æ–­å¼€å¯çŠ¶æ€ï¼ˆOpenï¼‰ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å›ºå®šæ—¶é—´å†…æ¥å£è°ƒç”¨å‡ºé”™æ¯”ç‡è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼ï¼ˆä¾‹å¦‚ 50%ï¼‰ï¼Œç†”æ–­å™¨ä¼šè¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ã€‚è¿›å…¥ç†”æ–­çŠ¶æ€åï¼Œåç»­å¯¹è¯¥æœåŠ¡çš„è°ƒç”¨éƒ½ä¼šè¢«åˆ‡æ–­ï¼Œç†”æ–­å™¨ä¼šæ‰§è¡Œæœ¬åœ°çš„é™çº§ï¼ˆFallBackï¼‰æ–¹æ³•ã€‚</li><li>åŠç†”æ–­çŠ¶æ€ï¼ˆHalf-Openï¼‰ï¼š åœ¨ç†”æ–­å¼€å¯ä¸€æ®µæ—¶é—´ä¹‹åï¼Œç†”æ–­å™¨ä¼šè¿›å…¥åŠç†”æ–­çŠ¶æ€ã€‚åœ¨åŠç†”æ–­çŠ¶æ€ä¸‹ï¼Œç†”æ–­å™¨ä¼šå°è¯•æ¢å¤æœåŠ¡è°ƒç”¨æ–¹å¯¹æœåŠ¡çš„è°ƒç”¨ï¼Œå…è®¸éƒ¨åˆ†è¯·æ±‚è°ƒç”¨è¯¥æœåŠ¡ï¼Œå¹¶ç›‘æ§å…¶è°ƒç”¨æˆåŠŸç‡ã€‚å¦‚æœæˆåŠŸç‡è¾¾åˆ°é¢„æœŸï¼Œåˆ™è¯´æ˜æœåŠ¡å·²æ¢å¤æ­£å¸¸ï¼Œç†”æ–­å™¨è¿›å…¥å…³é—­çŠ¶æ€ï¼›å¦‚æœæˆåŠŸç‡ä»æ—§å¾ˆä½ï¼Œåˆ™é‡æ–°è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ã€‚</li></ul><p><strong>Hystrix å®ç°ç†”æ–­æœºåˆ¶</strong></p><p>åœ¨ Spring Cloud ä¸­ï¼Œç†”æ–­æœºåˆ¶æ˜¯é€šè¿‡ Hystrix å®ç°çš„ã€‚Hystrix ä¼šç›‘æ§å¾®æœåŠ¡é—´è°ƒç”¨çš„çŠ¶å†µï¼Œå½“å¤±è´¥è°ƒç”¨åˆ°ä¸€å®šæ¯”ä¾‹æ—¶ï¼ˆä¾‹å¦‚ 5 ç§’å†…å¤±è´¥ 20 æ¬¡ï¼‰ï¼Œå°±ä¼šå¯åŠ¨ç†”æ–­æœºåˆ¶ã€‚</p><p>Hystrix å®ç°æœåŠ¡ç†”æ–­çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>å½“æœåŠ¡çš„è°ƒç”¨å‡ºé”™ç‡è¾¾åˆ°æˆ–è¶…è¿‡ Hystix è§„å®šçš„æ¯”ç‡ï¼ˆé»˜è®¤ä¸º 50%ï¼‰åï¼Œç†”æ–­å™¨è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ã€‚</li><li>ç†”æ–­å™¨è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€åï¼ŒHystrix ä¼šå¯åŠ¨ä¸€ä¸ªä¼‘çœ æ—¶é—´çª—ï¼Œåœ¨è¿™ä¸ªæ—¶é—´çª—å†…ï¼Œè¯¥æœåŠ¡çš„é™çº§é€»è¾‘ä¼šä¸´æ—¶å……å½“ä¸šåŠ¡ä¸»é€»è¾‘ï¼Œè€ŒåŸæ¥çš„ä¸šåŠ¡ä¸»é€»è¾‘ä¸å¯ç”¨ã€‚</li><li>å½“æœ‰è¯·æ±‚å†æ¬¡è°ƒç”¨è¯¥æœåŠ¡æ—¶ï¼Œä¼šç›´æ¥è°ƒç”¨é™çº§é€»è¾‘å¿«é€Ÿåœ°è¿”å›å¤±è´¥å“åº”ï¼Œä»¥é¿å…ç³»ç»Ÿé›ªå´©ã€‚</li><li>å½“ä¼‘çœ æ—¶é—´çª—åˆ°æœŸåï¼ŒHystrix ä¼šè¿›å…¥åŠç†”æ–­è½¬æ€ï¼Œå…è®¸éƒ¨åˆ†è¯·æ±‚å¯¹æœåŠ¡åŸæ¥çš„ä¸»ä¸šåŠ¡é€»è¾‘è¿›è¡Œè°ƒç”¨ï¼Œå¹¶ç›‘æ§å…¶è°ƒç”¨æˆåŠŸç‡ã€‚</li><li>å¦‚æœè°ƒç”¨æˆåŠŸç‡è¾¾åˆ°é¢„æœŸï¼Œåˆ™è¯´æ˜æœåŠ¡å·²æ¢å¤æ­£å¸¸ï¼ŒHystrix è¿›å…¥ç†”æ–­å…³é—­çŠ¶æ€ï¼ŒæœåŠ¡åŸæ¥çš„ä¸»ä¸šåŠ¡é€»è¾‘æ¢å¤ï¼›å¦åˆ™ Hystrix é‡æ–°è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ï¼Œä¼‘çœ æ—¶é—´çª—å£é‡æ–°è®¡æ—¶ï¼Œç»§ç»­é‡å¤ç¬¬ 2 åˆ°ç¬¬ 5 æ­¥ã€‚</li></ol><p><strong>ä»£ç å®ä¾‹</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209220525002.png" alt="image-20221209220525002"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.enabled&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//æ˜¯å¦å¼€å¯ç†”æ–­å™¨</span>
<span class="token comment">//            @HystrixProperty(name = &quot;metrics.rollingStats.timeInMilliseconds&quot;, value = &quot;1000&quot;), //ç»Ÿè®¡æ—¶é—´çª—</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.requestVolumeThreshold&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//ç»Ÿè®¡æ—¶é—´çª—å†…è¯·æ±‚æ¬¡æ•°</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.sleepWindowInMilliseconds&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//ä¼‘çœ æ—¶é—´çª—å£æœŸ</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.errorThresholdPercentage&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;40&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//åœ¨ç»Ÿè®¡æ—¶é—´çª—å£æœŸä»¥å†…ï¼Œè¯·æ±‚å¤±è´¥ç‡è¾¾åˆ° 60% æ—¶è¿›å…¥ç†”æ–­çŠ¶æ€</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testHystrixCircuitBreaker</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸èƒ½ä¹±æ¥å“¦~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;è°ƒç”¨æˆåŠŸï¼Œæµæ°´å·ä¸ºï¼š&quot;</span> <span class="token operator">+</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>å‚æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>metrics.rollingStats.timeInMilliseconds</td><td>ç»Ÿè®¡æ—¶é—´çª—ã€‚</td></tr><tr><td>circuitBreaker.sleepWindowInMilliseconds</td><td>ä¼‘çœ æ—¶é—´çª—ï¼Œç†”æ–­å¼€å¯çŠ¶æ€æŒç»­ä¸€æ®µæ—¶é—´åï¼Œç†”æ–­å™¨ä¼šè‡ªåŠ¨è¿›å…¥åŠç†”æ–­çŠ¶æ€ï¼Œè¿™æ®µæ—¶é—´å°±è¢«ç§°ä¸ºä¼‘çœ çª—å£æœŸã€‚</td></tr><tr><td>circuitBreaker.requestVolumeThreshold</td><td>è¯·æ±‚æ€»æ•°é˜€å€¼ã€‚ åœ¨ç»Ÿè®¡æ—¶é—´çª—å†…ï¼Œè¯·æ±‚æ€»æ•°å¿…é¡»åˆ°è¾¾ä¸€å®šçš„æ•°é‡çº§ï¼ŒHystrix æ‰å¯èƒ½ä¼šå°†ç†”æ–­å™¨æ‰“å¼€è¿›å…¥ç†”æ–­å¼€å¯è½¬æ€ï¼Œè€Œè¿™ä¸ªè¯·æ±‚æ•°é‡çº§å°±æ˜¯ è¯·æ±‚æ€»æ•°é˜€å€¼ã€‚Hystrix è¯·æ±‚æ€»æ•°é˜ˆå€¼é»˜è®¤ä¸º 20ï¼Œè¿™å°±æ„å‘³ç€åœ¨ç»Ÿè®¡æ—¶é—´çª—å†…ï¼Œå¦‚æœæœåŠ¡è°ƒç”¨æ¬¡æ•°ä¸è¶³ 20 æ¬¡ï¼Œå³ä½¿æ‰€æœ‰çš„è¯·æ±‚éƒ½è°ƒç”¨å‡ºé”™ï¼Œç†”æ–­å™¨ä¹Ÿä¸ä¼šæ‰“å¼€ã€‚</td></tr><tr><td>circuitBreaker.errorThresholdPercentage</td><td>é”™è¯¯ç™¾åˆ†æ¯”é˜ˆå€¼ã€‚ å½“è¯·æ±‚æ€»æ•°åœ¨ç»Ÿè®¡æ—¶é—´çª—å†…è¶…è¿‡äº†è¯·æ±‚æ€»æ•°é˜€å€¼ï¼Œä¸”è¯·æ±‚è°ƒç”¨å‡ºé”™ç‡è¶…è¿‡ä¸€å®šçš„æ¯”ä¾‹ï¼Œç†”æ–­å™¨æ‰ä¼šæ‰“å¼€è¿›å…¥ç†”æ–­å¼€å¯è½¬æ€ï¼Œè€Œè¿™ä¸ªæ¯”ä¾‹å°±æ˜¯é”™è¯¯ç™¾åˆ†æ¯”é˜ˆå€¼ã€‚é”™è¯¯ç™¾åˆ†æ¯”é˜ˆå€¼è®¾ç½®ä¸º 50ï¼Œå°±è¡¨ç¤ºé”™è¯¯ç™¾åˆ†æ¯”ä¸º 50%ï¼Œå¦‚æœæœåŠ¡å‘ç”Ÿäº† 30 æ¬¡è°ƒç”¨ï¼Œå…¶ä¸­æœ‰ 15 æ¬¡å‘ç”Ÿäº†é”™è¯¯ï¼Œå³è¶…è¿‡äº† 50% çš„é”™è¯¯ç™¾åˆ†æ¯”ï¼Œè¿™æ—¶å€™å°†ç†”æ–­å™¨å°±ä¼šæ‰“å¼€ã€‚</td></tr></tbody></table><p>å½“æµè§ˆå™¨å¤šæ¬¡ï¼ˆè°ƒç”¨æ¬¡æ•°å¤§äºè¯·æ±‚æ€»æ•°é˜€å€¼ï¼‰è®¿é—®â€œhttp://localhost/payment/consumer/hystrix/testHystrixCircuitBreaker/-1â€ï¼Œ</p><p>ä½¿<strong>è°ƒç”¨å‡ºé”™ç‡å¤§äºé”™è¯¯ç™¾åˆ†æ¯”é˜€å€¼</strong></p><p><strong>ç†”æ–­å™¨</strong>è¿›å…¥<strong>opençŠ¶æ€</strong></p><p><strong>ä¸€æ®µæ—¶é—´åç†”æ–­å™¨ä¼šè¿›å…¥åŠç†”æ–­çŠ¶æ€</strong></p><p>å½“æœåŠ¡è°ƒç”¨<strong>æ­£ç¡®ç‡ä¸Šå‡åˆ°ä¸€å®šçš„åˆ©ç‡å</strong>ï¼ŒHystrix <strong>è¿›å…¥ç†”æ–­å…³é—­çŠ¶æ€</strong></p><h3 id="hystrix-æ•…éšœç›‘æ§" tabindex="-1"><a class="header-anchor" href="#hystrix-æ•…éšœç›‘æ§" aria-hidden="true">#</a> Hystrix æ•…éšœç›‘æ§</h3><p>Hystrix è¿˜æä¾›äº†å‡†å®æ—¶çš„è°ƒç”¨ç›‘æ§ï¼ˆHystrix Dashboardï¼‰åŠŸèƒ½ï¼ŒHystrix ä¼šæŒç»­åœ°è®°å½•æ‰€æœ‰é€šè¿‡ Hystrix å‘èµ·çš„è¯·æ±‚çš„æ‰§è¡Œä¿¡æ¯ï¼Œå¹¶ä»¥ç»Ÿè®¡æŠ¥è¡¨çš„å½¢å¼å±•ç¤ºç»™ç”¨æˆ·ï¼ŒåŒ…æ‹¬æ¯ç§’æ‰§è¡Œè¯·æ±‚çš„æ•°é‡ã€æˆåŠŸè¯·æ±‚çš„æ•°é‡å’Œå¤±è´¥è¯·æ±‚çš„æ•°é‡ç­‰</p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209231533326.png" alt="image-20221209231533326"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209231621805.png" alt="image-20221209231621805"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209231636471.png" alt="image-20221209231636471"></p><p>http://localhost:80/hystrixç†”æ–­å™¨ç›‘æ§é¡µé¢</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209231955866.png" alt="image-20221209231955866"></p><p>http://localhost:8001//actuator/hystrix.streamç›‘æ§åœ°å€</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209232142875.png" alt="image-20221209232142875"></p><p>è¿›è¡Œç›‘æ§</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221209232259867.png" alt="image-20221209232259867"></p><h2 id="æœåŠ¡ç½‘å…³" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç½‘å…³" aria-hidden="true">#</a> æœåŠ¡ç½‘å…³</h2><p>API ç½‘å…³æ˜¯ä¸€ä¸ªæ­å»ºåœ¨<strong>å®¢æˆ·ç«¯å’Œå¾®æœåŠ¡ä¹‹é—´çš„æœåŠ¡</strong>ï¼Œæˆ‘ä»¬<strong>å¯ä»¥åœ¨ API ç½‘å…³ä¸­å¤„ç†ä¸€äº›éä¸šåŠ¡åŠŸèƒ½çš„é€»è¾‘ï¼Œä¾‹å¦‚æƒé™éªŒè¯ã€ç›‘æ§ã€ç¼“å­˜ã€è¯·æ±‚è·¯ç”±ç­‰ã€‚</strong></p><p>API ç½‘å…³å°±åƒæ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿçš„é—¨é¢ä¸€æ ·ï¼Œæ˜¯<strong>ç³»ç»Ÿå¯¹å¤–çš„å”¯ä¸€å…¥å£</strong>ã€‚æœ‰äº†å®ƒï¼Œ<strong>å®¢æˆ·ç«¯ä¼šå…ˆå°†è¯·æ±‚å‘é€åˆ° API ç½‘å…³</strong>ï¼Œç„¶å<strong>ç”± API ç½‘å…³æ ¹æ®è¯·æ±‚çš„æ ‡è¯†ä¿¡æ¯å°†è¯·æ±‚è½¬å‘åˆ°å¾®æœåŠ¡å®ä¾‹</strong>ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211093258875.png" alt="image-20221211093258875"></p><p>å¯¹äºæœåŠ¡æ•°é‡ä¼—å¤šã€å¤æ‚åº¦è¾ƒé«˜ã€è§„æ¨¡æ¯”è¾ƒå¤§çš„ç³»ç»Ÿæ¥è¯´ï¼Œä½¿ç”¨ API ç½‘å…³å…·æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ul><li>å®¢æˆ·ç«¯é€šè¿‡ API ç½‘å…³ä¸å¾®æœåŠ¡äº¤äº’æ—¶ï¼Œ<strong>å®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“ API ç½‘å…³åœ°å€å³å¯</strong>ï¼Œè€Œä¸éœ€è¦ç»´æŠ¤å¤§é‡çš„æœåŠ¡åœ°å€ï¼Œç®€åŒ–äº†å®¢æˆ·ç«¯çš„å¼€å‘ã€‚</li><li><strong>å®¢æˆ·ç«¯ç›´æ¥ä¸ API ç½‘å…³é€šä¿¡</strong>ï¼Œèƒ½å¤Ÿå‡å°‘å®¢æˆ·ç«¯ä¸å„ä¸ªæœåŠ¡çš„äº¤äº’æ¬¡æ•°ã€‚</li><li><strong>å®¢æˆ·ç«¯ä¸åç«¯çš„æœåŠ¡è€¦åˆåº¦é™ä½</strong>ã€‚</li><li><strong>èŠ‚çœæµé‡ï¼Œæé«˜æ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</strong>ã€‚</li><li>API ç½‘å…³è¿˜æä¾›äº†<strong>å®‰å…¨</strong>ã€<strong>æµæ§</strong>ã€<strong>è¿‡æ»¤</strong>ã€<strong>ç¼“å­˜</strong>ã€<strong>è®¡è´¹</strong>ä»¥åŠ<strong>ç›‘æ§</strong>ç­‰ API ç®¡ç†åŠŸèƒ½ã€‚</li></ul><h3 id="zuul" tabindex="-1"><a class="header-anchor" href="#zuul" aria-hidden="true">#</a> Zuul</h3><h3 id="gatewayâ˜†" tabindex="-1"><a class="header-anchor" href="#gatewayâ˜†" aria-hidden="true">#</a> Gatewayâ˜†</h3><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-starter" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Spring Cloud Gateway æ˜¯ Spring Cloud å›¢é˜ŸåŸºäº Spring 5.0ã€Spring Boot 2.0 å’Œ Project Reactor ç­‰æŠ€æœ¯å¼€å‘çš„é«˜æ€§èƒ½ API ç½‘å…³ç»„ä»¶ã€‚</p><p>Spring Cloud Gateway æ—¨åœ¨æä¾›ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„é€”å¾„æ¥å‘é€ APIï¼Œå¹¶ä¸ºå®ƒä»¬æä¾›æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œä¾‹å¦‚ï¼šå®‰å…¨æ€§ï¼Œç›‘æ§/æŒ‡æ ‡å’Œå¼¹æ€§ã€‚</p><blockquote><p>Spring Cloud Gateway æ˜¯åŸºäº <strong>WebFlux æ¡†æ¶</strong>å®ç°çš„ï¼Œè€Œ WebFlux æ¡†æ¶åº•å±‚åˆ™ä½¿ç”¨äº†<strong>é«˜æ€§èƒ½çš„ Reactor æ¨¡å¼é€šä¿¡æ¡†æ¶ Netty</strong>ã€‚</p></blockquote><h4 id="spring-cloud-gateway-æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#spring-cloud-gateway-æ ¸å¿ƒæ¦‚å¿µ" aria-hidden="true">#</a> <strong>Spring Cloud Gateway æ ¸å¿ƒæ¦‚å¿µ</strong></h4><table><thead><tr><th>æ ¸å¿ƒæ¦‚å¿µ</th><th>æè¿°</th></tr></thead><tbody><tr><td>Routeï¼ˆè·¯ç”±ï¼‰</td><td>ç½‘å…³æœ€åŸºæœ¬çš„æ¨¡å—ã€‚å®ƒç”±ä¸€ä¸ª IDã€ä¸€ä¸ªç›®æ ‡ URIã€ä¸€ç»„æ–­è¨€ï¼ˆPredicateï¼‰å’Œä¸€ç»„è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ç»„æˆã€‚</td></tr><tr><td>Predicateï¼ˆæ–­è¨€ï¼‰</td><td>è·¯ç”±è½¬å‘çš„åˆ¤æ–­æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Predicate å¯¹ HTTP è¯·æ±‚è¿›è¡ŒåŒ¹é…ï¼Œä¾‹å¦‚è¯·æ±‚æ–¹å¼ã€è¯·æ±‚è·¯å¾„ã€è¯·æ±‚å¤´ã€å‚æ•°ç­‰ï¼Œå¦‚æœè¯·æ±‚ä¸æ–­è¨€åŒ¹é…æˆåŠŸï¼Œåˆ™å°†è¯·æ±‚è½¬å‘åˆ°ç›¸åº”çš„æœåŠ¡ã€‚</td></tr><tr><td>Filterï¼ˆè¿‡æ»¤å™¨ï¼‰</td><td>è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒå¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªå’Œä¿®æ”¹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®ƒå¯¹ä¸Šæ–‡çš„å“åº”è¿›è¡Œå†å¤„ç†ã€‚</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼šå…¶ä¸­ Route å’Œ Predicate å¿…é¡»åŒæ—¶å£°æ˜ã€‚</p></blockquote><h4 id="spring-cloud-gateway-çš„ç‰¹å¾" tabindex="-1"><a class="header-anchor" href="#spring-cloud-gateway-çš„ç‰¹å¾" aria-hidden="true">#</a> <strong>Spring Cloud Gateway çš„ç‰¹å¾</strong></h4><ul><li>åŸºäº Spring Framework 5ã€Project Reactor å’Œ Spring Boot 2.0 æ„å»ºã€‚</li><li>èƒ½å¤Ÿåœ¨ä»»æ„è¯·æ±‚å±æ€§ä¸ŠåŒ¹é…è·¯ç”±ã€‚</li><li>predicatesï¼ˆæ–­è¨€ï¼‰ å’Œ filtersï¼ˆè¿‡æ»¤å™¨ï¼‰æ˜¯ç‰¹å®šäºè·¯ç”±çš„ã€‚</li><li>é›†æˆäº† Hystrix ç†”æ–­å™¨ã€‚</li><li>é›†æˆäº† Spring Cloud DiscoveryClientï¼ˆæœåŠ¡å‘ç°å®¢æˆ·ç«¯ï¼‰ã€‚</li><li>æ˜“äºç¼–å†™æ–­è¨€å’Œè¿‡æ»¤å™¨ã€‚</li><li>èƒ½å¤Ÿé™åˆ¶è¯·æ±‚é¢‘ç‡ã€‚</li><li>èƒ½å¤Ÿé‡å†™è¯·æ±‚è·¯å¾„ã€‚</li></ul><h4 id="gateway-çš„å·¥ä½œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#gateway-çš„å·¥ä½œæµç¨‹" aria-hidden="true">#</a> Gateway çš„å·¥ä½œæµç¨‹</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211093743684.png" alt="image-20221211093743684"></p><p>Spring Cloud Gateway å·¥ä½œæµç¨‹è¯´æ˜å¦‚ä¸‹ï¼š</p><ol><li>å®¢æˆ·ç«¯å°†è¯·æ±‚å‘é€åˆ° Spring Cloud Gateway ä¸Šã€‚</li><li>Spring Cloud Gateway é€šè¿‡ Gateway Handler Mapping æ‰¾åˆ°ä¸è¯·æ±‚ç›¸åŒ¹é…çš„è·¯ç”±ï¼Œå°†å…¶å‘é€ç»™ Gateway Web Handlerã€‚</li><li>Gateway Web Handler é€šè¿‡æŒ‡å®šçš„è¿‡æ»¤å™¨é“¾ï¼ˆFilter Chainï¼‰ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°å®é™…çš„æœåŠ¡èŠ‚ç‚¹ä¸­ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘è¿”å›å“åº”ç»“æœã€‚</li><li>è¿‡æ»¤å™¨ä¹‹é—´ç”¨è™šçº¿åˆ†å¼€æ˜¯å› ä¸ºè¿‡æ»¤å™¨å¯èƒ½ä¼šåœ¨è½¬å‘è¯·æ±‚ä¹‹å‰ï¼ˆpreï¼‰æˆ–ä¹‹åï¼ˆpostï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</li><li>è¿‡æ»¤å™¨ï¼ˆFilterï¼‰å¯ä»¥åœ¨è¯·æ±‚è¢«è½¬å‘åˆ°æœåŠ¡ç«¯å‰ï¼Œå¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªå’Œä¿®æ”¹ï¼Œä¾‹å¦‚å‚æ•°æ ¡éªŒã€æƒé™æ ¡éªŒã€æµé‡ç›‘æ§ã€æ—¥å¿—è¾“å‡ºä»¥åŠåè®®è½¬æ¢ç­‰ã€‚</li><li>è¿‡æ»¤å™¨å¯ä»¥åœ¨å“åº”è¿”å›å®¢æˆ·ç«¯ä¹‹å‰ï¼Œå¯¹å“åº”è¿›è¡Œæ‹¦æˆªå’Œå†å¤„ç†ï¼Œä¾‹å¦‚ä¿®æ”¹å“åº”å†…å®¹æˆ–å“åº”å¤´ã€æ—¥å¿—è¾“å‡ºã€æµé‡ç›‘æ§ç­‰ã€‚</li><li>å“åº”åŸè·¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><p>æ€»è€Œè¨€ä¹‹ï¼Œå®¢æˆ·ç«¯å‘é€åˆ° Spring Cloud Gateway çš„è¯·æ±‚éœ€è¦é€šè¿‡ä¸€å®šçš„åŒ¹é…æ¡ä»¶ï¼Œæ‰èƒ½å®šä½åˆ°çœŸæ­£çš„æœåŠ¡èŠ‚ç‚¹ã€‚åœ¨å°†è¯·æ±‚è½¬å‘åˆ°æœåŠ¡è¿›è¡Œå¤„ç†çš„è¿‡ç¨‹å‰åï¼ˆpre å’Œ postï¼‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œä¸€äº›ç²¾ç»†åŒ–æ§åˆ¶ã€‚</p><p>Predicate å°±æ˜¯è·¯ç”±çš„åŒ¹é…æ¡ä»¶ï¼Œè€Œ Filter å°±æ˜¯å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶çš„å·¥å…·ã€‚æœ‰äº†è¿™ä¸¤ä¸ªå…ƒç´ ï¼Œå†åŠ ä¸Šç›®æ ‡ URIï¼Œå°±å¯ä»¥å®ç°ä¸€ä¸ªå…·ä½“çš„è·¯ç”±äº†ã€‚</p><h4 id="predicate-æ–­è¨€" tabindex="-1"><a class="header-anchor" href="#predicate-æ–­è¨€" aria-hidden="true">#</a> Predicate æ–­è¨€</h4><p>Spring Cloud Gateway é€šè¿‡ Predicate æ–­è¨€æ¥å®ç° <strong>Route è·¯ç”±çš„åŒ¹é…è§„åˆ™</strong>ã€‚ç®€å•ç‚¹è¯´ï¼ŒPredicate æ˜¯è·¯ç”±è½¬å‘çš„åˆ¤æ–­æ¡ä»¶ï¼Œ<strong>è¯·æ±‚åªæœ‰æ»¡è¶³äº† Predicate çš„æ¡ä»¶ï¼Œæ‰ä¼šè¢«è½¬å‘åˆ°æŒ‡å®šçš„æœåŠ¡ä¸Šè¿›è¡Œå¤„ç†</strong>ã€‚</p><p>ä½¿ç”¨ Predicate æ–­è¨€éœ€è¦æ³¨æ„ä»¥ä¸‹ 3 ç‚¹ï¼š</p><ul><li>Route è·¯ç”±ä¸ Predicate æ–­è¨€çš„å¯¹åº”å…³ç³»ä¸ºâ€œä¸€å¯¹å¤šâ€ï¼Œä¸€ä¸ªè·¯ç”±å¯ä»¥åŒ…å«å¤šä¸ªä¸åŒæ–­è¨€ã€‚</li><li>ä¸€ä¸ªè¯·æ±‚æƒ³è¦è½¬å‘åˆ°æŒ‡å®šçš„è·¯ç”±ä¸Šï¼Œå°±å¿…é¡»åŒæ—¶åŒ¹é…è·¯ç”±ä¸Šçš„æ‰€æœ‰æ–­è¨€ã€‚</li><li>å½“ä¸€ä¸ªè¯·æ±‚åŒæ—¶æ»¡è¶³å¤šä¸ªè·¯ç”±çš„æ–­è¨€æ¡ä»¶æ—¶ï¼Œè¯·æ±‚åªä¼šè¢«é¦–ä¸ªæˆåŠŸåŒ¹é…çš„è·¯ç”±è½¬å‘ã€‚</li></ul><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211093843797.png" alt="image-20221211093843797"></p><p>å¸¸è§çš„ Predicate æ–­è¨€å¦‚ä¸‹è¡¨ï¼ˆå‡è®¾è½¬å‘çš„ URI ä¸º http://localhost:8001ï¼‰ã€‚</p><table><thead><tr><th>æ–­è¨€</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Path</td><td>- Path=/dept/list/**</td><td>å½“è¯·æ±‚è·¯å¾„ä¸ /dept/list/** åŒ¹é…æ—¶ï¼Œè¯¥è¯·æ±‚æ‰èƒ½è¢«è½¬å‘åˆ° http://localhost:8001 ä¸Šã€‚</td></tr><tr><td>Before</td><td>- Before=2021-10-20T11:47:34.255+08:00[Asia/Shanghai]</td><td>åœ¨ 2021 å¹´ 10 æœˆ 20 æ—¥ 11 æ—¶ 47 åˆ† 34.255 ç§’ä¹‹å‰çš„è¯·æ±‚ï¼Œæ‰ä¼šè¢«è½¬å‘åˆ° http://localhost:8001 ä¸Šã€‚</td></tr><tr><td>After</td><td>- After=2021-10-20T11:47:34.255+08:00[Asia/Shanghai]</td><td>åœ¨ 2021 å¹´ 10 æœˆ 20 æ—¥ 11 æ—¶ 47 åˆ† 34.255 ç§’ä¹‹åçš„è¯·æ±‚ï¼Œæ‰ä¼šè¢«è½¬å‘åˆ° http://localhost:8001 ä¸Šã€‚</td></tr><tr><td>Between</td><td>- Between=2021-10-20T15:18:33.226+08:00[Asia/Shanghai],2021-10-20T15:23:33.226+08:00[Asia/Shanghai]</td><td>åœ¨ 2021 å¹´ 10 æœˆ 20 æ—¥ 15 æ—¶ 18 åˆ† 33.226 ç§’ åˆ° 2021 å¹´ 10 æœˆ 20 æ—¥ 15 æ—¶ 23 åˆ† 33.226 ç§’ä¹‹é—´çš„è¯·æ±‚ï¼Œæ‰ä¼šè¢«è½¬å‘åˆ° http://localhost:8001 æœåŠ¡å™¨ä¸Šã€‚</td></tr><tr><td>Cookie</td><td>- Cookie=name,c.biancheng.net</td><td>æºå¸¦ Cookie ä¸” Cookie çš„å†…å®¹ä¸º name=c.biancheng.net çš„è¯·æ±‚ï¼Œæ‰ä¼šè¢«è½¬å‘åˆ° http://localhost:8001 ä¸Šã€‚</td></tr><tr><td>Header</td><td>- Header=X-Request-Id,\d+</td><td>è¯·æ±‚å¤´ä¸Šæºå¸¦å±æ€§ X-Request-Id ä¸”å±æ€§å€¼ä¸ºæ•´æ•°çš„è¯·æ±‚ï¼Œæ‰ä¼šè¢«è½¬å‘åˆ° http://localhost:8001 ä¸Šã€‚</td></tr><tr><td>Method</td><td>- Method=GET</td><td>åªæœ‰ GET è¯·æ±‚æ‰ä¼šè¢«è½¬å‘åˆ° http://localhost:8001 ä¸Šã€‚</td></tr></tbody></table><h4 id="instance" tabindex="-1"><a class="header-anchor" href="#instance" aria-hidden="true">#</a> instance</h4><p>pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code> 		<span class="token comment">&lt;!--ç‰¹åˆ«æ³¨æ„ï¼šåœ¨ gateway ç½‘å…³æœåŠ¡ä¸­ä¸èƒ½å¼•å…¥ spring-boot-starter-web çš„ä¾èµ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™--&gt;</span>
        <span class="token comment">&lt;!-- Spring cloud gateway ç½‘å…³ä¾èµ–--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211093953594.png" alt="image-20221211093953594"></p><p>åœ¨ gatewayï¼ˆåº•å±‚ä½¿ç”¨nettyï¼‰ ç½‘å…³æœåŠ¡ä¸­<strong>ä¸èƒ½å¼•å…¥ spring-boot-starter-web çš„ä¾èµ–</strong>ï¼ˆåº•å±‚é»˜è®¤ä½¿ç”¨tomcatæœåŠ¡å™¨ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><p>application.yml</p><p>åŠ¨æ€è·¯ç”±</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Cloud Gateway ä¼šæ ¹æ®æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆä¾‹å¦‚ Eureka Serverï¼‰ä¸­ç»´æŠ¤çš„æœåŠ¡åˆ—è¡¨ï¼Œä»¥æœåŠ¡åï¼ˆspring.application.nameï¼‰ä½œä¸ºè·¯å¾„åˆ›å»ºåŠ¨æ€è·¯ç”±è¿›è¡Œè½¬å‘ï¼Œä»è€Œå®ç°åŠ¨æ€è·¯ç”±åŠŸèƒ½ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211094109639.png" alt="image-20221211094109639"></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9527</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">locator</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#å¼€å¯ä»æ³¨å†Œä¸­å¿ƒåŠ¨æ€åˆ›å»ºè·¯ç”±çš„åŠŸèƒ½ï¼Œåˆ©ç”¨å¾®æœåŠ¡åè¿›è¡Œè·¯ç”±</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh <span class="token comment">#payment_route    #è·¯ç”±çš„IDï¼Œæ²¡æœ‰å›ºå®šè§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å</span>
          <span class="token comment">#uri: http://localhost:8001          #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//CLOUD<span class="token punctuation">-</span>PAYMENT<span class="token punctuation">-</span>HYSTRIX<span class="token punctuation">-</span>SERVICE <span class="token comment">#åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/query/<span class="token important">**</span>         <span class="token comment"># æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±</span>

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh2 <span class="token comment">#payment_route    #è·¯ç”±çš„IDï¼Œæ²¡æœ‰å›ºå®šè§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å</span>
          <span class="token comment">#uri: http://localhost:8001          #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//CLOUD<span class="token punctuation">-</span>PAYMENT<span class="token punctuation">-</span>HYSTRIX<span class="token punctuation">-</span>SERVICE <span class="token comment">#åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/definitionLB         <span class="token comment"># æ–­è¨€ï¼Œè·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">#è¡¨ç¤ºæ˜¯å¦å°†è‡ªå·±æ³¨å†Œè¿›EurekaServeré»˜è®¤ä¸ºtrueã€‚</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment">#æ˜¯å¦ä»EurekaServeræŠ“å–å·²æœ‰çš„æ³¨å†Œä¿¡æ¯ï¼Œé»˜è®¤ä¸ºtrueã€‚å•èŠ‚ç‚¹æ— æ‰€è°“ï¼Œé›†ç¾¤å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½é…åˆribbonä½¿ç”¨è´Ÿè½½å‡è¡¡</span>
    <span class="token key atrule">fetchRegistry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">#å•æœºç‰ˆ</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token comment">#æœåŠ¡å™¨å®ä¾‹åç§°</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> gateway9527
    <span class="token comment">#è®¿é—®è·¯å¾„å¯ä»¥æ˜¾ç¤ºIPåœ°å€</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#Eurekaå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’(é»˜è®¤æ˜¯30ç§’)</span>
    <span class="token comment">#lease-renewal-interval-in-seconds: 1</span>
    <span class="token comment">#EurekaæœåŠ¡ç«¯åœ¨æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ä¸ºç§’(é»˜è®¤æ˜¯90ç§’)ï¼Œè¶…æ—¶å°†å‰”é™¤æœåŠ¡</span>
    <span class="token comment">#lease-expiration-duration-in-seconds: 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211094244742.png" alt="image-20221211094244742"></p><p>run</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211094312550.png" alt="image-20221211094312550"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211234307491.png" alt="image-20221211234307491"></p><h4 id="filter" tabindex="-1"><a class="header-anchor" href="#filter" aria-hidden="true">#</a> Filter</h4><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå‡ºäº<strong>å®‰å…¨æ–¹é¢çš„è€ƒè™‘</strong>ï¼Œ<strong>æœåŠ¡ç«¯</strong>æä¾›çš„æœåŠ¡å¾€å¾€éƒ½ä¼šæœ‰ä¸€å®šçš„<strong>æ ¡éªŒé€»è¾‘</strong>ï¼Œä¾‹å¦‚ç”¨æˆ·<strong>ç™»é™†çŠ¶æ€æ ¡éªŒã€ç­¾åæ ¡éªŒ</strong>ç­‰ã€‚</p><p>Spring Cloud Gateway æä¾›äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¿‡æ»¤å™¨ï¼Œå¯ä»¥å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶ã€‚</p><table><thead><tr><th>è¿‡æ»¤å™¨ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Pre ç±»å‹</td><td>è¿™ç§è¿‡æ»¤å™¨åœ¨è¯·æ±‚è¢«è½¬å‘åˆ°å¾®æœåŠ¡ä¹‹å‰å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªå’Œä¿®æ”¹ï¼Œä¾‹å¦‚å‚æ•°æ ¡éªŒã€æƒé™æ ¡éªŒã€æµé‡ç›‘æ§ã€æ—¥å¿—è¾“å‡ºä»¥åŠåè®®è½¬æ¢ç­‰æ“ä½œã€‚</td></tr><tr><td>Post ç±»å‹</td><td>è¿™ç§è¿‡æ»¤å™¨åœ¨å¾®æœåŠ¡å¯¹è¯·æ±‚åšå‡ºå“åº”åå¯ä»¥å¯¹å“åº”è¿›è¡Œæ‹¦æˆªå’Œå†å¤„ç†ï¼Œä¾‹å¦‚ä¿®æ”¹å“åº”å†…å®¹æˆ–å“åº”å¤´ã€æ—¥å¿—è¾“å‡ºã€æµé‡ç›‘æ§ç­‰ã€‚</td></tr><tr><td>æŒ‰ç…§ä½œç”¨èŒƒå›´åˆ’åˆ†ï¼ŒSpring Cloud gateway çš„ Filter å¯ä»¥åˆ†ä¸º 2 ç±»ï¼š</td><td></td></tr></tbody></table><ul><li>GatewayFilterï¼šåº”ç”¨åœ¨å•ä¸ªè·¯ç”±æˆ–è€…ä¸€ç»„è·¯ç”±ä¸Šçš„è¿‡æ»¤å™¨ã€‚</li><li>GlobalFilterï¼šåº”ç”¨åœ¨æ‰€æœ‰çš„è·¯ç”±ä¸Šçš„è¿‡æ»¤å™¨ã€‚</li></ul><h5 id="gatewayfilter" tabindex="-1"><a class="header-anchor" href="#gatewayfilter" aria-hidden="true">#</a> GatewayFilter</h5><p><strong>GatewayFilter</strong> æ˜¯ Spring Cloud Gateway ç½‘å…³ä¸­æä¾›çš„ä¸€ç§åº”ç”¨åœ¨å•ä¸ªæˆ–ä¸€ç»„è·¯ç”±ä¸Šçš„è¿‡æ»¤å™¨ã€‚å®ƒå¯ä»¥å¯¹å•ä¸ªè·¯ç”±æˆ–è€…ä¸€ç»„è·¯ç”±ä¸Šä¼ å…¥çš„è¯·æ±‚å’Œä¼ å‡ºå“åº”è¿›è¡Œæ‹¦æˆªï¼Œå¹¶å®ç°ä¸€äº›ä¸ä¸šåŠ¡æ— å…³çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç™»é™†çŠ¶æ€æ ¡éªŒã€ç­¾åæ ¡éªŒã€æƒé™æ ¡éªŒã€æ—¥å¿—è¾“å‡ºã€æµé‡ç›‘æ§ç­‰ã€‚</p><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Spring Cloud Gateway å†…ç½®äº†å¤šè¾¾ 31 ç§ GatewayFilterï¼Œä¸‹è¡¨ä¸­åˆ—ä¸¾äº†å‡ ç§å¸¸ç”¨çš„ç½‘å…³è¿‡æ»¤å™¨åŠå…¶ä½¿ç”¨ç¤ºä¾‹ã€‚</p><table><thead><tr><th>è·¯ç”±è¿‡æ»¤å™¨</th><th>æè¿°</th><th>å‚æ•°</th><th>ä½¿ç”¨ç¤ºä¾‹</th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>æ‹¦æˆªä¼ å…¥çš„è¯·æ±‚ï¼Œå¹¶åœ¨è¯·æ±‚ä¸Šæ·»åŠ ä¸€ä¸ªæŒ‡å®šçš„è¯·æ±‚å¤´å‚æ•°ã€‚</td><td>nameï¼šéœ€è¦æ·»åŠ çš„è¯·æ±‚å¤´å‚æ•°çš„ keyï¼› valueï¼šéœ€è¦æ·»åŠ çš„è¯·æ±‚å¤´å‚æ•°çš„ valueã€‚</td><td>- AddRequestHeader=my-request-header,1024</td></tr><tr><td>AddRequestParameter</td><td>æ‹¦æˆªä¼ å…¥çš„è¯·æ±‚ï¼Œå¹¶åœ¨è¯·æ±‚ä¸Šæ·»åŠ ä¸€ä¸ªæŒ‡å®šçš„è¯·æ±‚å‚æ•°ã€‚</td><td>nameï¼šéœ€è¦æ·»åŠ çš„è¯·æ±‚å‚æ•°çš„ keyï¼› valueï¼šéœ€è¦æ·»åŠ çš„è¯·æ±‚å‚æ•°çš„ valueã€‚</td><td>- AddRequestParameter=my-request-param,c.biancheng.net</td></tr><tr><td>AddResponseHeader</td><td>æ‹¦æˆªå“åº”ï¼Œå¹¶åœ¨å“åº”ä¸Šæ·»åŠ ä¸€ä¸ªæŒ‡å®šçš„å“åº”å¤´å‚æ•°ã€‚</td><td>nameï¼šéœ€è¦æ·»åŠ çš„å“åº”å¤´çš„ keyï¼› valueï¼šéœ€è¦æ·»åŠ çš„å“åº”å¤´çš„ valueã€‚</td><td>- AddResponseHeader=my-response-header,c.biancheng.net</td></tr><tr><td>PrefixPath</td><td>æ‹¦æˆªä¼ å…¥çš„è¯·æ±‚ï¼Œå¹¶åœ¨è¯·æ±‚è·¯å¾„å¢åŠ ä¸€ä¸ªæŒ‡å®šçš„å‰ç¼€ã€‚</td><td>prefixï¼šéœ€è¦å¢åŠ çš„è·¯å¾„å‰ç¼€ã€‚</td><td>- PrefixPath=/consumer</td></tr><tr><td>PreserveHostHeader</td><td>è½¬å‘è¯·æ±‚æ—¶ï¼Œä¿æŒå®¢æˆ·ç«¯çš„ Host ä¿¡æ¯ä¸å˜ï¼Œç„¶åå°†å®ƒä¼ é€’åˆ°æä¾›å…·ä½“æœåŠ¡çš„å¾®æœåŠ¡ä¸­ã€‚</td><td>æ— </td><td>- PreserveHostHeader</td></tr><tr><td>RemoveRequestHeader</td><td>ç§»é™¤è¯·æ±‚å¤´ä¸­æŒ‡å®šçš„å‚æ•°ã€‚</td><td>nameï¼šéœ€è¦ç§»é™¤çš„è¯·æ±‚å¤´çš„ keyã€‚</td><td>- RemoveRequestHeader=my-request-header</td></tr><tr><td>RemoveResponseHeader</td><td>ç§»é™¤å“åº”å¤´ä¸­æŒ‡å®šçš„å‚æ•°ã€‚</td><td>nameï¼šéœ€è¦ç§»é™¤çš„å“åº”å¤´ã€‚</td><td>- RemoveResponseHeader=my-response-header</td></tr><tr><td>RemoveRequestParameter</td><td>ç§»é™¤æŒ‡å®šçš„è¯·æ±‚å‚æ•°ã€‚</td><td>nameï¼šéœ€è¦ç§»é™¤çš„è¯·æ±‚å‚æ•°ã€‚</td><td>- RemoveRequestParameter=my-request-param</td></tr><tr><td>RequestSize</td><td>é…ç½®è¯·æ±‚ä½“çš„å¤§å°ï¼Œå½“è¯·æ±‚ä½“è¿‡å¤§æ—¶ï¼Œå°†ä¼šè¿”å› 413 Payload Too Largeã€‚</td><td>maxSizeï¼šè¯·æ±‚ä½“çš„å¤§å°ã€‚</td><td>- name: RequestSize args: maxSize: 5000000</td></tr></tbody></table><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span> 
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> xxxx
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> xxxx
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=xxxx
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> AddRequestParameter=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Id<span class="token punctuation">,</span><span class="token number">1024</span> <span class="token comment">#è¿‡æ»¤å™¨å·¥å‚ä¼šåœ¨åŒ¹é…çš„è¯·æ±‚å¤´åŠ ä¸Šä¸€å¯¹è¯·æ±‚å¤´ï¼Œåç§°ä¸º X-Request-Id å€¼ä¸º 1024</span>
            <span class="token punctuation">-</span> PrefixPath=/dept <span class="token comment">#åœ¨è¯·æ±‚è·¯å¾„å‰é¢åŠ ä¸Š /dept</span>
            â€¦â€¦
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="globalfilter" tabindex="-1"><a class="header-anchor" href="#globalfilter" aria-hidden="true">#</a> GlobalFilter</h5><p><strong>GlobalFilter</strong> æ˜¯ä¸€ç§ä½œç”¨äºæ‰€æœ‰çš„è·¯ç”±ä¸Šçš„å…¨å±€è¿‡æ»¤å™¨ï¼Œé€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€äº›ç»Ÿä¸€åŒ–çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œä¾‹å¦‚æƒé™è®¤è¯ã€IP è®¿é—®é™åˆ¶ç­‰ã€‚å½“æŸä¸ªè¯·æ±‚è¢«è·¯ç”±åŒ¹é…æ—¶ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ GlobalFilter ä¼šå’Œè¯¥è·¯ç”±è‡ªèº«é…ç½®çš„ GatewayFilter ç»„åˆæˆä¸€ä¸ªè¿‡æ»¤å™¨é“¾ã€‚</p><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#global-filters" target="_blank" rel="noopener noreferrer">Spring Cloud Gateway<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>é€šå¸¸æˆ‘ä»¬éƒ½ä¼šè‡ªå®šä¹‰ä¸€äº›è‡ªå·±çš„ GlobalFilter å…¨å±€è¿‡æ»¤å™¨ä»¥æ»¡è¶³æˆ‘ä»¬è‡ªèº«çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè€Œå¾ˆå°‘ç›´æ¥ä½¿ç”¨ Spring Cloud Config æä¾›è¿™äº›é»˜è®¤çš„ GlobalFilter</p><h5 id="è‡ªå®šä¹‰globalfilter" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰globalfilter" aria-hidden="true">#</a> è‡ªå®šä¹‰GlobalFilter</h5><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211101915576.png" alt="image-20221211101915576"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>eddie<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">GatewayFilterChain</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">GlobalFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Ordered</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ServerWebExchange</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 <span class="token keyword">@author</span> EddieZhang
 @create 2022-12-11 10:11
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¿›å…¥è‡ªå®šä¹‰çš„å…¨å±€è¿‡æ»¤å™¨ MyGlobalFilter&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;username can&#39;t empty!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_ACCEPTABLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//è¿‡æ»¤å™¨çš„é¡ºåºï¼Œ0 è¡¨ç¤ºç¬¬ä¸€ä¸ª</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211101942987.png" alt="image-20221211101942987"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211101953219.png" alt="image-20221211101953219"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211102006225.png" alt="image-20221211102006225"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211102014828.png" alt="image-20221211102014828"></p><h2 id="åˆ†å¸ƒå¼é…ç½®config" tabindex="-1"><a class="header-anchor" href="#åˆ†å¸ƒå¼é…ç½®config" aria-hidden="true">#</a> åˆ†å¸ƒå¼é…ç½®Config</h2><p>åœ¨åˆ†å¸ƒå¼å¾®æœåŠ¡ç³»ç»Ÿä¸­ï¼Œå‡ ä¹æ‰€æœ‰æœåŠ¡çš„è¿è¡Œéƒ½ç¦»ä¸å¼€é…ç½®æ–‡ä»¶çš„æ”¯æŒï¼Œè¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸ç”±å„ä¸ªæœåŠ¡è‡ªè¡Œç®¡ç†ï¼Œä»¥ properties æˆ– yml æ ¼å¼ä¿å­˜åœ¨å„ä¸ªå¾®æœåŠ¡çš„ç±»è·¯å¾„ä¸‹ï¼Œä¾‹å¦‚ application.properties æˆ– application.yml ç­‰ã€‚</p><p>è¿™ç§å°†é…ç½®æ–‡ä»¶æ•£è½åœ¨å„ä¸ªæœåŠ¡ä¸­çš„ç®¡ç†æ–¹å¼ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><strong>ç®¡ç†éš¾åº¦å¤§</strong>ï¼šé…ç½®æ–‡ä»¶æ•£è½åœ¨å„ä¸ªå¾®æœåŠ¡ä¸­ï¼Œéš¾ä»¥ç®¡ç†ã€‚</li><li><strong>å®‰å…¨æ€§ä½</strong>ï¼šé…ç½®è·Ÿéšæºä»£ç ä¿å­˜åœ¨ä»£ç åº“ä¸­ï¼Œå®¹æ˜“é€ æˆé…ç½®æ³„æ¼ã€‚</li><li><strong>æ—¶æ•ˆæ€§å·®</strong>ï¼šå¾®æœåŠ¡ä¸­çš„é…ç½®ä¿®æ”¹åï¼Œå¿…é¡»é‡å¯æœåŠ¡ï¼Œå¦åˆ™æ— æ³•ç”Ÿæ•ˆã€‚</li><li><strong>å±€é™æ€§æ˜æ˜¾</strong>ï¼šæ— æ³•æ”¯æŒåŠ¨æ€è°ƒæ•´ï¼Œä¾‹å¦‚æ—¥å¿—å¼€å…³ã€åŠŸèƒ½å¼€å…³ã€‚</li></ul><p>Spring Cloud Config å¯ä»¥å°†å„ä¸ªå¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªå¤–éƒ¨çš„å­˜å‚¨ä»“åº“æˆ–ç³»ç»Ÿï¼ˆä¾‹å¦‚ Git ã€SVN ç­‰ï¼‰ä¸­ï¼Œå¯¹é…ç½®çš„ç»Ÿä¸€ç®¡ç†ï¼Œä»¥æ”¯æŒå„ä¸ªå¾®æœåŠ¡çš„è¿è¡Œã€‚</p><p>Spring Cloud Config åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><strong>Config Serverï¼šä¹Ÿè¢«ç§°ä¸ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„å¾®æœåŠ¡åº”ç”¨ï¼Œç”¨æ¥è¿æ¥é…ç½®ä»“åº“å¹¶ä¸ºå®¢æˆ·ç«¯æä¾›è·å–é…ç½®ä¿¡æ¯ã€åŠ å¯†ä¿¡æ¯å’Œè§£å¯†ä¿¡æ¯çš„è®¿é—®æ¥å£ã€‚</li><li><strong>Config Clientï¼šæŒ‡çš„æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„å„ä¸ªå¾®æœåŠ¡</strong>ï¼Œå®ƒä»¬é€šè¿‡ Config Server å¯¹é…ç½®è¿›è¡Œç®¡ç†ï¼Œå¹¶ä» Config Sever ä¸­è·å–å’ŒåŠ è½½é…ç½®ä¿¡æ¯ã€‚</li></ul><p>Spring Cloud Config é»˜è®¤ä½¿ç”¨ Git å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œå› æ­¤ä½¿ç”¨ Spirng Cloud Config æ„å»ºçš„é…ç½®æœåŠ¡å™¨å¤©ç„¶å°±æ”¯æŒå¯¹å¾®æœåŠ¡é…ç½®çš„ç‰ˆæœ¬ç®¡ç†ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Git å®¢æˆ·ç«¯å·¥å…·æ–¹ä¾¿åœ°å¯¹é…ç½®å†…å®¹è¿›è¡Œç®¡ç†å’Œè®¿é—®ã€‚é™¤äº† Git å¤–ï¼ŒSpring Cloud Config è¿˜æä¾›äº†å¯¹å…¶ä»–å­˜å‚¨æ–¹å¼çš„æ”¯æŒï¼Œä¾‹å¦‚ SVNã€æœ¬åœ°åŒ–æ–‡ä»¶ç³»ç»Ÿç­‰ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211162758236.png" alt="image-20221211162758236"></p><h3 id="spring-cloud-config-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#spring-cloud-config-å·¥ä½œåŸç†" aria-hidden="true">#</a> Spring Cloud Config å·¥ä½œåŸç†</h3><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211162753971.png" alt="image-20221211162753971"></p><p>Spring Cloud Config å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>å¼€å‘æˆ–è¿ç»´äººå‘˜æäº¤é…ç½®æ–‡ä»¶åˆ°è¿œç¨‹çš„ Git ä»“åº“ã€‚</li><li>Config æœåŠ¡ç«¯ï¼ˆåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼‰è´Ÿè´£è¿æ¥é…ç½®ä»“åº“ Gitï¼Œå¹¶å¯¹ Config å®¢æˆ·ç«¯æš´éœ²è·å–é…ç½®çš„æ¥å£ã€‚</li><li>Config å®¢æˆ·ç«¯é€šè¿‡ Config æœåŠ¡ç«¯æš´éœ²å‡ºæ¥çš„æ¥å£ï¼Œæ‹‰å–é…ç½®ä»“åº“ä¸­çš„é…ç½®ã€‚</li><li>Config å®¢æˆ·ç«¯è·å–åˆ°é…ç½®ä¿¡æ¯ï¼Œä»¥æ”¯æŒæœåŠ¡çš„è¿è¡Œã€‚</li></ol><h3 id="spring-cloud-config-çš„ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#spring-cloud-config-çš„ç‰¹ç‚¹" aria-hidden="true">#</a> Spring Cloud Config çš„ç‰¹ç‚¹</h3><p>Spring Cloud Config å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>Spring Cloud Config ç”± Spring Cloud å›¢é˜Ÿå¼€å‘ï¼Œå¯ä»¥è¯´æ˜¯ Spring çš„äº²å„¿å­ï¼Œèƒ½å¤Ÿä¸ Spring çš„ç”Ÿæ€ä½“ç³»æ— ç¼é›†æˆã€‚</li><li>Spring Cloud Config å°†æ‰€æœ‰å¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªå¤–éƒ¨çš„å­˜å‚¨ä»“åº“æˆ–ç³»ç»Ÿï¼ˆä¾‹å¦‚ Gitï¼‰ä¸­ï¼Œç»Ÿä¸€ç®¡ç†ã€‚</li><li>Spring Cloud Config é…ç½®ä¸­å¿ƒå°†é…ç½®ä»¥ REST æ¥å£çš„å½¢å¼æš´éœ²ç»™å„ä¸ªå¾®æœåŠ¡ï¼Œä»¥æ–¹ä¾¿å„ä¸ªå¾®æœåŠ¡è·å–ã€‚</li><li>å¾®æœåŠ¡å¯ä»¥é€šè¿‡ Spring Cloud Config å‘é…ç½®ä¸­å¿ƒç»Ÿä¸€æ‹‰å–å±äºå®ƒä»¬è‡ªå·±çš„é…ç½®ä¿¡æ¯ã€‚</li><li>å½“é…ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¾®æœåŠ¡ä¸éœ€è¦é‡å¯å³å¯æ„ŸçŸ¥åˆ°é…ç½®çš„å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨è·å–å’Œåº”ç”¨æœ€æ–°é…ç½®ã€‚</li><li>ä¸€ä¸ªåº”ç”¨å¯èƒ½æœ‰å¤šä¸ªç¯å¢ƒï¼Œä¾‹å¦‚å¼€å‘ï¼ˆdevï¼‰ç¯å¢ƒã€æµ‹è¯•ï¼ˆtestï¼‰ç¯å¢ƒã€ç”Ÿäº§ï¼ˆprodï¼‰ç¯å¢ƒç­‰ç­‰ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ Spring Cloud Config å¯¹ä¸åŒç¯å¢ƒçš„å„é…ç½®è¿›è¡Œç®¡ç†ï¼Œä¸”èƒ½å¤Ÿç¡®ä¿åº”ç”¨åœ¨ç¯å¢ƒè¿ç§»åä»ç„¶æœ‰å®Œæ•´çš„é…ç½®æ”¯æŒå…¶æ­£å¸¸è¿è¡Œã€‚</li></ul><h3 id="æ­å»º-config-æœåŠ¡ç«¯" tabindex="-1"><a class="header-anchor" href="#æ­å»º-config-æœåŠ¡ç«¯" aria-hidden="true">#</a> æ­å»º Config æœåŠ¡ç«¯</h3><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211172141431.png" alt="image-20221211172141431"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211172148485.png" alt="image-20221211172148485"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211172159912.png" alt="image-20221211172159912"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211172232192.png" alt="image-20221211172232192"></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3344</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span>  cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>center <span class="token comment">#æ³¨å†Œè¿›EurekaæœåŠ¡å™¨çš„å¾®æœåŠ¡å</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">git</span><span class="token punctuation">:</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/EddieZturbo/SpringCloud_Config_Demo.git <span class="token comment">#GitHubä¸Šé¢çš„gitä»“åº“åå­—</span>
          <span class="token comment">####æœç´¢ç›®å½•/ä»“åº“å</span>
          <span class="token key atrule">search-paths</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> SpringCloud_Config_Demo
      <span class="token comment">####è¯»å–åˆ†æ”¯</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> master


<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">#å•æœº</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211172300585.png" alt="image-20221211172300585"></p><p>è®¿é—®é…ç½®æ–‡ä»¶</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211172326673.png" alt="image-20221211172326673"></p><p>Spring Cloud Config è§„å®šäº†ä¸€å¥—é…ç½®æ–‡ä»¶è®¿é—®è§„åˆ™ï¼Œå¦‚ä¸‹è¡¨ã€‚</p><table><thead><tr><th>è®¿é—®è§„åˆ™</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>/{application}/{profile}[/{label}]</td><td>/config/dev/master</td></tr><tr><td>/{application}-{profile}.{suffix}</td><td>/config-dev.yml</td></tr><tr><td>/{label}/{application}-{profile}.{suffix}</td><td>/master/config-dev.yml</td></tr></tbody></table><p>è®¿é—®è§„åˆ™å†…å„å‚æ•°è¯´æ˜å¦‚ä¸‹ã€‚</p><ul><li>{application}ï¼šåº”ç”¨åç§°ï¼Œå³é…ç½®æ–‡ä»¶çš„åç§°ï¼Œä¾‹å¦‚ config-devã€‚</li><li>{profile}ï¼šç¯å¢ƒåï¼Œä¸€ä¸ªé¡¹ç›®é€šå¸¸éƒ½æœ‰å¼€å‘ï¼ˆdevï¼‰ç‰ˆæœ¬ã€æµ‹è¯•ï¼ˆtestï¼‰ç¯å¢ƒç‰ˆæœ¬ã€ç”Ÿäº§ï¼ˆprodï¼‰ç¯å¢ƒç‰ˆæœ¬ï¼Œé…ç½®æ–‡ä»¶åˆ™ä»¥ application-{profile}.yml çš„å½¢å¼è¿›è¡ŒåŒºåˆ†ï¼Œä¾‹å¦‚ application-dev.ymlã€application-test.ymlã€application-prod.yml ç­‰ã€‚</li><li>{label}ï¼šGit åˆ†æ”¯åï¼Œé»˜è®¤æ˜¯ master åˆ†æ”¯ï¼Œå½“è®¿é—®é»˜è®¤åˆ†æ”¯ä¸‹çš„é…ç½®æ–‡ä»¶æ—¶ï¼Œè¯¥å‚æ•°å¯ä»¥çœç•¥ï¼Œå³ç¬¬äºŒç§è®¿é—®æ–¹å¼ã€‚</li><li>{suffix}ï¼šé…ç½®æ–‡ä»¶çš„åç¼€ï¼Œä¾‹å¦‚ config-dev.yml çš„åç¼€ä¸º ymlã€‚</li></ul><p>é€šè¿‡è¿™å¥—è§„åˆ™ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šå°±ç›´æ¥å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œè®¿é—®ã€‚</p><h3 id="æ­å»º-config-å®¢æˆ·ç«¯" tabindex="-1"><a class="header-anchor" href="#æ­å»º-config-å®¢æˆ·ç«¯" aria-hidden="true">#</a> æ­å»º Config å®¢æˆ·ç«¯</h3><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211184738944.png" alt="image-20221211184738944"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211184745751.png" alt="image-20221211184745751"></p><p>bootstrap.yml</p><p>bootstrap.yml æ˜¯ç³»ç»Ÿçº§åˆ«çš„ï¼ŒåŠ è½½ä¼˜å…ˆçº§é«˜äº application.yml ï¼Œè´Ÿè´£ä»å¤–éƒ¨åŠ è½½é…ç½®å¹¶è§£æ</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211184814732.png" alt="image-20221211184814732"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211184900700.png" alt="image-20221211184900700"></p><p>ConfigClientController</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211184912572.png" alt="image-20221211184912572"></p><p>run</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211184921328.png" alt="image-20221211184921328"></p><h3 id="æ‰‹åŠ¨åˆ·æ–°é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ‰‹åŠ¨åˆ·æ–°é…ç½®" aria-hidden="true">#</a> æ‰‹åŠ¨åˆ·æ–°é…ç½®</h3><p>é€šè¿‡è¯¥å®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ 2 ç‚¹ç»“è®ºï¼Œ</p><ul><li>é…ç½®æ›´æ–°åï¼ŒSpring Cloud Config æœåŠ¡ç«¯ï¼ˆServerï¼‰å¯ä»¥ç›´æ¥ä» Git ä»“åº“ä¸­è·å–æœ€æ–°çš„é…ç½®ã€‚</li><li>é™¤éé‡å¯ Spring Cloud Config å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼Œå¦åˆ™æ— æ³•é€šè¿‡ Spring Cloud Config æœåŠ¡ç«¯è·å–æœ€æ–°çš„é…ç½®ä¿¡æ¯ã€‚</li></ul><p>è§£å†³ä¸é‡å¯ Config å®¢æˆ·ç«¯æ— æ³•è·å–æœ€æ–°é…ç½®çš„é—®é¢˜</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211202211896.png" alt="image-20221211202211896"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211202229567.png" alt="image-20221211202229567"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211202249569.png" alt="image-20221211202249569"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211202310730.png" alt="image-20221211202310730"></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST &quot;http://localhost:3355/actuator/refresh&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211202354959.png" alt="image-20221211202354959"></p><h3 id="config-bus-å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°" tabindex="-1"><a class="header-anchor" href="#config-bus-å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°" aria-hidden="true">#</a> Config+Bus å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°</h3><p>Spring Cloud Bus åˆè¢«ç§°ä¸ºæ¶ˆæ¯æ€»çº¿ï¼Œå®ƒèƒ½å¤Ÿé€šè¿‡è½»é‡çº§çš„æ¶ˆæ¯ä»£ç†ï¼ˆä¾‹å¦‚ RabbitMQã€Kafka ç­‰ï¼‰å°†å¾®æœåŠ¡æ¶æ„ä¸­çš„å„ä¸ªæœåŠ¡è¿æ¥èµ·æ¥ï¼Œå®ç°å¹¿æ’­çŠ¶æ€æ›´æ”¹ã€äº‹ä»¶æ¨é€ç­‰åŠŸèƒ½ï¼Œè¿˜å¯ä»¥å®ç°å¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡åŠŸèƒ½ã€‚</p><p>ç›®å‰ Spring Cloud Bus æ”¯æŒä¸¤ç§æ¶ˆæ¯ä»£ç†ï¼šRabbitMQ å’Œ Kafkaã€‚</p><p>å½“ Git ä»“åº“ä¸­çš„é…ç½®å‘ç”Ÿäº†æ”¹å˜ï¼Œæˆ‘ä»¬åªéœ€è¦å‘æŸä¸€ä¸ªæœåŠ¡ï¼ˆæ—¢å¯ä»¥æ˜¯ Config æœåŠ¡ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ Config å®¢æˆ·ç«¯ï¼‰å‘é€ä¸€ä¸ª POST è¯·æ±‚ï¼ŒSpring Cloud Bus å°±å¯ä»¥é€šè¿‡æ¶ˆæ¯ä»£ç†é€šçŸ¥å…¶ä»–æœåŠ¡é‡æ–°æ‹‰å–æœ€æ–°é…ç½®ï¼Œä»¥å®ç°é…ç½®çš„åŠ¨æ€åˆ·æ–°ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211202505026.png" alt="image-20221211202505026"></p><ol><li>å½“ Git ä»“åº“ä¸­çš„é…ç½®å‘ç”Ÿæ”¹å˜åï¼Œè¿ç»´äººå‘˜å‘ Config æœåŠ¡ç«¯å‘é€ä¸€ä¸ª POST è¯·æ±‚ï¼Œè¯·æ±‚è·¯å¾„ä¸ºâ€œ/actuator/refreshâ€ã€‚</li><li>Config æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå°†è¯¥è¯·æ±‚è½¬å‘ç»™æœåŠ¡æ€»çº¿ Spring Cloud Busã€‚</li><li>Spring Cloud Bus æ¥åˆ°æ¶ˆæ¯åï¼Œä¼šé€šçŸ¥ç»™æ‰€æœ‰ Config å®¢æˆ·ç«¯ã€‚</li><li>Config å®¢æˆ·ç«¯æ¥æ”¶åˆ°é€šçŸ¥ï¼Œè¯·æ±‚ Config æœåŠ¡ç«¯æ‹‰å–æœ€æ–°é…ç½®ã€‚</li><li>æ‰€æœ‰ Config å®¢æˆ·ç«¯éƒ½è·å–åˆ°æœ€æ–°çš„é…ç½®ã€‚</li></ol><h4 id="spring-cloud-bus-åŠ¨æ€åˆ·æ–°é…ç½®-å…¨å±€å¹¿æ’­" tabindex="-1"><a class="header-anchor" href="#spring-cloud-bus-åŠ¨æ€åˆ·æ–°é…ç½®-å…¨å±€å¹¿æ’­" aria-hidden="true">#</a> Spring Cloud Bus åŠ¨æ€åˆ·æ–°é…ç½®ï¼ˆå…¨å±€å¹¿æ’­ï¼‰</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211225958550.png" alt="image-20221211225958550"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230055319.png" alt="image-20221211230055319"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230104798.png" alt="image-20221211230104798"></p><p><strong>3344</strong></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230009112.png" alt="image-20221211230009112"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230025739.png" alt="image-20221211230025739"></p><p><strong>3355</strong></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230147959.png" alt="image-20221211230147959"></p><p>bootstrap.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230221792.png" alt="image-20221211230221792"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230254187.png" alt="image-20221211230254187"></p><p><strong>3306</strong></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230317743.png" alt="image-20221211230317743"></p><p>bootstrap.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230331257.png" alt="image-20221211230331257"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230346936.png" alt="image-20221211230346936"></p><p><strong>cmd</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230359380.png" alt="image-20221211230359380"></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST &quot;http://localhost:3344/actuator/bus-refresh&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221211230435897.png" alt="image-20221211230435897"></p><h4 id="spring-cloud-bus-åŠ¨æ€åˆ·æ–°é…ç½®-å®šç‚¹é€šçŸ¥" tabindex="-1"><a class="header-anchor" href="#spring-cloud-bus-åŠ¨æ€åˆ·æ–°é…ç½®-å®šç‚¹é€šçŸ¥" aria-hidden="true">#</a> Spring Cloud Bus åŠ¨æ€åˆ·æ–°é…ç½®ï¼ˆå®šç‚¹é€šçŸ¥ï¼‰</h4><p>æ‰€è°“å®šç‚¹é€šçŸ¥ï¼Œå°±æ˜¯ä¸å†é€šçŸ¥æ‰€æœ‰çš„ Config å®¢æˆ·ç«¯ï¼Œè€Œæ˜¯æ ¹æ®éœ€æ±‚åªé€šçŸ¥å…¶ä¸­æŸä¸€ä¸ª Config å®¢æˆ·ç«¯ã€‚</p><p>ä½¿ç”¨ Spring Cloud Bus å®ç°å®šç‚¹é€šçŸ¥çš„æ–¹æ³•ååˆ†ç®€å•ï¼Œåªè¦æˆ‘ä»¬åœ¨å‘é€ POST è¯·æ±‚æ—¶ä½¿ç”¨ä»¥ä¸‹æ ¼å¼å³å¯ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://{hostname}:{port}/actuator/bus-refresh/{destination}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>{hostname}ï¼š è¡¨ç¤º Config æœåŠ¡ç«¯çš„ä¸»æœºåœ°å€ï¼Œæ—¢å¯ä»¥æ˜¯åŸŸåï¼Œä¹Ÿå¯ä»¥æ˜¯ IP åœ°å€ã€‚</li><li>{port}ï¼šè¡¨ç¤º Config æœåŠ¡ç«¯çš„ç«¯å£å·.</li><li>{destination}ï¼šè¡¨ç¤ºéœ€è¦å®šç‚¹é€šçŸ¥çš„ Config å®¢æˆ·ç«¯ï¼ˆå¾®æœåŠ¡ï¼‰ï¼Œç”± Config å®¢æˆ·ç«¯çš„æœåŠ¡åï¼ˆspring.application.nameï¼‰+ç«¯å£å·ï¼ˆserver.portï¼‰ç»„æˆï¼Œä¾‹å¦‚åªé€šçŸ¥ micro-service-cloud-config-client-3355 åˆ·æ–°é…ç½®ï¼Œåˆ™å–å€¼ä¸º spring-cloud-config-client:3355ã€‚</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -X POST &quot;http://localhost:3344/actuator/bus-refresh/CLOUD-CONFIG-CLIENT-BUS:3355&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="streamæ¶ˆæ¯é©±åŠ¨" tabindex="-1"><a class="header-anchor" href="#streamæ¶ˆæ¯é©±åŠ¨" aria-hidden="true">#</a> Streamæ¶ˆæ¯é©±åŠ¨</h2><p><a href="https://spring.io/projects/spring-cloud-stream" target="_blank" rel="noopener noreferrer">Spring Cloud Stream<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.cnblogs.com/binyue/p/12222198.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆï¼Spring Cloud Stream å¿«é€Ÿå…¥é—¨ - é‚´è¶Š - åšå®¢å›­ (cnblogs.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212141704826.png" alt="image-20221212141704826"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212142311058.png" alt="image-20221212142311058"></p><p><strong>é€šè¿‡å®šä¹‰ç»‘å®šå™¨Binderä½œä¸ºä¸­é—´å±‚ï¼›å®ç°äº†åº”ç”¨ç¨‹åºä¸æ¶ˆæ¯ä¸­é—´ä»¶ç»†èŠ‚ä¹‹é—´çš„éš”ç¦»</strong></p><p><strong>æ— æ„ŸçŸ¥çš„ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶</strong></p><p>Streamè§£å†³äº†å¼€å‘äººå‘˜æ— æ„ŸçŸ¥çš„ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶çš„é—®é¢˜ï¼Œå› ä¸ºStreamå¯¹æ¶ˆæ¯ä¸­é—´ä»¶çš„è¿›ä¸€æ­¥å°è£…ï¼Œå¯ä»¥åšåˆ°ä»£ç å±‚é¢å¯¹ä¸­é—´ä»¶çš„æ— æ„ŸçŸ¥ã€‚</p><p><strong>ä¸­é—´ä»¶å’ŒæœåŠ¡çš„é«˜åº¦è§£è€¦</strong></p><p>Spring Cloud Streamè¿›è¡Œäº†é…ç½®éš”ç¦»ï¼Œåªéœ€è¦è°ƒæ•´é…ç½®ï¼Œå¼€å‘ä¸­å¯ä»¥åŠ¨æ€çš„åˆ‡æ¢ä¸­é—´ä»¶(å¦‚rabbitmqåˆ‡æ¢ä¸ºkafka)ï¼Œä½¿å¾—å¾®æœåŠ¡å¼€å‘çš„é«˜åº¦è§£è€¦ï¼ŒæœåŠ¡å¯ä»¥å…³æ³¨æ›´å¤šè‡ªå·±çš„ä¸šåŠ¡æµç¨‹ã€‚</p><p><strong>åº”ç”¨æ¨¡å‹</strong></p><p>Spring Cloud Streamç”±ä¸€ä¸ªä¸­ç«‹çš„ä¸­é—´ä»¶å†…æ ¸ç»„æˆã€‚Spring Cloud Streamä¼šæ³¨å…¥è¾“å…¥å’Œè¾“å‡ºçš„channelsï¼Œåº”ç”¨ç¨‹åºé€šè¿‡è¿™äº›channelsä¸å¤–ç•Œé€šä¿¡ï¼Œè€Œchannelsåˆ™æ˜¯é€šè¿‡ä¸€ä¸ªæ˜ç¡®çš„ä¸­é—´ä»¶Binderä¸å¤–éƒ¨brokersè¿æ¥ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212142048011.png" alt="image-20221212142048011"></p><p><strong>å„å¤§æ¶ˆæ¯ä¸­é—´ä»¶çš„ç»‘å®šæŠ½è±¡</strong></p><p>Spring Cloud Streamæä¾›å¯¹Kafkaï¼ŒRabbit MQï¼ŒRedisï¼Œå’ŒGemfireçš„Binderå®ç°ã€‚Spring Cloud Streamè¿˜åŒ…æ‹¬äº†ä¸€ä¸ªTestSupportBinderï¼ŒTestSupportBinderé¢„ç•™ä¸€ä¸ªæœªæ›´æ”¹çš„channelä»¥ä¾¿äºç›´æ¥åœ°ã€å¯é åœ°å’Œchannelsé€šä¿¡ã€‚</p><h3 id="é›†æˆkafka" tabindex="-1"><a class="header-anchor" href="#é›†æˆkafka" aria-hidden="true">#</a> <strong>é›†æˆKafka</strong></h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-stream-binder-kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
XML å¤åˆ¶ å…¨å±
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é›†æˆrabbitmq" tabindex="-1"><a class="header-anchor" href="#é›†æˆrabbitmq" aria-hidden="true">#</a> <strong>é›†æˆRabbitMQ</strong></h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-stream-rabbit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ¶ˆæ¯é©±åŠ¨ç”Ÿäº§è€…" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯é©±åŠ¨ç”Ÿäº§è€…" aria-hidden="true">#</a> æ¶ˆæ¯é©±åŠ¨ç”Ÿäº§è€…</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181136573.png" alt="image-20221212181136573"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181047567.png" alt="image-20221212181047567"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212185523842.png" alt="image-20221212185523842"></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8801</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>stream<span class="token punctuation">-</span>provider
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.199.144
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> eddie
    <span class="token key atrule">password</span><span class="token punctuation">:</span> eddie
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">binders</span><span class="token punctuation">:</span> <span class="token comment"># åœ¨æ­¤å¤„é…ç½®è¦ç»‘å®šçš„rabbitmqçš„æœåŠ¡ä¿¡æ¯ï¼›</span>
        <span class="token key atrule">defaultRabbit</span><span class="token punctuation">:</span> <span class="token comment"># è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºäºbindingæ•´åˆ</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> rabbit <span class="token comment"># æ¶ˆæ¯ç»„ä»¶ç±»å‹</span>
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span> <span class="token comment"># æœåŠ¡çš„æ•´åˆå¤„ç†</span>
        <span class="token key atrule">output</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªåå­—æ˜¯ä¸€ä¸ªé€šé“çš„åç§°</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> studyExchange <span class="token comment"># è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°å®šä¹‰</span>
          <span class="token key atrule">content-type</span><span class="token punctuation">:</span> application/json <span class="token comment"># è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡ä¸ºjsonï¼Œæ–‡æœ¬åˆ™è®¾ç½®â€œtext/plainâ€</span>
          <span class="token key atrule">binder</span><span class="token punctuation">:</span> defaultRabbit <span class="token comment"># è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“è®¾ç½®</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment"># å®¢æˆ·ç«¯è¿›è¡ŒEurekaæ³¨å†Œçš„é…ç½®</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment"># è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯30ç§’ï¼‰</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment"># å¦‚æœç°åœ¨è¶…è¿‡äº†5ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> send<span class="token punctuation">-</span>8801.com  <span class="token comment"># åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§°</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment"># è®¿é—®çš„è·¯å¾„å˜ä¸ºIPåœ°å€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181125365.png" alt="image-20221212181125365"></p><p>MessageProviderImpl</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181229854.png" alt="image-20221212181229854"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181240530.png" alt="image-20221212181240530"></p><h4 id="æ¶ˆæ¯é©±åŠ¨æ¶ˆè´¹è€…" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯é©±åŠ¨æ¶ˆè´¹è€…" aria-hidden="true">#</a> æ¶ˆæ¯é©±åŠ¨æ¶ˆè´¹è€…</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181257326.png" alt="image-20221212181257326"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181305429.png" alt="image-20221212181305429"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212185543095.png" alt="image-20221212185543095"></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8802</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>stream<span class="token punctuation">-</span>consumer
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.199.144
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> eddie
    <span class="token key atrule">password</span><span class="token punctuation">:</span> eddie
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">stream</span><span class="token punctuation">:</span>
      <span class="token key atrule">binders</span><span class="token punctuation">:</span> <span class="token comment"># åœ¨æ­¤å¤„é…ç½®è¦ç»‘å®šçš„rabbitmqçš„æœåŠ¡ä¿¡æ¯ï¼›</span>
        <span class="token key atrule">defaultRabbit</span><span class="token punctuation">:</span> <span class="token comment"># è¡¨ç¤ºå®šä¹‰çš„åç§°ï¼Œç”¨äºäºbindingæ•´åˆ</span>
          <span class="token key atrule">type</span><span class="token punctuation">:</span> rabbit <span class="token comment"># æ¶ˆæ¯ç»„ä»¶ç±»å‹</span>
      <span class="token key atrule">bindings</span><span class="token punctuation">:</span> <span class="token comment"># æœåŠ¡çš„æ•´åˆå¤„ç†</span>
        <span class="token key atrule">input</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªåå­—æ˜¯ä¸€ä¸ªé€šé“çš„åç§°</span>
          <span class="token key atrule">destination</span><span class="token punctuation">:</span> studyExchange <span class="token comment"># è¡¨ç¤ºè¦ä½¿ç”¨çš„Exchangeåç§°å®šä¹‰</span>
          <span class="token key atrule">content-type</span><span class="token punctuation">:</span> application/json <span class="token comment"># è®¾ç½®æ¶ˆæ¯ç±»å‹ï¼Œæœ¬æ¬¡ä¸ºå¯¹è±¡jsonï¼Œå¦‚æœæ˜¯æ–‡æœ¬åˆ™è®¾ç½®â€œtext/plainâ€</span>
          <span class="token key atrule">binder</span><span class="token punctuation">:</span> defaultRabbit <span class="token comment"># è®¾ç½®è¦ç»‘å®šçš„æ¶ˆæ¯æœåŠ¡çš„å…·ä½“è®¾ç½®</span>
          <span class="token key atrule">group</span><span class="token punctuation">:</span> eddie<span class="token punctuation">-</span>A
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span> <span class="token comment"># å®¢æˆ·ç«¯è¿›è¡ŒEurekaæ³¨å†Œçš„é…ç½®</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">2</span> <span class="token comment"># è®¾ç½®å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼ˆé»˜è®¤æ˜¯30ç§’ï¼‰</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment"># å¦‚æœç°åœ¨è¶…è¿‡äº†5ç§’çš„é—´éš”ï¼ˆé»˜è®¤æ˜¯90ç§’ï¼‰</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> receive<span class="token punctuation">-</span>8802.com  <span class="token comment"># åœ¨ä¿¡æ¯åˆ—è¡¨æ—¶æ˜¾ç¤ºä¸»æœºåç§°</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>     <span class="token comment"># è®¿é—®çš„è·¯å¾„å˜ä¸ºIPåœ°å€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181332792.png" alt="image-20221212181332792"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181345187.png" alt="image-20221212181345187"></p><h4 id="è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œ" aria-hidden="true">#</a> è¿è¡Œ</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181408127.png" alt="image-20221212181408127"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181439179.png" alt="image-20221212181439179"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181447040.png" alt="image-20221212181447040"></p><h4 id="é‡å¤æ¶ˆè´¹" tabindex="-1"><a class="header-anchor" href="#é‡å¤æ¶ˆè´¹" aria-hidden="true">#</a> é‡å¤æ¶ˆè´¹</h4><p>ä½¿ç”¨Streamä¸­çš„<strong>åˆ†ç»„ï¼ˆgroupï¼‰è¿›è¡Œè§£å†³</strong></p><p>Streamä¸­å±äº<strong>åŒä¸€ç»„ï¼ˆgroupï¼‰çš„</strong>å¤šä¸ªæ¶ˆè´¹è€…æ˜¯<strong>ç«äº‰å…³ç³»</strong>ï¼Œèƒ½å¤Ÿ<strong>ä¿è¯æ¶ˆæ¯åªä¼šè¢«å…¶ä¸­çš„ä¸€ä¸ªæœåŠ¡æ¶ˆè´¹ä¸€æ¬¡</strong></p><p><strong>ä¸åŒç»„ï¼ˆgroupï¼‰çš„</strong>å¯ä»¥å…¨é¢æ¶ˆè´¹ï¼ˆ<strong>é‡å¤æ¶ˆè´¹</strong>ï¼‰</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181727040.png" alt="image-20221212181727040"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212181744476.png" alt="image-20221212181744476"></p><h4 id="æ¶ˆæ¯æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#æ¶ˆæ¯æŒä¹…åŒ–" aria-hidden="true">#</a> æ¶ˆæ¯æŒä¹…åŒ–</h4><p><strong>åˆ†ç»„ï¼ˆgroupï¼‰</strong></p><p>å…ˆå¯åŠ¨8801å‘é€æ¶ˆæ¯åˆ°rabbitMQ --&gt; å†å¯åŠ¨æ¶ˆæ¯æ¶ˆè´¹æœåŠ¡</p><p><strong>æœ‰group</strong>çš„å±æ€§é…ç½®çš„<strong>ä»ç„¶ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯</strong>ï¼ˆæŒä¹…åŒ–ï¼‰</p><p><strong>æ— group</strong>çš„å±æ€§é…ç½®çš„åˆ™<strong>ä¸ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯</strong></p><h2 id="sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª" tabindex="-1"><a class="header-anchor" href="#sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª" aria-hidden="true">#</a> Sleuthåˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ª</h2><p><a href="https://spring.io/projects/spring-cloud-sleuth" target="_blank" rel="noopener noreferrer">Spring Cloud Sleuth<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/spring-cloud/spring-cloud-sleuth#spring-cloud-sleuth" target="_blank" rel="noopener noreferrer">GitHub - spring-cloud/spring-cloud-sleuth: Distributed tracing for spring cloud<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>Sleuthä¸ºè¿½è¸ª</strong> <strong>Zipkinä¸ºå›¾å½¢åŒ–å±•ç¤º</strong></p><p><a href="https://www.cnblogs.com/cbvlog/p/15571496.html" target="_blank" rel="noopener noreferrer">åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªä¹‹Spring Cloud Sleuth+Zipkinæœ€å…¨æ•™ç¨‹ï¼ - bucaichenmou - åšå®¢å›­ (cnblogs.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>å®‰è£…zipkinçš„jaråŒ…</strong></p><p><a href="https://search.maven.org/artifact/io.zipkin/zipkin-server/2.23.4/jar" target="_blank" rel="noopener noreferrer">io.zipkin : zipkin-server : 2.23.4 - Maven Central Repository Search<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>cmdæ§åˆ¶å°å¯åŠ¨zipkinæœåŠ¡ç«¯</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212193822191.png" alt="image-20221212193822191"></p><p><strong>è®¿é—®å®¢æˆ·ç«¯ç•Œé¢</strong> portï¼š9411</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212194105519.png" alt="image-20221212194105519"></p><p><strong>æ­å»ºsleuthé“¾è·¯è·Ÿè¸ª+zipkinå®¢æˆ·ç«¯</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212195503812.png" alt="image-20221212195503812"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212195515952.png" alt="image-20221212195515952"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212195604054.png" alt="image-20221212195604054"></p><p>run</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212195715626.png" alt="image-20221212195715626"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212195650291.png" alt="image-20221212195650291"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221212195701349.png" alt="image-20221212195701349"></p><h1 id="springcloud-alibaba" tabindex="-1"><a class="header-anchor" href="#springcloud-alibaba" aria-hidden="true">#</a> SpringCloud Alibaba</h1><p><a href="https://spring.io/projects/spring-cloud-alibaba" target="_blank" rel="noopener noreferrer">Spring Cloud Alibaba<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/alibaba/spring-cloud-alibaba/blob/2021.x/README-zh.md" target="_blank" rel="noopener noreferrer">spring-cloud-alibaba/README-zh.md at 2021.x Â· alibaba/spring-cloud-alibaba Â· GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><table><thead><tr><th>Spring Cloud ç¬¬ä¸€ä»£å®ç°ï¼ˆNetflixï¼‰</th><th>çŠ¶æ€</th><th>Spring Cloud ç¬¬äºŒä»£å®ç°ï¼ˆAlibabaï¼‰</th><th>çŠ¶æ€</th></tr></thead><tbody><tr><td>Eureka</td><td>2.0 å­µåŒ–å¤±è´¥</td><td>Nacos Discovery</td><td>æ€§èƒ½æ›´å¥½ï¼Œæ„ŸçŸ¥åŠ›æ›´å¼º</td></tr><tr><td>Ribbon</td><td>åœæ›´è¿›ç»´</td><td>Spring Cloud Loadbalancer</td><td>Spring Cloud åŸç”Ÿç»„ä»¶ï¼Œç”¨äºä»£æ›¿ Ribbon</td></tr><tr><td>Hystrix</td><td>åœæ›´è¿›ç»´</td><td>Sentinel</td><td>å¯è§†åŒ–é…ç½®ï¼Œä¸Šæ‰‹ç®€å•</td></tr><tr><td>Zuul</td><td>åœæ›´è¿›ç»´</td><td>Spring Cloud Gateway</td><td>æ€§èƒ½ä¸º Zuul çš„ 1.6 å€</td></tr><tr><td>Spring Cloud Config</td><td>æ­å»ºè¿‡ç¨‹å¤æ‚ï¼Œçº¦å®šè¿‡å¤šï¼Œæ— å¯è§†åŒ–ç•Œé¢ï¼Œä¸Šæ‰‹éš¾ç‚¹å¤§</td><td>Nacos Config</td><td>æ­å»ºè¿‡ç¨‹ç®€å•ï¼Œæœ‰å¯è§†åŒ–ç•Œé¢ï¼Œé…ç½®ç®¡ç†æ›´ç®€å•ï¼Œå®¹æ˜“ä¸Šæ‰‹</td></tr></tbody></table><h2 id="ä¸»è¦åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#ä¸»è¦åŠŸèƒ½" aria-hidden="true">#</a> ä¸»è¦åŠŸèƒ½</h2><ul><li><strong>æœåŠ¡é™æµé™çº§</strong>ï¼šé»˜è®¤æ”¯æŒ WebServletã€WebFluxã€OpenFeignã€RestTemplateã€Spring Cloud Gatewayã€Dubbo å’Œ RocketMQ é™æµé™çº§åŠŸèƒ½çš„æ¥å…¥ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡æ§åˆ¶å°å®æ—¶ä¿®æ”¹é™æµé™çº§è§„åˆ™ï¼Œè¿˜æ”¯æŒæŸ¥çœ‹é™æµé™çº§ Metrics ç›‘æ§ã€‚</li><li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼šé€‚é… Spring Cloud æœåŠ¡æ³¨å†Œä¸å‘ç°æ ‡å‡†ï¼Œé»˜è®¤é›†æˆäº† Ribbon çš„æ”¯æŒã€‚</li><li><strong>åˆ†å¸ƒå¼é…ç½®ç®¡ç†</strong>ï¼šæ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®ï¼Œé…ç½®æ›´æ”¹æ—¶è‡ªåŠ¨åˆ·æ–°ã€‚</li><li><strong>æ¶ˆæ¯é©±åŠ¨èƒ½åŠ›</strong>ï¼šåŸºäº Spring Cloud Stream ä¸ºå¾®æœåŠ¡åº”ç”¨æ„å»ºæ¶ˆæ¯é©±åŠ¨èƒ½åŠ›ã€‚</li><li><strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong>ï¼šä½¿ç”¨ @GlobalTransactional æ³¨è§£ï¼Œ é«˜æ•ˆå¹¶ä¸”å¯¹ä¸šåŠ¡é›¶ä¾µå…¥åœ°è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚</li><li><strong>é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨</strong>ï¼šé˜¿é‡Œäº‘æä¾›çš„æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚æ”¯æŒåœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li><li><strong>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦</strong>ï¼šæä¾›ç§’çº§ã€ç²¾å‡†ã€é«˜å¯é ã€é«˜å¯ç”¨çš„å®šæ—¶ï¼ˆåŸºäº Cron è¡¨è¾¾å¼ï¼‰ä»»åŠ¡è°ƒåº¦æœåŠ¡ã€‚åŒæ—¶æä¾›åˆ†å¸ƒå¼çš„ä»»åŠ¡æ‰§è¡Œæ¨¡å‹ï¼Œå¦‚ç½‘æ ¼ä»»åŠ¡ã€‚ç½‘æ ¼ä»»åŠ¡æ”¯æŒæµ·é‡å­ä»»åŠ¡å‡åŒ€åˆ†é…åˆ°æ‰€æœ‰ Workerï¼ˆschedulerx-clientï¼‰ä¸Šæ‰§è¡Œã€‚</li><li><strong>é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡</strong>ï¼šè¦†ç›–å…¨çƒçš„çŸ­ä¿¡æœåŠ¡ï¼Œå‹å¥½ã€é«˜æ•ˆã€æ™ºèƒ½çš„äº’è”åŒ–é€šè®¯èƒ½åŠ›ï¼Œå¸®åŠ©ä¼ä¸šè¿…é€Ÿæ­å»ºå®¢æˆ·è§¦è¾¾é€šé“ã€‚</li></ul><p>æ›´å¤šåŠŸèƒ½è¯·å‚è€ƒ <a href="https://github.com/alibaba/spring-cloud-alibaba/blob/2021.x/Roadmap-zh.md" target="_blank" rel="noopener noreferrer">Roadmap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>é™¤äº†ä¸Šè¿°æ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œé’ˆå¯¹ä¼ä¸šçº§ç”¨æˆ·çš„åœºæ™¯ï¼ŒSpring Cloud Alibaba é…å¥—çš„ä¼ä¸šç‰ˆå¾®æœåŠ¡æ²»ç†æ–¹æ¡ˆ <a href="https://www.aliyun.com/product/aliware/mse?spm=github.spring.com.topbar" target="_blank" rel="noopener noreferrer">å¾®æœåŠ¡å¼•æ“MSE<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿˜æä¾›äº†ä¼ä¸šçº§å¾®æœåŠ¡æ²»ç†ä¸­å¿ƒï¼ŒåŒ…æ‹¬å…¨é“¾è·¯ç°åº¦ã€æœåŠ¡é¢„çƒ­ã€æ— æŸä¸Šä¸‹çº¿å’Œç¦»ç¾¤å®ä¾‹æ‘˜é™¤ç­‰æ›´å¤šæ›´å¼ºå¤§çš„æ²»ç†èƒ½åŠ›ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¼ä¸šçº§ Nacos æ³¨å†Œé…ç½®ä¸­å¿ƒï¼Œä¼ä¸šçº§äº‘åŸç”Ÿç½‘å…³ç­‰å¤šç§äº§å“åŠè§£å†³æ–¹æ¡ˆ</p><h2 id="ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶" aria-hidden="true">#</a> <strong>ç»„ä»¶</strong></h2><p><strong><a href="https://github.com/alibaba/Sentinel" target="_blank" rel="noopener noreferrer">Sentinel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šæŠŠæµé‡ä½œä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦ä¿æŠ¤æœåŠ¡çš„ç¨³å®šæ€§ã€‚</p><p><strong><a href="https://github.com/alibaba/Nacos" target="_blank" rel="noopener noreferrer">Nacos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚</p><p><strong><a href="https://rocketmq.apache.org/" target="_blank" rel="noopener noreferrer">RocketMQ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼ŒåŸºäºé«˜å¯ç”¨åˆ†å¸ƒå¼é›†ç¾¤æŠ€æœ¯ï¼Œæä¾›ä½å»¶æ—¶çš„ã€é«˜å¯é çš„æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…æœåŠ¡ã€‚</p><p><strong><a href="https://github.com/seata/seata" target="_blank" rel="noopener noreferrer">Seata<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šé˜¿é‡Œå·´å·´å¼€æºäº§å“ï¼Œä¸€ä¸ªæ˜“äºä½¿ç”¨çš„é«˜æ€§èƒ½å¾®æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚</p><p><strong><a href="https://www.aliyun.com/product/oss" target="_blank" rel="noopener noreferrer">Alibaba Cloud OSS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>: é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ˆObject Storage Serviceï¼Œç®€ç§° OSSï¼‰ï¼Œæ˜¯é˜¿é‡Œäº‘æä¾›çš„æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚æ‚¨å¯ä»¥åœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</p><p><strong><a href="https://cn.aliyun.com/aliware/schedulerx" target="_blank" rel="noopener noreferrer">Alibaba Cloud SchedulerX<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>: é˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦äº§å“ï¼Œæä¾›ç§’çº§ã€ç²¾å‡†ã€é«˜å¯é ã€é«˜å¯ç”¨çš„å®šæ—¶ï¼ˆåŸºäº Cron è¡¨è¾¾å¼ï¼‰ä»»åŠ¡è°ƒåº¦æœåŠ¡ã€‚</p><p><strong><a href="https://www.aliyun.com/product/sms" target="_blank" rel="noopener noreferrer">Alibaba Cloud SMS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>: è¦†ç›–å…¨çƒçš„çŸ­ä¿¡æœåŠ¡ï¼Œå‹å¥½ã€é«˜æ•ˆã€æ™ºèƒ½çš„äº’è”åŒ–é€šè®¯èƒ½åŠ›ï¼Œå¸®åŠ©ä¼ä¸šè¿…é€Ÿæ­å»ºå®¢æˆ·è§¦è¾¾é€šé“ã€‚</p><p>æ›´å¤šç»„ä»¶è¯·å‚è€ƒ <a href="https://github.com/alibaba/spring-cloud-alibaba/blob/2022.0/Roadmap-zh.md" target="_blank" rel="noopener noreferrer">Roadmap<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h2 id="nacos" tabindex="-1"><a class="header-anchor" href="#nacos" aria-hidden="true">#</a> Nacos</h2><p>Nacos æ˜¯ä¸€ä¸ªæ›´æ˜“äºå¸®åŠ©æ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€<strong>æœåŠ¡å‘ç°ã€é…ç½®å’ŒæœåŠ¡ç®¡ç†</strong>å¹³å°ï¼ˆå‚è€ƒè‡ª <a href="https://nacos.io/zh-cn/index.html" target="_blank" rel="noopener noreferrer">Nacos å®˜ç½‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼‰ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214090146846.png" alt="image-20221214090146846"></p><table><thead><tr><th>ç»„æˆéƒ¨åˆ†</th><th>å…¨ç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>Na</td><td>naming/nameServer</td><td>å³æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œä¸ Spring Cloud <strong>Eureka</strong> çš„åŠŸèƒ½ç±»ä¼¼ã€‚</td></tr><tr><td>co</td><td>configuration</td><td>å³é…ç½®ä¸­å¿ƒï¼Œä¸ Spring Cloud <strong>Config</strong>+Spring Cloud <strong>Bus</strong> çš„åŠŸèƒ½ç±»ä¼¼ã€‚</td></tr><tr><td>s</td><td>service</td><td>å³æœåŠ¡ï¼Œè¡¨ç¤º Nacos å®ç°çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒéƒ½æ˜¯ä»¥æœåŠ¡ä¸ºæ ¸å¿ƒçš„ã€‚</td></tr></tbody></table><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214090656608.png" alt="image-20221214090656608"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214090556567.png" alt="image-20221214090556567"></p><p>åœ¨å›¾ ä¸­å…±æ¶‰åŠåˆ°ä»¥ä¸‹ 3 ä¸ªè§’è‰²ï¼š</p><ul><li>æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆRegister Serviceï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ª Nacos Serverï¼Œå¯ä»¥ä¸ºæœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…æä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°åŠŸèƒ½ã€‚</li><li>æœåŠ¡æä¾›è€…ï¼ˆProvider Serviceï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ª Nacos Clientï¼Œç”¨äºå¯¹å¤–æœåŠ¡ã€‚å®ƒå°†è‡ªå·±æä¾›çš„æœåŠ¡æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œä»¥ä¾›æœåŠ¡æ¶ˆè´¹è€…å‘ç°å’Œè°ƒç”¨ã€‚</li><li>æœåŠ¡æ¶ˆè´¹è€…ï¼ˆConsumer Serviceï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ª Nacos Clientï¼Œç”¨äºæ¶ˆè´¹æœåŠ¡ã€‚å®ƒå¯ä»¥ä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡åˆ—è¡¨ï¼Œè°ƒç”¨æ‰€éœ€çš„æœåŠ¡ã€‚</li></ul><p>Nacos å®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ä» Nacos å®˜æ–¹æä¾›çš„ä¸‹è½½é¡µé¢ä¸­ï¼Œä¸‹è½½ Nacos Server å¹¶è¿è¡Œã€‚</li><li>æœåŠ¡æä¾›è€… Nacos Client å¯åŠ¨æ—¶ï¼Œä¼šæŠŠæœåŠ¡ä»¥æœåŠ¡åï¼ˆspring.application.nameï¼‰çš„æ–¹å¼æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆNacos Serverï¼‰ï¼›</li><li>æœåŠ¡æ¶ˆè´¹è€… Nacos Client å¯åŠ¨æ—¶ï¼Œä¹Ÿä¼šå°†è‡ªå·±çš„æœåŠ¡æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼›</li><li>æœåŠ¡æ¶ˆè´¹è€…åœ¨æ³¨å†ŒæœåŠ¡çš„åŒæ—¶ï¼Œå®ƒè¿˜ä¼šä»æœåŠ¡æ³¨å†Œä¸­å¿ƒè·å–ä¸€ä»½æœåŠ¡æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ï¼Œè¯¥åˆ—è¡¨ä¸­åŒ…å«äº†æ‰€æœ‰æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œä¸­å¿ƒä¸Šçš„æœåŠ¡çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬æœåŠ¡æä¾›è€…å’Œè‡ªèº«çš„ä¿¡æ¯ï¼‰ï¼›</li><li>åœ¨è·å–äº†æœåŠ¡æä¾›è€…çš„ä¿¡æ¯åï¼ŒæœåŠ¡æ¶ˆè´¹è€…é€šè¿‡ HTTP æˆ–æ¶ˆæ¯ä¸­é—´ä»¶è¿œç¨‹è°ƒç”¨æœåŠ¡æä¾›è€…æä¾›çš„æœåŠ¡ã€‚</li></ol><h3 id="nacos-çš„ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#nacos-çš„ç‰¹æ€§" aria-hidden="true">#</a> Nacos çš„ç‰¹æ€§</h3><p>Nacos æä¾›äº†ä¸€ç³»åˆ—ç®€å•æ˜“ç”¨çš„ç‰¹æ€§ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåœ°å®ç°åŠ¨æ€æœåŠ¡å‘ç°ã€æœåŠ¡é…ç½®ç­‰åŠŸèƒ½ã€‚</p><h4 id="æœåŠ¡å‘ç°" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å‘ç°" aria-hidden="true">#</a> æœåŠ¡å‘ç°</h4><p>Nacos æ”¯æŒåŸºäº DNS å’Œ RPC çš„æœåŠ¡å‘ç°ã€‚å½“æœåŠ¡æä¾›è€…ä½¿ç”¨åŸç”Ÿ SDKã€OpenAPI æˆ–ä¸€ä¸ªç‹¬ç«‹çš„ Agent TODO å‘ Nacos æ³¨å†ŒæœåŠ¡åï¼ŒæœåŠ¡æ¶ˆè´¹è€…å¯ä»¥åœ¨ Nacos ä¸Šé€šè¿‡ DNS TODO æˆ– HTTP&amp;API æŸ¥æ‰¾ã€å‘ç°æœåŠ¡ã€‚</p><h4 id="æœåŠ¡å¥åº·ç›‘æµ‹" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å¥åº·ç›‘æµ‹" aria-hidden="true">#</a> æœåŠ¡å¥åº·ç›‘æµ‹</h4><p>Nacos æä¾›å¯¹æœåŠ¡çš„å®æ—¶å¥åº·æ£€æŸ¥ï¼Œèƒ½å¤Ÿé˜»æ­¢è¯·æ±‚å‘é€åˆ°ä¸å¥åº·ä¸»æœºæˆ–æœåŠ¡å®ä¾‹ä¸Šã€‚Nacos è¿˜æä¾›äº†ä¸€ä¸ªå¥åº·æ£€æŸ¥ä»ªè¡¨ç›˜ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ ¹æ®å¥åº·çŠ¶æ€ç®¡ç†æœåŠ¡çš„å¯ç”¨æ€§åŠæµé‡ã€‚</p><h4 id="åŠ¨æ€é…ç½®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€é…ç½®æœåŠ¡" aria-hidden="true">#</a> åŠ¨æ€é…ç½®æœåŠ¡</h4><p>åŠ¨æ€é…ç½®æœåŠ¡å¯ä»¥è®©æˆ‘ä»¬ä»¥ä¸­å¿ƒåŒ–ã€å¤–éƒ¨åŒ–å’ŒåŠ¨æ€åŒ–çš„æ–¹å¼ï¼Œç®¡ç†æ‰€æœ‰ç¯å¢ƒçš„åº”ç”¨é…ç½®å’ŒæœåŠ¡é…ç½®ã€‚</p><p>åŠ¨æ€é…ç½®æ¶ˆé™¤äº†é…ç½®å˜æ›´æ—¶é‡æ–°éƒ¨ç½²åº”ç”¨å’ŒæœåŠ¡çš„éœ€è¦ï¼Œè®©é…ç½®ç®¡ç†å˜å¾—æ›´åŠ é«˜æ•ˆã€æ•æ·ã€‚</p><p>é…ç½®ä¸­å¿ƒåŒ–ç®¡ç†è®©å®ç°æ— çŠ¶æ€æœåŠ¡å˜å¾—æ›´ç®€å•ï¼Œè®©æœåŠ¡æŒ‰éœ€å¼¹æ€§æ‰©å±•å˜å¾—æ›´å®¹æ˜“ã€‚</p><p>Nacos æä¾›äº†ä¸€ä¸ªç®€æ´æ˜“ç”¨çš„ UI å¸®åŠ©æˆ‘ä»¬ç®¡ç†æ‰€æœ‰æœåŠ¡å’Œåº”ç”¨çš„é…ç½®ã€‚Nacos è¿˜æä¾›åŒ…æ‹¬é…ç½®ç‰ˆæœ¬è·Ÿè¸ªã€é‡‘ä¸é›€å‘å¸ƒã€ä¸€é”®å›æ»šé…ç½®ä»¥åŠå®¢æˆ·ç«¯é…ç½®æ›´æ–°çŠ¶æ€è·Ÿè¸ªåœ¨å†…çš„ä¸€ç³»åˆ—å¼€ç®±å³ç”¨çš„é…ç½®ç®¡ç†ç‰¹æ€§ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å®‰å…¨åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç®¡ç†é…ç½®å˜æ›´å’Œé™ä½é…ç½®å˜æ›´å¸¦æ¥çš„é£é™©ã€‚</p><h4 id="åŠ¨æ€-dns-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€-dns-æœåŠ¡" aria-hidden="true">#</a> åŠ¨æ€ DNS æœåŠ¡</h4><p>Nacos æä¾›äº†åŠ¨æ€ DNS æœåŠ¡ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬æ›´å®¹æ˜“åœ°å®ç°è´Ÿè½½å‡è¡¡ã€æµé‡æ§åˆ¶ä»¥åŠæ•°æ®ä¸­å¿ƒå†…ç½‘çš„ç®€å• DNS è§£ææœåŠ¡ã€‚</p><p>Nacos æä¾›äº†ä¸€äº›ç®€å•çš„ DNS APIs TODOï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†æœåŠ¡çš„å…³è”åŸŸåå’Œå¯ç”¨çš„ IP:PORT åˆ—è¡¨ã€‚</p><h4 id="æœåŠ¡åŠå…¶å…ƒæ•°æ®ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡åŠå…¶å…ƒæ•°æ®ç®¡ç†" aria-hidden="true">#</a> æœåŠ¡åŠå…¶å…ƒæ•°æ®ç®¡ç†</h4><p>Nacos èƒ½è®©æˆ‘ä»¬ä»å¾®æœåŠ¡å¹³å°å»ºè®¾çš„è§†è§’ç®¡ç†æ•°æ®ä¸­å¿ƒçš„æ‰€æœ‰æœåŠ¡åŠå…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ç®¡ç†æœåŠ¡çš„æè¿°ã€ç”Ÿå‘½å‘¨æœŸã€æœåŠ¡çš„é™æ€ä¾èµ–åˆ†æã€æœåŠ¡çš„å¥åº·çŠ¶æ€ã€æœåŠ¡çš„æµé‡ç®¡ç†ã€è·¯ç”±åŠå®‰å…¨ç­–ç•¥ã€æœåŠ¡çš„ SLA ä»¥åŠ metrics ç»Ÿè®¡æ•°æ®ã€‚</p><h3 id="nacoså®‰è£…è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#nacoså®‰è£…è¿è¡Œ" aria-hidden="true">#</a> Nacoså®‰è£…è¿è¡Œ</h3><p><a href="https://github.com/alibaba/nacos/releases/tag/2.0.3" target="_blank" rel="noopener noreferrer">Release 2.0.3 (July 28, 2021) Â· alibaba/nacos Â· GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>startup.cmd -m standalone
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214091849240.png" alt="image-20221214091849240"></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://localhost:8848/nacos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214091952366.png" alt="image-20221214091952366"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214092052532.png" alt="image-20221214092052532"></p><h3 id="nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#nacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ" aria-hidden="true">#</a> NacosæœåŠ¡æ³¨å†Œä¸­å¿ƒ</h3><h4 id="nacos-client-provider" tabindex="-1"><a class="header-anchor" href="#nacos-client-provider" aria-hidden="true">#</a> Nacos-Client-Provider</h4><p>Father_Project-pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214100646477.png" alt="image-20221214100646477"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214100716381.png" alt="image-20221214100716381"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214100731626.png" alt="image-20221214100731626"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214100742525.png" alt="image-20221214100742525"></p><p>run</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214100754048.png" alt="image-20221214100754048"></p><h4 id="nacos-client-consumer" tabindex="-1"><a class="header-anchor" href="#nacos-client-consumer" aria-hidden="true">#</a> Nacos-Client-Consumer</h4><p>Father_Project-pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214100646477.png" alt="image-20221214100646477"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105230447.png" alt="image-20221214105230447"></p><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105243953.png" alt="image-20221214105243953"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105304316.png" alt="image-20221214105304316"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105407912.png" alt="image-20221214105407912"></p><p>config</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105333461.png" alt="image-20221214105333461"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105347020.png" alt="image-20221214105347020"></p><p>run</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105419268.png" alt="image-20221214105419268"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105429780.png" alt="image-20221214105429780"></p><h4 id="é›†æˆäº†ribbon-æä¾›è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#é›†æˆäº†ribbon-æä¾›è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> é›†æˆäº†Ribbonï¼›æä¾›è´Ÿè½½å‡è¡¡</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105545706.png" alt="image-20221214105545706"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214105557486.png" alt="image-20221214105557486"></p><p>é»˜è®¤è½®è¯¢æ–¹å¼</p><h3 id="nacosæœåŠ¡é…ç½®ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#nacosæœåŠ¡é…ç½®ä¸­å¿ƒ" aria-hidden="true">#</a> NacosæœåŠ¡é…ç½®ä¸­å¿ƒ</h3><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/Nacos-config" target="_blank" rel="noopener noreferrer">Nacos config Â· alibaba/spring-cloud-alibaba Wiki Â· GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="é…ç½®çš„ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#é…ç½®çš„ä¼˜å…ˆçº§" aria-hidden="true">#</a> é…ç½®çš„ä¼˜å…ˆçº§</h4><p>Spring Cloud Alibaba Nacos Config ç›®å‰æä¾›äº†ä¸‰ç§é…ç½®èƒ½åŠ›ä» Nacos æ‹‰å–ç›¸å…³çš„é…ç½®ã€‚</p><ul><li>A: é€šè¿‡ <code>spring.cloud.nacos.config.shared-configs[n].data-id</code> æ”¯æŒå¤šä¸ªå…±äº« Data Id çš„é…ç½®</li><li>B: é€šè¿‡ <code>spring.cloud.nacos.config.extension-configs[n].data-id</code> çš„æ–¹å¼æ”¯æŒå¤šä¸ªæ‰©å±• Data Id çš„é…ç½®</li><li>C: é€šè¿‡å†…éƒ¨ç›¸å…³è§„åˆ™(åº”ç”¨åã€åº”ç”¨å+ Profile )è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„ Data Id é…ç½®</li></ul><p>å½“ä¸‰ç§æ–¹å¼å…±åŒä½¿ç”¨æ—¶ï¼Œä»–ä»¬çš„ä¸€ä¸ªä¼˜å…ˆçº§å…³ç³»æ˜¯:A &lt; B &lt; C</p><h4 id="å®Œå…¨å…³é—­é…ç½®" tabindex="-1"><a class="header-anchor" href="#å®Œå…¨å…³é—­é…ç½®" aria-hidden="true">#</a> å®Œå…¨å…³é—­é…ç½®</h4><p>é€šè¿‡è®¾ç½® spring.cloud.nacos.config.enabled = false æ¥å®Œå…¨å…³é—­ Spring Cloud Nacos Config</p><h4 id="åŸºæœ¬é…ç½®" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬é…ç½®" aria-hidden="true">#</a> åŸºæœ¬é…ç½®</h4><p>å–ä»£springcloudçš„config+bus</p><p><strong>è‡ªå¸¦åŠ¨æ€åˆ·æ–°</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214114652490.png" alt="image-20221214114652490"></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>${prefix}-${spring.profiles.active}.${file-extension}
å¾®æœåŠ¡å-ç¯å¢ƒ-.yaml

dataId æ ¼å¼ä¸­å„å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š
${prefix}ï¼šé»˜è®¤å–å€¼ä¸ºå¾®æœåŠ¡çš„æœåŠ¡åï¼Œå³é…ç½®æ–‡ä»¶ä¸­ spring.application.name çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡é…ç½® spring.cloud.nacos.config.prefix æ¥æŒ‡å®šã€‚
${spring.profiles.active}ï¼šè¡¨ç¤ºå½“å‰ç¯å¢ƒå¯¹åº”çš„ Profileï¼Œä¾‹å¦‚ devã€testã€prod ç­‰ã€‚å½“æ²¡æœ‰æŒ‡å®šç¯å¢ƒçš„ Profile æ—¶ï¼Œå…¶å¯¹åº”çš„è¿æ¥ç¬¦ä¹Ÿå°†ä¸å­˜åœ¨ï¼Œ dataId çš„æ ¼å¼å˜æˆ ${prefix}.${file-extension}ã€‚
${file-extension}ï¼šè¡¨ç¤ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡é…ç½®é¡¹ spring.cloud.nacos.config.file-extension æ¥é…ç½®ï¼Œä¾‹å¦‚ properties å’Œ yamlã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214114912531.png" alt="image-20221214114912531"></p><p>pom</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214115059675.png" alt="image-20221214115059675"></p><p>application.yml</p><p>ä¸€å®šè¦é…activeç¯å¢ƒ ä¸èƒ½ä¸ºç©º</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214115112372.png" alt="image-20221214115112372"></p><p>bootstrap.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214115125933.png" alt="image-20221214115125933"></p><p>å¯åŠ¨ç±»</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214115135644.png" alt="image-20221214115135644"></p><p>controller</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214115147314.png" alt="image-20221214115147314"></p><h4 id="åŠ è½½å¤šé…ç½®é›†" tabindex="-1"><a class="header-anchor" href="#åŠ è½½å¤šé…ç½®é›†" aria-hidden="true">#</a> åŠ è½½å¤šé…ç½®é›†</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221217102424710.png" alt="image-20221217102424710"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221217102436522.png" alt="image-20221217102436522"></p><h4 id="å‘½åç©ºé—´-åˆ†ç»„-dataid" tabindex="-1"><a class="header-anchor" href="#å‘½åç©ºé—´-åˆ†ç»„-dataid" aria-hidden="true">#</a> å‘½åç©ºé—´-åˆ†ç»„-DataId</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214124351057.png" alt="image-20221214124351057"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221214121109522.png" alt="image-20221214121109522"></p><h3 id="nacosé›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#nacosé›†ç¾¤" aria-hidden="true">#</a> Nacosé›†ç¾¤</h3><h2 id="sentinel" tabindex="-1"><a class="header-anchor" href="#sentinel" aria-hidden="true">#</a> Sentinel</h2><p>https://sentinelguard.io/zh-cn/</p><p>https://github.com/alibaba/Sentinel</p><p>https://sentinelguard.io/zh-cn/docs/introduction.html</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219091647903.png" alt="image-20221219091647903"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219091608139.png" alt="image-20221219091608139"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219091714052.png" alt="image-20221219091714052"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219091843841.png" alt="image-20221219091843841"></p><h3 id="æ•´åˆspringbooté¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#æ•´åˆspringbooté¡¹ç›®" aria-hidden="true">#</a> æ•´åˆSpringBooté¡¹ç›®</h3><h4 id="ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> ç¯å¢ƒé…ç½®</h4><blockquote><p><strong>â‘ å¼•å…¥spring-cloud-starter-alibaba-sentinelåœºæ™¯å¯åŠ¨å™¨</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>â‘¡å¯åŠ¨å®˜ç½‘ä¸‹è½½çš„dashboardçš„jaråŒ…è¿›è¡Œå¯è§†åŒ–ç›‘æ§å’Œé…ç½®sentinel-dashboard-1.8.1.jar</strong></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230324234155675.png" alt="image-20230324234155675"></p><p><strong>â‘¢æ¯ä¸ªæœåŠ¡ä¸­é…ç½®</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token comment">#é…ç½®sentinel dashboardåœ°å€</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8333</span>
        <span class="token comment">#é»˜è®¤8719ç«¯å£ï¼Œå‡å¦‚è¢«å ç”¨ä¼šè‡ªåŠ¨ä»8719å¼€å§‹ä¾æ¬¡+1æ‰«æï¼Œç›´è‡³æ‰¾åˆ°æœªè¢«å ç”¨çš„ç«¯å£</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8719</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>â‘£å¼€å¯å®æ—¶ç›‘æ§</strong> å¼•å…¥actuatorä¾èµ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡é…ç½®</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">management.endpoints.web.exposure.include</span><span class="token punctuation">=</span><span class="token value attr-value">*</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230325000906373.png" alt="image-20230325000906373"><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230324234312746.png" alt="image-20230324234312746"></p><h4 id="è‡ªå®šä¹‰é…ç½®" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰é…ç½®" aria-hidden="true">#</a> è‡ªå®šä¹‰é…ç½®</h4><h5 id="é…ç½®é™æµçš„å“åº”æ•°æ®" tabindex="-1"><a class="header-anchor" href="#é…ç½®é™æµçš„å“åº”æ•°æ®" aria-hidden="true">#</a> é…ç½®é™æµçš„å“åº”æ•°æ®</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token comment">//TODO è‡ªå®šä¹‰æµæ§å“åº”æ•°æ®</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SentinelGlobalConfig</span> <span class="token keyword">implements</span> <span class="token class-name">UrlBlockHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">blocked</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> httpServletRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> httpServletResponse<span class="token punctuation">,</span> <span class="token class-name">BlockException</span> e<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token class-name">R</span> error <span class="token operator">=</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">BizCodeEnum</span><span class="token punctuation">.</span><span class="token constant">CURRENT_LIMITING_EXCEPTION</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">BizCodeEnum</span><span class="token punctuation">.</span><span class="token constant">CURRENT_LIMITING_EXCEPTION</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpServletResponse<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpServletResponse<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token doc-comment comment">/**
         BlockException å¼‚å¸¸æ¥å£ï¼Œå…¶å­ç±»ä¸ºSentineläº”ç§è§„åˆ™å¼‚å¸¸çš„å®ç°ç±»
         AuthorityException æˆæƒå¼‚å¸¸
         DegradeException é™çº§å¼‚å¸¸
         FlowException é™æµå¼‚å¸¸
         ParamFlowException å‚æ•°é™æµå¼‚å¸¸
         SystemBlockException ç³»ç»Ÿè´Ÿè½½å¼‚å¸¸
         String msg = null;
         if (e instanceof FlowException) <span class="token punctuation">{</span>
         msg = &quot;é™æµäº†&quot;;
         <span class="token punctuation">}</span> else if (e instanceof DegradeException) <span class="token punctuation">{</span>
         msg = &quot;é™çº§äº†&quot;;
         <span class="token punctuation">}</span> else if (e instanceof ParamFlowException) <span class="token punctuation">{</span>
         msg = &quot;çƒ­ç‚¹å‚æ•°é™æµ&quot;;
         <span class="token punctuation">}</span> else if (e instanceof SystemBlockException) <span class="token punctuation">{</span>
         msg = &quot;ç³»ç»Ÿè§„åˆ™ï¼ˆè´Ÿè½½/...ä¸æ»¡è¶³è¦æ±‚ï¼‰&quot;;
         <span class="token punctuation">}</span> else if (e instanceof AuthorityException) <span class="token punctuation">{</span>
         msg = &quot;æˆæƒè§„åˆ™ä¸é€šè¿‡&quot;;
         <span class="token punctuation">}</span>
         */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ•´åˆopenfeignçš„ç†”æ–­å’Œé™çº§é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ•´åˆopenfeignçš„ç†”æ–­å’Œé™çº§é…ç½®" aria-hidden="true">#</a> æ•´åˆOpenFeignçš„ç†”æ–­å’Œé™çº§é…ç½®</h4><blockquote><p>å¯ä»¥å¯¹è°ƒç”¨æ–¹è¿›è¡ŒæœåŠ¡çš„ç†”æ–­å’Œé™çº§é…ç½® ä¹Ÿå¯ä»¥å¯¹æœåŠ¡æ–¹è¿›è¡Œé™çº§å’Œç†”æ–­çš„é…ç½®</p></blockquote><p><strong>openFeignçš„é™çº§éœ€è¦å¸¦é™çº§çš„æ¡†æ¶æ”¯æŒ</strong>ï¼Œï¼ˆæ¶ˆè´¹ç«¯ä½¿ç”¨ï¼‰åœ¨å­¦ä¹ OpenFiegnçš„æ—¶å€™æ”¯æŒé™çº§çš„æ¡†æ¶ä½¿ç”¨çš„æ˜¯<strong>Hystrix</strong>ï¼Œè¿™æ¬¡æ˜¯<strong>Sentinel</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>		<span class="token comment">&lt;!--SpringCloud openfeign --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--SpringCloud ailibaba nacos --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--SpringCloud ailibaba sentinel --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230325144108081.png" alt="image-20230325144108081"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230325144425227.png" alt="image-20230325144425227"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230325144853722.png" alt="image-20230325144853722"></p><h3 id="sentinelæ‘˜è¦" tabindex="-1"><a class="header-anchor" href="#sentinelæ‘˜è¦" aria-hidden="true">#</a> Sentinelæ‘˜è¦</h3><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219192750173.png" alt="image-20221219192750173"></p><h4 id="ç»„æˆ" tabindex="-1"><a class="header-anchor" href="#ç»„æˆ" aria-hidden="true">#</a> ç»„æˆ</h4><p>Sentinel ä¸»è¦ç”±ä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p><ul><li>Sentinel æ ¸å¿ƒåº“ï¼šSentinel çš„æ ¸å¿ƒåº“ä¸ä¾èµ–ä»»ä½•æ¡†æ¶æˆ–åº“ï¼Œèƒ½å¤Ÿè¿è¡Œäº Java 8 åŠä»¥ä¸Šçš„ç‰ˆæœ¬çš„è¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼ŒåŒæ—¶å¯¹ Spring Cloudã€Dubbo ç­‰å¾®æœåŠ¡æ¡†æ¶æä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚</li><li>Sentinel æ§åˆ¶å°ï¼ˆDashboardï¼‰ï¼šSentinel æä¾›çš„ä¸€ä¸ªè½»é‡çº§çš„å¼€æºæ§åˆ¶å°ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†æœºå™¨è‡ªå‘ç°ã€ç°‡ç‚¹é“¾è·¯è‡ªå‘ç°ã€ç›‘æ§ã€è§„åˆ™é…ç½®ç­‰åŠŸèƒ½ã€‚</li></ul><p>Sentinel æ ¸å¿ƒåº“ä¸ä¾èµ– Sentinel Dashboardï¼Œä½†ä¸¤è€…ç»“åˆä½¿ç”¨å¯ä»¥æœ‰æ•ˆçš„æé«˜æ•ˆç‡ï¼Œè®© Sentinel å‘æŒ¥å®ƒæœ€å¤§çš„ä½œç”¨ã€‚</p><h4 id="sentinel-çš„åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#sentinel-çš„åŸºæœ¬æ¦‚å¿µ" aria-hidden="true">#</a> Sentinel çš„åŸºæœ¬æ¦‚å¿µ</h4><p>Sentinel çš„åŸºæœ¬æ¦‚å¿µæœ‰ä¸¤ä¸ªï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š<strong>èµ„æº</strong>å’Œ<strong>è§„åˆ™</strong>ã€‚</p><table><thead><tr><th>åŸºæœ¬æ¦‚å¿µ</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>èµ„æº</strong></td><td>èµ„æºæ˜¯ Sentinel çš„å…³é”®æ¦‚å¿µã€‚å®ƒå¯ä»¥æ˜¯ Java åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•å†…å®¹ï¼Œä¾‹å¦‚ç”±åº”ç”¨ç¨‹åºæä¾›çš„æœåŠ¡æˆ–è€…æ˜¯æœåŠ¡é‡Œçš„æ–¹æ³•ï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸€æ®µä»£ç ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ Sentinel æä¾›çš„ API æ¥å®šä¹‰ä¸€ä¸ªèµ„æºï¼Œä½¿å…¶èƒ½å¤Ÿè¢« Sentinel ä¿æŠ¤èµ·æ¥ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–¹æ³•åã€URL ç”šè‡³æ˜¯æœåŠ¡åæ¥ä½œä¸ºèµ„æºåæ¥æè¿°æŸä¸ªèµ„æºã€‚</td></tr><tr><td><strong>è§„åˆ™</strong></td><td>å›´ç»•èµ„æºè€Œè®¾å®šçš„è§„åˆ™ã€‚Sentinel æ”¯æŒæµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿä¿æŠ¤ã€æ¥æºè®¿é—®æ§åˆ¶å’Œçƒ­ç‚¹å‚æ•°ç­‰å¤šç§è§„åˆ™ï¼Œæ‰€æœ‰è¿™äº›è§„åˆ™éƒ½å¯ä»¥åŠ¨æ€å®æ—¶è°ƒæ•´ã€‚</td></tr></tbody></table><h4 id="sentinel-æ§åˆ¶å°" tabindex="-1"><a class="header-anchor" href="#sentinel-æ§åˆ¶å°" aria-hidden="true">#</a> Sentinel æ§åˆ¶å°</h4><p>Sentinel æä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„å¼€æºæ§åˆ¶å° Sentinel Dashboardï¼Œå®ƒæä¾›äº†æœºå™¨å‘ç°ä¸å¥åº·æƒ…å†µç®¡ç†ã€ç›‘æ§ï¼ˆå•æœºå’Œé›†ç¾¤ï¼‰ã€è§„åˆ™ç®¡ç†ä¸æ¨é€ç­‰å¤šç§åŠŸèƒ½ã€‚</p><p>Sentinel æ§åˆ¶å°æä¾›çš„åŠŸèƒ½å¦‚ä¸‹:</p><ul><li><strong>æŸ¥çœ‹æœºå™¨åˆ—è¡¨ä»¥åŠå¥åº·æƒ…å†µ</strong>ï¼šSentinel æ§åˆ¶å°èƒ½å¤Ÿæ”¶é›† Sentinel å®¢æˆ·ç«¯å‘é€çš„å¿ƒè·³åŒ…ï¼Œåˆ¤æ–­æœºå™¨æ˜¯å¦åœ¨çº¿ã€‚</li><li><strong>ç›‘æ§ï¼ˆå•æœºå’Œé›†ç¾¤èšåˆï¼‰</strong>ï¼šSentinel æ§åˆ¶å°é€šè¿‡ Sentinel å®¢æˆ·ç«¯æš´éœ²çš„ç›‘æ§ APIï¼Œå¯ä»¥å®ç°ç§’çº§çš„å®æ—¶ç›‘æ§ã€‚</li><li><strong>è§„åˆ™ç®¡ç†å’Œæ¨é€</strong>ï¼šé€šè¿‡ Sentinel æ§åˆ¶å°ï¼Œæˆ‘ä»¬è¿˜èƒ½å¤Ÿé’ˆå¯¹èµ„æºå®šä¹‰å’Œæ¨é€è§„åˆ™ã€‚</li><li><strong>é‰´æƒ</strong>ï¼šä» Sentinel 1.6.0 èµ·ï¼ŒSentinel æ§åˆ¶å°å¼•å…¥åŸºæœ¬çš„ç™»å½•åŠŸèƒ½ï¼Œé»˜è®¤ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯ sentinelã€‚</li></ul><p>Sentinel Dashboard æ˜¯æˆ‘ä»¬é…ç½®å’Œç®¡ç†è§„åˆ™ï¼ˆä¾‹å¦‚æµæ§è§„åˆ™ã€ç†”æ–­é™çº§è§„åˆ™ç­‰ï¼‰çš„é‡è¦å…¥å£ä¹‹ä¸€ã€‚é€šè¿‡å®ƒï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥å¯¹è§„åˆ™è¿›è¡Œé…ç½®å’Œç®¡ç†ï¼Œè¿˜èƒ½å®æ—¶æŸ¥çœ‹è§„åˆ™çš„æ•ˆæœã€‚</p><p><strong>å®‰è£…å¯åŠ¨</strong></p><p><a href="https://github.com/alibaba/Sentinel/releases" target="_blank" rel="noopener noreferrer">Releases Â· alibaba/Sentinel (github.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œè·³è½¬åˆ° Sentinel Dashboard jar åŒ…æ‰€åœ¨çš„ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨ Sentinel Dashboardã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>java -jar sentinel-dashboard-1.8.2.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>â€œhttp://localhost:8080/â€é»˜è®¤æŒ‡å®šçš„portä¸º8080</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219094623354.png" alt="image-20221219094623354"></p><h3 id="sentinelæµæ§" tabindex="-1"><a class="header-anchor" href="#sentinelæµæ§" aria-hidden="true">#</a> Sentinelæµæ§</h3><p><strong>æµé‡æ§åˆ¶ï¼ˆflow controlï¼‰</strong>ï¼Œå…¶åŸç†æ˜¯<strong>ç›‘æ§åº”ç”¨æµé‡</strong>çš„ <strong>QPS</strong> æˆ–<strong>å¹¶å‘çº¿ç¨‹æ•°</strong>ç­‰<strong>æŒ‡æ ‡</strong>ï¼Œå½“<strong>è¾¾åˆ°æŒ‡å®šçš„é˜ˆå€¼</strong>æ—¶<strong>å¯¹æµé‡è¿›è¡Œæ§åˆ¶</strong>ï¼Œä»¥<strong>é¿å…è¢«ç¬æ—¶çš„æµé‡é«˜å³°å†²å®</strong>ï¼Œä»è€Œ<strong>ä¿éšœåº”ç”¨çš„é«˜å¯ç”¨</strong>æ€§</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219113218235.png" alt="image-20221219113218235"></p><p><strong><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219112659361.png" alt="image-20221219112659361"></strong></p><h4 id="é˜ˆå€¼ç±»å‹" tabindex="-1"><a class="header-anchor" href="#é˜ˆå€¼ç±»å‹" aria-hidden="true">#</a> é˜ˆå€¼ç±»å‹</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219122206180.png" alt="image-20221219122206180"></p><h5 id="qps" tabindex="-1"><a class="header-anchor" href="#qps" aria-hidden="true">#</a> QPS</h5><p>Query per second--æ¯ç§’çš„è¯·æ±‚æ¬¡æ•°ï¼ˆè¶…å‡ºé˜ˆå€¼å°±é™æµï¼‰</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219113452879.png" alt="image-20221219113452879"></p><h5 id="çº¿ç¨‹æ•°" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹æ•°" aria-hidden="true">#</a> çº¿ç¨‹æ•°</h5><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219121044943.png" alt="image-20221219121044943"></p><p>å½“æœ‰é˜ˆå€¼çš„çº¿ç¨‹åœ¨æ‰§è¡Œä¸­ åç»­çš„çº¿ç¨‹è¢«é™æµ</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219121938061.png" alt="image-20221219121938061"></p><h4 id="æµæ§æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#æµæ§æ¨¡å¼" aria-hidden="true">#</a> æµæ§æ¨¡å¼</h4><h5 id="ç›´æ¥" tabindex="-1"><a class="header-anchor" href="#ç›´æ¥" aria-hidden="true">#</a> ç›´æ¥</h5><p>ç›´æ¥å¯¹æ­¤èµ„æºè¿›è¡Œæµæ§</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219122102344.png" alt="image-20221219122102344"></p><h5 id="å…³è”" tabindex="-1"><a class="header-anchor" href="#å…³è”" aria-hidden="true">#</a> å…³è”</h5><p>å¯ä»¥è®¾å®šé«˜ä¼˜å…ˆçº§èµ„æºè§¦å‘é˜ˆå€¼ï¼Œå¯¹ä½ä¼˜å…ˆçº§èµ„æºé™æµ</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219122225166.png" alt="image-20221219122225166"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219144723641.png" alt="image-20221219144723641"></p><h5 id="é“¾è·¯" tabindex="-1"><a class="header-anchor" href="#é“¾è·¯" aria-hidden="true">#</a> é“¾è·¯</h5><p>é˜ˆå€¼ç»Ÿè®¡æ—¶ï¼Œåªç»Ÿè®¡ä»æŒ‡å®šèµ„æºè¿›å…¥å½“å‰èµ„æºçš„è¯·æ±‚ï¼Œæ˜¯å¯¹è¯·æ±‚æ¥æºçš„é™æµ</p><p><code>NodeSelectorSlot</code> ä¸­è®°å½•äº†èµ„æºä¹‹é—´çš„è°ƒç”¨é“¾è·¯ï¼Œè¿™äº›èµ„æºé€šè¿‡è°ƒç”¨å…³ç³»ï¼Œç›¸äº’ä¹‹é—´æ„æˆä¸€æ£µè°ƒç”¨æ ‘ã€‚è¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯ä¸€ä¸ªåå­—ä¸º <code>machine-root</code> çš„è™šæ‹ŸèŠ‚ç‚¹ï¼Œè°ƒç”¨é“¾çš„å…¥å£éƒ½æ˜¯è¿™ä¸ªè™šèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚</p><p>ä¸€æ£µå…¸å‹çš„è°ƒç”¨æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>     	          machine-root
                    /       \
                   /         \
             Entrance1     Entrance2
                /             \
               /               \
      DefaultNode(nodeA)   DefaultNode(nodeA)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šå›¾ä¸­æ¥è‡ªå…¥å£ <code>Entrance1</code> å’Œ <code>Entrance2</code> çš„è¯·æ±‚éƒ½è°ƒç”¨åˆ°äº†èµ„æº <code>NodeA</code>ï¼ŒSentinel å…è®¸åªæ ¹æ®æŸä¸ªå…¥å£çš„ç»Ÿè®¡ä¿¡æ¯å¯¹èµ„æºé™æµã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®¾ç½® <code>FlowRule.strategy</code> ä¸º <code>RuleConstant.CHAIN</code>ï¼ŒåŒæ—¶è®¾ç½® <code>FlowRule.ref_identity</code> ä¸º <code>Entrance1</code> æ¥è¡¨ç¤ºåªæœ‰ä»å…¥å£ <code>Entrance1</code> çš„è°ƒç”¨æ‰ä¼šè®°å½•åˆ° <code>NodeA</code> çš„é™æµç»Ÿè®¡å½“ä¸­ï¼Œè€Œå¯¹æ¥è‡ª <code>Entrance2</code> çš„è°ƒç”¨æ¼ ä¸å…³å¿ƒã€‚</p><p>è°ƒç”¨é“¾çš„å…¥å£æ˜¯é€šè¿‡ API æ–¹æ³• <code>ContextUtil.enter(name)</code> å®šä¹‰çš„</p><h4 id="æµæ§æ•ˆæœ-åªæœ‰qpsæ”¯æŒé€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#æµæ§æ•ˆæœ-åªæœ‰qpsæ”¯æŒé€‰é¡¹" aria-hidden="true">#</a> æµæ§æ•ˆæœï¼ˆåªæœ‰QPSæ”¯æŒé€‰é¡¹ï¼‰</h4><h5 id="å¿«é€Ÿå¤±è´¥" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿå¤±è´¥" aria-hidden="true">#</a> å¿«é€Ÿå¤±è´¥</h5><p><strong>ç›´æ¥æ‹’ç»</strong>ï¼ˆ<code>RuleConstant.CONTROL_BEHAVIOR_DEFAULT</code>ï¼‰æ–¹å¼ã€‚è¯¥æ–¹å¼æ˜¯é»˜è®¤çš„æµé‡æ§åˆ¶æ–¹å¼ï¼Œå½“QPSè¶…è¿‡ä»»æ„è§„åˆ™çš„é˜ˆå€¼åï¼Œæ–°çš„è¯·æ±‚å°±ä¼šè¢«ç«‹å³æ‹’ç»ï¼Œæ‹’ç»æ–¹å¼ä¸ºæŠ›å‡º<code>FlowException</code>ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºå¯¹ç³»ç»Ÿå¤„ç†èƒ½åŠ›ç¡®åˆ‡å·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚é€šè¿‡å‹æµ‹ç¡®å®šäº†ç³»ç»Ÿçš„å‡†ç¡®æ°´ä½æ—¶</p><h5 id="warm-up" tabindex="-1"><a class="header-anchor" href="#warm-up" aria-hidden="true">#</a> Warm up</h5><p>é¢„çƒ­</p><p><strong>å†·å¯åŠ¨</strong>ï¼ˆ<code>RuleConstant.CONTROL_BEHAVIOR_WARM_UP</code>ï¼‰æ–¹å¼ã€‚è¯¥æ–¹å¼ä¸»è¦ç”¨äºç³»ç»Ÿé•¿æœŸå¤„äºä½æ°´ä½çš„æƒ…å†µä¸‹ï¼Œå½“æµé‡çªç„¶å¢åŠ æ—¶ï¼Œç›´æ¥æŠŠç³»ç»Ÿæ‹‰å‡åˆ°é«˜æ°´ä½å¯èƒ½ç¬é—´æŠŠç³»ç»Ÿå‹å®ã€‚é€šè¿‡&quot;å†·å¯åŠ¨&quot;ï¼Œè®©é€šè¿‡çš„æµé‡ç¼“æ…¢å¢åŠ ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…é€æ¸å¢åŠ åˆ°é˜ˆå€¼ä¸Šé™ï¼Œç»™å†·ç³»ç»Ÿä¸€ä¸ªé¢„çƒ­çš„æ—¶é—´ï¼Œé¿å…å†·ç³»ç»Ÿè¢«å‹å®çš„æƒ…å†µ</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219145341147.png" alt="image-20221219145341147"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219145302667.png" alt="image-20221219145302667"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219145322214.png" alt="image-20221219145322214"></p><p>é€šå¸¸å†·å¯åŠ¨çš„è¿‡ç¨‹ç³»ç»Ÿå…è®¸é€šè¿‡çš„ QPS æ›²çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219145112529.png" alt="image-20221219145112529"></p><h5 id="æ’é˜Ÿç­‰å¾…" tabindex="-1"><a class="header-anchor" href="#æ’é˜Ÿç­‰å¾…" aria-hidden="true">#</a> æ’é˜Ÿç­‰å¾…</h5><ol><li>åŒ€é€Ÿå™¨ï¼ˆ<code>RuleConstant.CONTROL_BEHAVIOR_RATE_LIMITER</code>ï¼‰æ–¹å¼ã€‚è¿™ç§æ–¹å¼ä¸¥æ ¼æ§åˆ¶äº†è¯·æ±‚é€šè¿‡çš„é—´éš”æ—¶é—´ï¼Œä¹Ÿå³æ˜¯è®©è¯·æ±‚ä»¥å‡åŒ€çš„é€Ÿåº¦é€šè¿‡ï¼Œå¯¹åº”çš„æ˜¯æ¼æ¡¶ç®—æ³•ã€‚å…·ä½“çš„ä¾‹å­å‚è§ <a href="https://github.com/alibaba/Sentinel/blob/master/sentinel-demo/sentinel-demo-basic/src/main/java/com/alibaba/csp/sentinel/demo/flow/PaceFlowDemo.java" target="_blank" rel="noopener noreferrer">PaceFlowDemo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</li></ol><p>è¯¥æ–¹å¼çš„ä½œç”¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219145526064.png" alt="image-20221219145526064"></p><p>è¿™ç§æ–¹å¼ä¸»è¦ç”¨äº<strong>å¤„ç†é—´éš”æ€§çªå‘çš„æµé‡</strong>ï¼Œä¾‹å¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€‚æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼Œåœ¨<strong>æŸä¸€ç§’æœ‰å¤§é‡çš„è¯·æ±‚åˆ°æ¥ï¼Œè€Œæ¥ä¸‹æ¥çš„å‡ ç§’åˆ™å¤„äºç©ºé—²çŠ¶æ€</strong>ï¼Œæˆ‘ä»¬å¸Œæœ›ç³»ç»Ÿèƒ½å¤Ÿ<strong>åœ¨æ¥ä¸‹æ¥çš„ç©ºé—²æœŸé—´é€æ¸å¤„ç†è¿™äº›è¯·æ±‚</strong>ï¼Œè€Œä¸æ˜¯åœ¨ç¬¬ä¸€ç§’ç›´æ¥æ‹’ç»å¤šä½™çš„è¯·æ±‚ã€‚</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219150405238.png" alt="image-20221219150405238"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219150254298.png" alt="image-20221219150254298"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219150336314.png" alt="image-20221219150336314"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219150351363.png" alt="image-20221219150351363"></p><h3 id="cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯" aria-hidden="true">#</a> cmdæ˜¾ç¤ºèµ„æºçš„å®æ—¶ç»Ÿè®¡ä¿¡æ¯</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl http://localhost:8719/cnode?id=testD-resource
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>idx id                thread    pass      blocked   success    total    aRt   1m-pass   1m-block   1m-all   exceptio
2   testD-resource      0        0.0       0.0       0.0        0.0      0.0   10        16         26       0.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å®æ—¶ç»Ÿè®¡ä¿¡æ¯å„åˆ—åè¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>threadï¼š ä»£è¡¨å½“å‰å¤„ç†è¯¥èµ„æºçš„å¹¶å‘æ•°ï¼›</li><li>passï¼š ä»£è¡¨ä¸€ç§’å†…åˆ°æ¥åˆ°çš„è¯·æ±‚ï¼›</li><li>blockedï¼š ä»£è¡¨ä¸€ç§’å†…è¢«æµé‡æ§åˆ¶çš„è¯·æ±‚æ•°é‡ï¼›</li><li>successï¼š ä»£è¡¨ä¸€ç§’å†…æˆåŠŸå¤„ç†å®Œçš„è¯·æ±‚ï¼›</li><li>totalï¼š ä»£è¡¨åˆ°ä¸€ç§’å†…åˆ°æ¥çš„è¯·æ±‚ä»¥åŠè¢«é˜»æ­¢çš„è¯·æ±‚æ€»å’Œï¼›</li><li>RTï¼š ä»£è¡¨ä¸€ç§’å†…è¯¥èµ„æºçš„å¹³å‡å“åº”æ—¶é—´ï¼›</li><li>1m-passï¼š åˆ™æ˜¯ä¸€åˆ†é’Ÿå†…åˆ°æ¥çš„è¯·æ±‚ï¼›</li><li>1m-blockï¼š åˆ™æ˜¯ä¸€åˆ†é’Ÿå†…è¢«é˜»æ­¢çš„è¯·æ±‚ï¼›</li><li>1m-allï¼š åˆ™æ˜¯ä¸€åˆ†é’Ÿå†…åˆ°æ¥çš„è¯·æ±‚å’Œè¢«é˜»æ­¢çš„è¯·æ±‚çš„æ€»å’Œï¼›</li><li>exceptionï¼š åˆ™æ˜¯ä¸€ç§’å†…ä¸šåŠ¡æœ¬èº«å¼‚å¸¸çš„æ€»å’Œã€‚</li></ul><h3 id="sentinelç†”æ–­é™çº§" tabindex="-1"><a class="header-anchor" href="#sentinelç†”æ–­é™çº§" aria-hidden="true">#</a> Sentinelç†”æ–­é™çº§</h3><h4 id="ç†”æ–­è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#ç†”æ–­è§„åˆ™" aria-hidden="true">#</a> ç†”æ–­è§„åˆ™</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219155826676.png" alt="image-20221219155826676"></p><table><thead><tr><th>ç†”æ–­ç­–ç•¥</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ…¢è°ƒç”¨æ¯”ä¾‹ (SLOW_REQUEST_RATIOï¼‰</td><td>é€‰æ‹©ä»¥æ…¢è°ƒç”¨æ¯”ä¾‹ä½œä¸ºé˜ˆå€¼ï¼Œéœ€è¦è®¾ç½®å…è®¸çš„æ…¢è°ƒç”¨ RTï¼ˆå³æœ€å¤§å“åº”æ—¶é—´ï¼‰ï¼Œè‹¥è¯·æ±‚çš„å“åº”æ—¶é—´å¤§äºè¯¥å€¼åˆ™ç»Ÿè®¡ä¸ºæ…¢è°ƒç”¨ã€‚ å½“å•ä½ç»Ÿè®¡æ—¶é•¿ï¼ˆstatIntervalMsï¼‰å†…è¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ï¼Œä¸”æ…¢è°ƒç”¨çš„æ¯”ä¾‹å¤§äºé˜ˆå€¼ï¼Œåˆ™æ¥ä¸‹æ¥çš„ç†”æ–­æ—¶é•¿å†…è¯·æ±‚ä¼šè‡ªåŠ¨è¢«ç†”æ–­ã€‚ ç»è¿‡ç†”æ–­æ—¶é•¿åç†”æ–­å™¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€ï¼ˆHALF-OPEN çŠ¶æ€ï¼‰ï¼Œè‹¥æ¥ä¸‹æ¥çš„ä¸€ä¸ªè¯·æ±‚å“åº”æ—¶é—´å°äºè®¾ç½®çš„æ…¢è°ƒç”¨ RT åˆ™ç»“æŸç†”æ–­ï¼Œè‹¥å¤§äºè®¾ç½®çš„æ…¢è°ƒç”¨ RT åˆ™å†æ¬¡è¢«ç†”æ–­ã€‚</td></tr><tr><td>å¼‚å¸¸æ¯”ä¾‹ (ERROR_RATIO)</td><td>å½“å•ä½ç»Ÿè®¡æ—¶é•¿ï¼ˆstatIntervalMsï¼‰å†…è¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ä¸”å¼‚å¸¸çš„æ¯”ä¾‹å¤§äºé˜ˆå€¼ï¼Œåˆ™åœ¨æ¥ä¸‹æ¥çš„ç†”æ–­æ—¶é•¿å†…è¯·æ±‚ä¼šè‡ªåŠ¨è¢«ç†”æ–­ã€‚ ç»è¿‡ç†”æ–­æ—¶é•¿åç†”æ–­å™¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€ï¼ˆHALF-OPEN çŠ¶æ€ï¼‰ï¼Œè‹¥æ¥ä¸‹æ¥çš„ä¸€ä¸ªè¯·æ±‚æˆåŠŸå®Œæˆï¼ˆæ²¡æœ‰é”™è¯¯ï¼‰åˆ™ç»“æŸç†”æ–­ï¼Œå¦åˆ™ä¼šå†æ¬¡è¢«ç†”æ–­ã€‚å¼‚å¸¸æ¯”ç‡çš„é˜ˆå€¼èŒƒå›´æ˜¯ [0.0, 1.0]ï¼Œä»£è¡¨ 0% - 100%ã€‚</td></tr><tr><td>å¼‚å¸¸æ•° (ERROR_COUNT)</td><td>å½“å•ä½ç»Ÿè®¡æ—¶é•¿å†…çš„å¼‚å¸¸æ•°ç›®è¶…è¿‡é˜ˆå€¼ä¹‹åä¼šè‡ªåŠ¨è¿›è¡Œç†”æ–­ã€‚ ç»è¿‡ç†”æ–­æ—¶é•¿åç†”æ–­å™¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€ï¼ˆHALF-OPEN çŠ¶æ€ï¼‰ï¼Œè‹¥æ¥ä¸‹æ¥çš„ä¸€ä¸ªè¯·æ±‚æˆåŠŸå®Œæˆï¼ˆæ²¡æœ‰é”™è¯¯ï¼‰åˆ™ç»“æŸç†”æ–­ï¼Œå¦åˆ™ä¼šå†æ¬¡è¢«ç†”æ–­ã€‚</td></tr></tbody></table><h5 id="rt" tabindex="-1"><a class="header-anchor" href="#rt" aria-hidden="true">#</a> RT</h5><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219161836692.png" alt="image-20221219161836692"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219165205209.png" alt="image-20221219165205209"></p><h5 id="å¼‚å¸¸æ¯”ä¾‹" tabindex="-1"><a class="header-anchor" href="#å¼‚å¸¸æ¯”ä¾‹" aria-hidden="true">#</a> å¼‚å¸¸æ¯”ä¾‹</h5><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219175011088.png" alt="image-20221219175011088"></p><h5 id="å¼‚å¸¸æ•°" tabindex="-1"><a class="header-anchor" href="#å¼‚å¸¸æ•°" aria-hidden="true">#</a> å¼‚å¸¸æ•°</h5><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219174957968.png" alt="image-20221219174957968"></p><h4 id="ç†”æ–­çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#ç†”æ–­çŠ¶æ€" aria-hidden="true">#</a> ç†”æ–­çŠ¶æ€</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219155930496.png" alt="image-20221219155930496"></p><table><thead><tr><th>çŠ¶æ€</th><th>è¯´æ˜</th><th>è§¦å‘æ¡ä»¶</th></tr></thead><tbody><tr><td>ç†”æ–­å…³é—­çŠ¶æ€ ï¼ˆCLOSEDï¼‰</td><td>å¤„äºå…³é—­çŠ¶æ€æ—¶ï¼Œè¯·æ±‚å¯ä»¥æ­£å¸¸è°ƒç”¨èµ„æºã€‚</td><td>æ»¡è¶³ä»¥ä¸‹ä»»æ„æ¡ä»¶ï¼ŒSentinel ç†”æ–­å™¨è¿›å…¥ç†”æ–­å…³é—­çŠ¶æ€ï¼šå…¨éƒ¨è¯·æ±‚è®¿é—®æˆåŠŸã€‚å•ä½ç»Ÿè®¡æ—¶é•¿ï¼ˆstatIntervalMsï¼‰å†…è¯·æ±‚æ•°ç›®å°äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ã€‚æœªè¾¾åˆ°ç†”æ–­æ ‡å‡†ï¼Œä¾‹å¦‚æœåŠ¡è¶…æ—¶æ¯”ä¾‹ã€å¼‚å¸¸æ•°ã€å¼‚å¸¸æ¯”ä¾‹æœªè¾¾åˆ°é˜ˆå€¼ã€‚å¤„äºæ¢æµ‹æ¢å¤çŠ¶æ€æ—¶ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚è®¿é—®æˆåŠŸã€‚</td></tr><tr><td>ç†”æ–­å¼€å¯çŠ¶æ€ ï¼ˆOPENï¼‰</td><td>å¤„äºç†”æ–­å¼€å¯çŠ¶æ€æ—¶ï¼Œç†”æ–­å™¨ä¼šä¸€å®šçš„æ—¶é—´ï¼ˆè§„å®šçš„ç†”æ–­æ—¶é•¿ï¼‰å†…ï¼Œæš‚æ—¶åˆ‡æ–­æ‰€æœ‰è¯·æ±‚å¯¹è¯¥èµ„æºçš„è°ƒç”¨ï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„é™çº§é€»è¾‘ä½¿è¯·æ±‚å¿«é€Ÿå¤±è´¥é¿å…ç³»ç»Ÿå´©æºƒã€‚</td><td>æ»¡è¶³ä»¥ä¸‹ä»»æ„æ¡ä»¶ï¼ŒSentinel ç†”æ–­å™¨è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ï¼šå•ä½ç»Ÿè®¡æ—¶é•¿å†…è¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ï¼Œä¸”å·²è¾¾åˆ°ç†”æ–­æ ‡å‡†ï¼Œä¾‹å¦‚è¯·æ±‚è¶…æ—¶æ¯”ä¾‹ã€å¼‚å¸¸æ•°ã€å¼‚å¸¸æ¯”ä¾‹è¾¾åˆ°é˜ˆå€¼ã€‚å¤„äºæ¢æµ‹æ¢å¤çŠ¶æ€æ—¶ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚è®¿é—®å¤±è´¥ã€‚</td></tr><tr><td>æ¢æµ‹æ¢å¤çŠ¶æ€ ï¼ˆHALF-OPENï¼‰</td><td>å¤„äºæ¢æµ‹æ¢å¤çŠ¶æ€æ—¶ï¼ŒSentinel ç†”æ–­å™¨ä¼šå…è®¸ä¸€ä¸ªè¯·æ±‚è°ƒç”¨èµ„æºã€‚åˆ™è‹¥æ¥ä¸‹æ¥çš„ä¸€ä¸ªè¯·æ±‚æˆåŠŸå®Œæˆï¼ˆæ²¡æœ‰é”™è¯¯ï¼‰åˆ™ç»“æŸç†”æ–­ï¼Œç†”æ–­å™¨è¿›å…¥ç†”æ–­å…³é—­ï¼ˆCLOSEDï¼‰çŠ¶æ€ï¼›å¦åˆ™ä¼šå†æ¬¡è¢«ç†”æ–­ï¼Œç†”æ–­å™¨è¿›å…¥ç†”æ–­å¼€å¯ï¼ˆOPENï¼‰çŠ¶æ€ã€‚</td><td>åœ¨ç†”æ–­å¼€å¯ä¸€æ®µæ—¶é—´ï¼ˆé™çº§çª—å£æ—¶é—´æˆ–ç†”æ–­æ—¶é•¿ï¼Œå•ä½ä¸º sï¼‰åï¼ŒSentinel ç†”æ–­å™¨è‡ªåŠ¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€ã€‚</td></tr></tbody></table><h4 id="sentinel-å®ç°ç†”æ–­é™çº§è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#sentinel-å®ç°ç†”æ–­é™çº§è¿‡ç¨‹" aria-hidden="true">#</a> Sentinel å®ç°ç†”æ–­é™çº§è¿‡ç¨‹</h4><p>Sentinel å®ç°ç†”æ–­é™çº§çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åœ¨é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ @SentinelResource æ³¨è§£çš„ fallback å±æ€§å¯ä»¥ä¸ºèµ„æºæŒ‡å®šç†”æ–­é™çº§é€»è¾‘ï¼ˆæ–¹æ³•ï¼‰ã€‚</li><li>é€šè¿‡ Sentinel æ§åˆ¶å°æˆ–ä»£ç å®šä¹‰ç†”æ–­è§„åˆ™ï¼ŒåŒ…æ‹¬ç†”æ–­ç­–ç•¥ã€æœ€å°è¯·æ±‚æ•°ã€é˜ˆå€¼ã€ç†”æ–­æ—¶é•¿ä»¥åŠç»Ÿè®¡æ—¶é•¿ç­‰ã€‚</li><li>è‹¥å•ä½ç»Ÿè®¡æ—¶é•¿ï¼ˆstatIntervalMsï¼‰å†…ï¼Œè¯·æ±‚æ•°ç›®å¤§äºè®¾ç½®çš„æœ€å°è¯·æ±‚æ•°ç›®ä¸”è¾¾åˆ°ç†”æ–­æ ‡å‡†ï¼ˆä¾‹å¦‚è¯·æ±‚è¶…æ—¶æ¯”ä¾‹ã€å¼‚å¸¸æ•°ã€å¼‚å¸¸æ¯”ä¾‹è¾¾åˆ°é˜ˆå€¼ï¼‰ï¼ŒSentinel ç†”æ–­å™¨è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ï¼ˆOPENï¼‰ã€‚</li><li>å¤„äºç†”æ–­å¼€å¯çŠ¶æ€æ—¶ï¼Œ @SentinelResource æ³¨è§£çš„ fallback å±æ€§æŒ‡å®šçš„é™çº§é€»è¾‘ä¼šä¸´æ—¶å……å½“ä¸»ä¸šåŠ¡é€»è¾‘ï¼Œè€ŒåŸæ¥çš„ä¸»é€»è¾‘åˆ™æš‚æ—¶ä¸å¯ç”¨ã€‚å½“æœ‰è¯·æ±‚è®¿é—®è¯¥èµ„æºæ—¶ï¼Œä¼šç›´æ¥è°ƒç”¨é™çº§é€»è¾‘ä½¿è¯·æ±‚å¿«é€Ÿå¤±è´¥ï¼Œè€Œä¸ä¼šè°ƒç”¨åŸæ¥çš„ä¸»ä¸šåŠ¡é€»è¾‘ã€‚</li><li>åœ¨ç»è¿‡ä¸€æ®µæ—¶é—´ï¼ˆåœ¨ç†”æ–­è§„åˆ™ä¸­è®¾ç½®çš„ç†”æ–­æ—¶é•¿ï¼‰åï¼Œç†”æ–­å™¨ä¼šè¿›å…¥æ¢æµ‹æ¢å¤çŠ¶æ€ï¼ˆHALF-OPENï¼‰ï¼Œæ­¤æ—¶ Sentinel ä¼šå…è®¸ä¸€ä¸ªè¯·æ±‚å¯¹åŸæ¥çš„ä¸»ä¸šåŠ¡é€»è¾‘è¿›è¡Œè°ƒç”¨ï¼Œå¹¶ç›‘æ§å…¶è°ƒç”¨ç»“æœã€‚</li><li>è‹¥è¯·æ±‚è°ƒç”¨æˆåŠŸï¼Œåˆ™ç†”æ–­å™¨è¿›å…¥ç†”æ–­å…³é—­çŠ¶æ€ï¼ˆCLOSED ï¼‰ï¼ŒæœåŠ¡åŸæ¥çš„ä¸»ä¸šåŠ¡é€»è¾‘æ¢å¤ï¼Œå¦åˆ™é‡æ–°è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ï¼ˆOPENï¼‰ã€‚</li></ol><h4 id="é™çº§-å…œåº•" tabindex="-1"><a class="header-anchor" href="#é™çº§-å…œåº•" aria-hidden="true">#</a> é™çº§ï¼ˆå…œåº•ï¼‰</h4><h5 id="ç³»ç»Ÿå®šä¹‰å…œåº•æ–¹æ³•è¿”å›" tabindex="-1"><a class="header-anchor" href="#ç³»ç»Ÿå®šä¹‰å…œåº•æ–¹æ³•è¿”å›" aria-hidden="true">#</a> ç³»ç»Ÿå®šä¹‰å…œåº•æ–¹æ³•è¿”å›</h5><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219175542668.png" alt="image-20221219175542668"></p><h5 id="è‡ªå®šä¹‰å…œåº•æ–¹æ³•æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰å…œåº•æ–¹æ³•æ–¹æ³•" aria-hidden="true">#</a> è‡ªå®šä¹‰å…œåº•æ–¹æ³•æ–¹æ³•</h5><p>ä½¿ç”¨è‡ªå®šä¹‰å…¨å±€é™çº§æ–¹æ³•ç±»çš„å½¢å¼ ä¸ä¸šåŠ¡ä»£ç è¿›è¡Œè§£è€¦</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219180520864.png" alt="image-20221219180520864"></p><h5 id="æ•´åˆopenfeignå®ç°æœåŠ¡é—´é™çº§å…œåº•" tabindex="-1"><a class="header-anchor" href="#æ•´åˆopenfeignå®ç°æœåŠ¡é—´é™çº§å…œåº•" aria-hidden="true">#</a> æ•´åˆOpenFeignå®ç°æœåŠ¡é—´é™çº§å…œåº•</h5><p><strong>openFeignçš„é™çº§éœ€è¦å¸¦é™çº§çš„æ¡†æ¶æ”¯æŒ</strong>ï¼Œï¼ˆæ¶ˆè´¹ç«¯ä½¿ç”¨ï¼‰åœ¨å­¦ä¹ OpenFiegnçš„æ—¶å€™æ”¯æŒé™çº§çš„æ¡†æ¶ä½¿ç”¨çš„æ˜¯<strong>Hystrix</strong>ï¼Œè¿™æ¬¡æ˜¯<strong>Sentinel</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>		<span class="token comment">&lt;!--SpringCloud openfeign --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--SpringCloud ailibaba nacos --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--SpringCloud ailibaba sentinel --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230325144108081.png" alt="image-20230325144108081"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20230325144425227.png" alt="image-20230325144425227"></p><h4 id="çƒ­ç‚¹è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#çƒ­ç‚¹è§„åˆ™" aria-hidden="true">#</a> çƒ­ç‚¹è§„åˆ™</h4><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219190050996.png" alt="image-20221219190050996"></p><h3 id="sentinelresource-æ³¨è§£â˜†" tabindex="-1"><a class="header-anchor" href="#sentinelresource-æ³¨è§£â˜†" aria-hidden="true">#</a> @SentinelResource æ³¨è§£â˜†</h3><p>@SentinelResource æ³¨è§£æ˜¯ Sentinel æä¾›çš„æœ€é‡è¦çš„æ³¨è§£ä¹‹ä¸€ï¼Œå®ƒè¿˜åŒ…å«äº†å¤šä¸ªå±æ€§ï¼Œå¦‚ä¸‹è¡¨ã€‚</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>å¿…å¡«ä¸å¦</th><th>ä½¿ç”¨è¦æ±‚</th></tr></thead><tbody><tr><td>value</td><td>ç”¨äºæŒ‡å®šèµ„æºçš„åç§°</td><td>å¿…å¡«</td><td>-</td></tr><tr><td>entryType</td><td>entry ç±»å‹</td><td>å¯é€‰é¡¹ï¼ˆé»˜è®¤ä¸º EntryType.OUTï¼‰</td><td>-</td></tr><tr><td><strong>blockHandler</strong></td><td>æœåŠ¡é™æµåä¼šæŠ›å‡º BlockException å¼‚å¸¸ï¼Œè€Œ blockHandler åˆ™æ˜¯ç”¨æ¥æŒ‡å®šä¸€ä¸ªå‡½æ•°æ¥å¤„ç† BlockException å¼‚å¸¸çš„ã€‚ ç®€å•ç‚¹è¯´ï¼Œè¯¥å±æ€§ç”¨äºæŒ‡å®šæœåŠ¡é™æµåçš„åç»­å¤„ç†é€»è¾‘ã€‚</td><td>å¯é€‰é¡¹</td><td>blockHandler å‡½æ•°è®¿é—®èŒƒå›´éœ€è¦æ˜¯ publicï¼›è¿”å›ç±»å‹éœ€è¦ä¸åŸæ–¹æ³•ç›¸åŒ¹é…ï¼›å‚æ•°ç±»å‹éœ€è¦å’ŒåŸæ–¹æ³•ç›¸åŒ¹é…å¹¶ä¸”æœ€ååŠ ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œç±»å‹ä¸º BlockExceptionï¼›blockHandler å‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œè‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®š blockHandler ä¸ºå¯¹åº”çš„ç±»çš„ Class å¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</td></tr><tr><td><strong>blockHandlerClass</strong></td><td>è‹¥ blockHandler å‡½æ•°ä¸åŸæ–¹æ³•ä¸åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¯¥å±æ€§æŒ‡å®š blockHandler å‡½æ•°æ‰€åœ¨çš„ç±»ã€‚</td><td>å¯é€‰é¡¹</td><td>ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»ä¸ blockHandler å±æ€§é…åˆä½¿ç”¨ï¼›è¯¥å±æ€§æŒ‡å®šçš„ç±»ä¸­çš„ blockHandler å‡½æ•°å¿…é¡»ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</td></tr><tr><td><strong>fallback</strong></td><td>ç”¨äºåœ¨æŠ›å‡ºå¼‚å¸¸ï¼ˆåŒ…æ‹¬ BlockExceptionï¼‰æ—¶ï¼Œæä¾› fallback å¤„ç†é€»è¾‘ã€‚ fallback å‡½æ•°å¯ä»¥é’ˆå¯¹æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸ï¼ˆé™¤äº† exceptionsToIgnore é‡Œé¢æ’é™¤æ‰çš„å¼‚å¸¸ç±»å‹ï¼‰è¿›è¡Œå¤„ç†ã€‚</td><td>å¯é€‰é¡¹</td><td>è¿”å›å€¼ç±»å‹å¿…é¡»ä¸åŸå‡½æ•°è¿”å›å€¼ç±»å‹ä¸€è‡´ï¼›æ–¹æ³•å‚æ•°åˆ—è¡¨éœ€è¦å’ŒåŸå‡½æ•°ä¸€è‡´ï¼Œæˆ–è€…å¯ä»¥é¢å¤–å¤šä¸€ä¸ª Throwable ç±»å‹çš„å‚æ•°ç”¨äºæ¥æ”¶å¯¹åº”çš„å¼‚å¸¸ï¼›fallback å‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œè‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®š fallbackClass ä¸ºå¯¹åº”çš„ç±»çš„ Class å¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</td></tr><tr><td><strong>fallbackClass</strong></td><td>è‹¥ fallback å‡½æ•°ä¸åŸæ–¹æ³•ä¸åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¯¥å±æ€§æŒ‡å®š blockHandler å‡½æ•°æ‰€åœ¨çš„ç±»ã€‚</td><td>å¯é€‰é¡¹</td><td>ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»ä¸ fallback æˆ– defaultFallback å±æ€§é…åˆä½¿ç”¨ï¼›è¯¥å±æ€§æŒ‡å®šçš„ç±»ä¸­çš„ fallback å‡½æ•°å¿…é¡»ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</td></tr><tr><td>defaultFallback</td><td>é»˜è®¤çš„ fallback å‡½æ•°åç§°ï¼Œé€šå¸¸ç”¨äºé€šç”¨çš„ fallback é€»è¾‘ï¼ˆå³å¯ä»¥ç”¨äºå¾ˆå¤šæœåŠ¡æˆ–æ–¹æ³•ï¼‰ã€‚ é»˜è®¤ fallback å‡½æ•°å¯ä»¥é’ˆå¯¹æ‰€ä»¥ç±»å‹çš„å¼‚å¸¸ï¼ˆé™¤äº† exceptionsToIgnore é‡Œé¢æ’é™¤æ‰çš„å¼‚å¸¸ç±»å‹ï¼‰è¿›è¡Œå¤„ç†ã€‚</td><td>å¯é€‰é¡¹</td><td>è¿”å›å€¼ç±»å‹å¿…é¡»ä¸åŸå‡½æ•°è¿”å›å€¼ç±»å‹ä¸€è‡´ï¼›æ–¹æ³•å‚æ•°åˆ—è¡¨éœ€è¦ä¸ºç©ºï¼Œæˆ–è€…å¯ä»¥é¢å¤–å¤šä¸€ä¸ª Throwable ç±»å‹çš„å‚æ•°ç”¨äºæ¥æ”¶å¯¹åº”çš„å¼‚å¸¸ï¼›defaultFallback å‡½æ•°é»˜è®¤éœ€è¦å’ŒåŸæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­ã€‚è‹¥å¸Œæœ›ä½¿ç”¨å…¶ä»–ç±»çš„å‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‡å®š fallbackClass ä¸ºå¯¹åº”çš„ç±»çš„ Class å¯¹è±¡ï¼Œæ³¨æ„å¯¹åº”çš„å‡½æ•°å¿…éœ€ä¸º static å‡½æ•°ï¼Œå¦åˆ™æ— æ³•è§£æã€‚</td></tr><tr><td><strong>exceptionsToIgnore</strong></td><td><strong>å¿½ç•¥å¼‚å¸¸å…œåº•</strong> ç”¨äº<strong>æŒ‡å®šå“ªäº›å¼‚å¸¸è¢«æ’é™¤æ‰</strong>ï¼Œ<strong>ä¸ä¼šè®¡å…¥å¼‚å¸¸ç»Ÿè®¡ä¸­</strong>ï¼Œä¹Ÿ<strong>ä¸ä¼šè¿›å…¥ fallback é€»è¾‘</strong>ä¸­ï¼Œè€Œæ˜¯ä¼šåŸæ ·æŠ›å‡ºã€‚</td><td>å¯é€‰é¡¹</td><td>-</td></tr></tbody></table><blockquote><p>æ³¨ï¼šåœ¨ Sentinel 1.6.0 ä¹‹å‰ï¼Œfallback å‡½æ•°åªé’ˆå¯¹é™çº§å¼‚å¸¸ï¼ˆDegradeExceptionï¼‰è¿›è¡Œå¤„ç†ï¼Œä¸èƒ½å¤„ç†ä¸šåŠ¡å¼‚å¸¸ã€‚</p></blockquote><h4 id="blockhandler-fallbackå¯¹æ¯”-éƒ½æ˜¯é™çº§å…œåº•æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#blockhandler-fallbackå¯¹æ¯”-éƒ½æ˜¯é™çº§å…œåº•æ–¹æ³•" aria-hidden="true">#</a> BlockHandler &amp; FallBackå¯¹æ¯”ï¼ˆéƒ½æ˜¯é™çº§å…œåº•æ–¹æ³•ï¼‰</h4><p><strong>BlockHandler------------------é…ç½®è§„åˆ™å¼‚å¸¸</strong></p><p><strong>FallBack--------------------------Javaå¼‚å¸¸</strong></p><p>è‹¥éƒ½é…ç½®éƒ½ä¼šç”Ÿæ•ˆ</p><p>â€‹ ----------ä¸”åŒæ—¶å‡ºç°é…ç½®è§„åˆ™å¼‚å¸¸ä»¥åŠJavaå¼‚å¸¸åˆ™-------------<code>blockHandler</code>ä¼˜å…ˆçº§æ›´å¤§</p><h3 id="sentinelè§„åˆ™æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#sentinelè§„åˆ™æŒä¹…åŒ–" aria-hidden="true">#</a> Sentinelè§„åˆ™æŒä¹…åŒ–</h3><p><strong>æ­é…Nacos</strong> (é…ç½®è§„åˆ™åœ¨Nacosä¸­è¿›è¡Œ è‹¥æœåŠ¡å™¨å…³é—­åé‡å¯ Nacosä¼šå°†è§„åˆ™å†™å…¥Sentinelä¸­)</p><p>pom</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>		<span class="token comment">&lt;!--SpringCloud ailibaba sentinel-datasource-nacos åç»­åšæŒä¹…åŒ–ç”¨åˆ°--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.yml</p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219200222047.png" alt="image-20221219200222047"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219201049545.png" alt="image-20221219201049545"></p><p><img src="https://eddie-typora-image.oss-cn-shenzhen.aliyuncs.com/typora-user-images/image-20221219201303110.png" alt="image-20221219201303110"></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/EddieZturbo/Eddie-Tech-Blog.github.io/edit/main/docs/backend/dev_framework/SpringCloud.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="page-nav"><a href="/backend/dev_framework/Spring5.html" class="nav-link prev" aria-label="Spring5"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->Spring5</div></a><a href="/backend/dev_framework/SpringMVC.html" class="nav-link next" aria-label="SpringMVC"><div class="hint">Next<span class="arrow end"></span></div><div class="link">SpringMVC<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Default footer</div><div class="copyright">Copyright Â© 2023 EddieZ</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-7117916c.js" defer></script>
  </body>
</html>
